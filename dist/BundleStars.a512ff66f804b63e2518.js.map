{"version":3,"file":"BundleStars.a512ff66f804b63e2518.js","mappings":"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","sources":["webpack://telegram-t/./src/bundles/stars.ts","webpack://telegram-t/./src/components/common/BadgeButton.tsx","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.tsx","webpack://telegram-t/./src/components/modals/gift/GiftComposer.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItemPremium.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItemStar.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModal.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.tsx","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.tsx","webpack://telegram-t/./src/components/modals/gift/fragment/GiftWithdrawModal.tsx","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.tsx","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.tsx","webpack://telegram-t/./src/components/modals/stars/BalanceBlock.tsx","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.tsx","webpack://telegram-t/./src/components/modals/stars/StarsPaymentModal.tsx","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.tsx","webpack://telegram-t/./src/components/modals/stars/helpers/transaction.ts","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.tsx","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.tsx","webpack://telegram-t/./src/hooks/animations/useTransitionActiveKey.ts","webpack://telegram-t/./src/hooks/useCustomBackground.ts","webpack://telegram-t/./src/util/localization/format.tsx","webpack://telegram-t/./src/components/common/BadgeButton.module.scss?da7b","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.module.scss?3156","webpack://telegram-t/./src/components/modals/gift/GiftComposer.module.scss?dac8","webpack://telegram-t/./src/components/modals/gift/GiftItem.module.scss?c564","webpack://telegram-t/./src/components/modals/gift/GiftModal.module.scss?fd13","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.module.scss?7d19","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.module.scss?2bf6","webpack://telegram-t/./src/components/modals/gift/fragment/GiftWithdrawModal.module.scss?4fec","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.module.scss?4f0e","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.module.scss?b7e9","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.module.scss?ae9e","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.module.scss?80b2","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.module.scss?b8f3","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.module.scss?bbd4","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.module.scss?069e","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.module.scss?74b5","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.module.scss?5025","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.module.scss?605d","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.module.scss?b947","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.module.scss?a215"],"sourcesContent":["export { default as StarsGiftModal } from '../components/modals/stars/gift/StarsGiftModal';\nexport { default as StarsGiftingPickerModal } from '../components/main/premium/StarsGiftingPickerModal';\nexport { default as StarsBalanceModal } from '../components/modals/stars/StarsBalanceModal';\nexport { default as StarPaymentModal } from '../components/modals/stars/StarsPaymentModal';\nexport { default as StarsTransactionInfoModal } from '../components/modals/stars/transaction/StarsTransactionModal';\nexport { default as StarsSubscriptionModal } from '../components/modals/stars/subscription/StarsSubscriptionModal';\nexport { default as PaidReactionModal } from '../components/modals/paidReaction/PaidReactionModal';\nexport { default as GiftModal } from '../components/modals/gift/GiftModal';\nexport { default as GiftRecipientPicker } from '../components/modals/gift/recipient/GiftRecipientPicker';\nexport { default as GiftInfoModal } from '../components/modals/gift/info/GiftInfoModal';\nexport { default as GiftUpgradeModal } from '../components/modals/gift/upgrade/GiftUpgradeModal';\nexport { default as GiftWithdrawModal } from '../components/modals/gift/fragment/GiftWithdrawModal';\n","import React from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './BadgeButton.module.scss';\n\ntype OwnProps = {\n  children: React.ReactNode;\n  className?: string;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n};\n\nconst BadgeButton = ({\n  children,\n  className,\n  onClick,\n}: OwnProps) => {\n  return (\n    <div className={buildClassName(styles.root, onClick && styles.clickable, className)} onClick={onClick}>\n      {children}\n    </div>\n  );\n};\n\nexport default BadgeButton;\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useMemo,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport { SERVICE_NOTIFICATIONS_USER_ID } from '../../../config';\nimport {\n  filterUsersByName, isDeletedUser, isUserBot,\n} from '../../../global/helpers';\nimport { unique } from '../../../util/iteratees';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PeerPicker from '../../common/pickers/PeerPicker';\nimport PickerModal from '../../common/pickers/PickerModal';\n\nimport styles from './StarsGiftingPickerModal.module.scss';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n  activeListIds?: string[];\n  archivedListIds?: string[];\n}\n\nconst StarsGiftingPickerModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  activeListIds,\n  archivedListIds,\n  userIds,\n}) => {\n  const { closeStarsGiftingPickerModal, openStarsGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const combinedIds = [\n      ...(userIds || []),\n      ...(activeListIds || []),\n      ...(archivedListIds || []),\n    ];\n\n    const filteredContactIds = filterUsersByName(combinedIds, usersById, searchQuery);\n\n    return sortChatIds(unique(filteredContactIds).filter((id) => {\n      const user = usersById[id];\n\n      if (!user) {\n        return false;\n      }\n\n      return !user.isSupport\n        && !isUserBot(user) && !isDeletedUser(user)\n        && id !== currentUserId && id !== SERVICE_NOTIFICATIONS_USER_ID;\n    }));\n  }, [currentUserId, searchQuery, userIds, activeListIds, archivedListIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((newSelectedId?: string) => {\n    if (newSelectedId?.length) {\n      openStarsGiftModal({ forUserId: newSelectedId });\n      closeStarsGiftingPickerModal();\n    }\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeStarsGiftingPickerModal}\n      title={oldLang('GiftStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      confirmButtonText={oldLang('Continue')}\n      onEnter={closeStarsGiftingPickerModal}\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        onSelectedIdChange={handleSelectedUserIdsChange}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    chats: {\n      listIds,\n    },\n    currentUserId,\n  } = global;\n\n  return {\n    userIds: global.contactList?.userIds,\n    activeListIds: listIds.active,\n    archivedListIds: listIds.archived,\n    currentUserId,\n  };\n})(StarsGiftingPickerModal));\n","import type { ChangeEvent } from 'react';\nimport React, {\n  memo, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiMessage, ApiPeer } from '../../../api/types';\nimport type { ThemeKey } from '../../../types';\nimport type { GiftOption } from './GiftModal';\n\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { getPeerTitle } from '../../../global/helpers';\nimport { isApiPeerUser } from '../../../global/helpers/peers';\nimport { selectPeer, selectTabState, selectTheme } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\n\nimport useCustomBackground from '../../../hooks/useCustomBackground';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport ActionMessage from '../../middle/ActionMessage';\nimport Button from '../../ui/Button';\nimport Link from '../../ui/Link';\nimport ListItem from '../../ui/ListItem';\nimport Switcher from '../../ui/Switcher';\nimport TextArea from '../../ui/TextArea';\n\nimport styles from './GiftComposer.module.scss';\n\nexport type OwnProps = {\n  gift: GiftOption;\n  peerId: string;\n};\n\nexport type StateProps = {\n  captionLimit?: number;\n  theme: ThemeKey;\n  isBackgroundBlurred?: boolean;\n  patternColor?: string;\n  customBackground?: string;\n  backgroundColor?: string;\n  peer?: ApiPeer;\n  currentUserId?: string;\n  isPaymentFormLoading?: boolean;\n};\n\nconst LIMIT_DISPLAY_THRESHOLD = 50;\n\nfunction GiftComposer({\n  gift,\n  peerId,\n  peer,\n  captionLimit,\n  theme,\n  isBackgroundBlurred,\n  patternColor,\n  backgroundColor,\n  customBackground,\n  currentUserId,\n  isPaymentFormLoading,\n}: OwnProps & StateProps) {\n  const { sendStarGift, openInvoice, openGiftUpgradeModal } = getActions();\n\n  const lang = useLang();\n\n  const [giftMessage, setGiftMessage] = useState<string>('');\n  const [shouldHideName, setShouldHideName] = useState<boolean>(false);\n  const [shouldPayForUpgrade, setShouldPayForUpgrade] = useState<boolean>(false);\n\n  const customBackgroundValue = useCustomBackground(theme, customBackground);\n\n  const isStarGift = 'id' in gift;\n  const isPeerUser = peer && isApiPeerUser(peer);\n\n  const localMessage = useMemo(() => {\n    if (!isStarGift) {\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: true,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            targetChatId: peerId,\n            mediaType: 'action',\n            text: 'ActionGiftInbound',\n            type: 'giftPremium',\n            amount: gift.amount,\n            currency: gift.currency,\n            months: gift.months,\n            message: {\n              text: giftMessage,\n            },\n            translationValues: ['%action_origin%', '%gift_payment_amount%'],\n          },\n        },\n      } satisfies ApiMessage;\n    }\n\n    return {\n      id: -1,\n      chatId: currentUserId!,\n      isOutgoing: false,\n      senderId: currentUserId,\n      date: Math.floor(Date.now() / 1000),\n      content: {\n        action: {\n          targetChatId: peerId,\n          mediaType: 'action',\n          text: 'ActionGiftInbound',\n          type: 'starGift',\n          currency: STARS_CURRENCY_CODE,\n          amount: gift.stars,\n          starGift: {\n            type: 'starGift',\n            message: giftMessage?.length ? {\n              text: giftMessage,\n            } : undefined,\n            isNameHidden: shouldHideName,\n            starsToConvert: gift.starsToConvert,\n            canUpgrade: shouldPayForUpgrade || undefined,\n            alreadyPaidUpgradeStars: shouldPayForUpgrade ? gift.upgradeStars : undefined,\n            isSaved: false,\n            gift,\n            peerId,\n            fromId: currentUserId,\n          },\n          translationValues: ['%action_origin%', '%gift_payment_amount%'],\n        },\n      },\n    } satisfies ApiMessage;\n  }, [currentUserId, gift, giftMessage, isStarGift, shouldHideName, shouldPayForUpgrade, peerId]);\n\n  const handleGiftMessageChange = useLastCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setGiftMessage(e.target.value);\n  });\n\n  const handleShouldHideNameChange = useLastCallback(() => {\n    setShouldHideName(!shouldHideName);\n  });\n\n  const handleShouldPayForUpgradeChange = useLastCallback(() => {\n    setShouldPayForUpgrade(!shouldPayForUpgrade);\n  });\n\n  const handleOpenUpgradePreview = useLastCallback(() => {\n    if (!isStarGift) return;\n    openGiftUpgradeModal({\n      giftId: gift.id,\n      peerId,\n    });\n  });\n\n  const handleMainButtonClick = useLastCallback(() => {\n    if (isStarGift) {\n      sendStarGift({\n        peerId,\n        shouldHideName,\n        gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n        shouldUpgrade: shouldPayForUpgrade,\n      });\n      return;\n    }\n\n    openInvoice({\n      type: 'giftcode',\n      userIds: [peerId],\n      currency: gift.currency,\n      amount: gift.amount,\n      option: gift,\n      message: giftMessage ? { text: giftMessage } : undefined,\n    });\n  });\n\n  function renderOptionsSection() {\n    const symbolsLeft = captionLimit ? captionLimit - giftMessage.length : undefined;\n\n    const title = getPeerTitle(lang, peer!)!;\n    return (\n      <div className={styles.optionsSection}>\n        <TextArea\n          className={styles.messageInput}\n          onChange={handleGiftMessageChange}\n          value={giftMessage}\n          label={lang('GiftMessagePlaceholder')}\n          maxLength={captionLimit}\n          maxLengthIndicator={symbolsLeft && symbolsLeft < LIMIT_DISPLAY_THRESHOLD ? symbolsLeft.toString() : undefined}\n        />\n\n        {isStarGift && gift.upgradeStars && (\n          <ListItem className={styles.switcher} narrow ripple onClick={handleShouldPayForUpgradeChange}>\n            <span>\n              {lang('GiftMakeUnique', {\n                stars: formatStarsAsIcon(lang, gift.upgradeStars, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayForUpgrade}\n              onChange={handleShouldPayForUpgradeChange}\n              label={lang('GiftMakeUniqueAcc')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && (\n          <div className={styles.description}>\n            {isPeerUser\n              ? lang('GiftMakeUniqueDescription', {\n                user: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })\n              : lang('GiftMakeUniqueDescriptionChannel', {\n                peer: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })}\n          </div>\n        )}\n\n        {isStarGift && (\n          <ListItem className={styles.switcher} narrow ripple onClick={handleShouldHideNameChange}>\n            <span>{lang('GiftHideMyName')}</span>\n            <Switcher\n              checked={shouldHideName}\n              onChange={handleShouldHideNameChange}\n              label={lang('GiftHideMyName')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && (\n          <div className={styles.description}>\n            {isPeerUser ? lang('GiftHideNameDescription', { receiver: title }) : lang('GiftHideNameDescriptionChannel')}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const amount = isStarGift\n      ? formatStarsAsIcon(lang, gift.stars + (shouldPayForUpgrade ? gift.upgradeStars! : 0), { asFont: true })\n      : formatCurrency(gift.amount, gift.currency);\n\n    return (\n      <div className={styles.footer}>\n        {isStarGift && gift.availabilityRemains && (\n          <PremiumProgress\n            isPrimary\n            progress={gift.availabilityRemains / gift.availabilityTotal!}\n            rightText={lang('GiftSoldCount', {\n              count: gift.availabilityTotal! - gift.availabilityRemains,\n            })}\n            leftText={lang('GiftLeftCount', { count: gift.availabilityRemains })}\n            className={styles.limited}\n          />\n        )}\n        <Button\n          className={styles.mainButton}\n          onClick={handleMainButtonClick}\n          isLoading={isPaymentFormLoading}\n        >\n          {lang('GiftSend', {\n            amount,\n          }, {\n            withNodes: true,\n          })}\n        </Button>\n      </div>\n    );\n  }\n\n  const bgClassName = buildClassName(\n    styles.background,\n    styles.withTransition,\n    customBackground && styles.customBgImage,\n    backgroundColor && styles.customBgColor,\n    customBackground && isBackgroundBlurred && styles.blurred,\n  );\n\n  return (\n    <div className={buildClassName(styles.root, 'custom-scroll')}>\n      <div\n        className={buildClassName(styles.actionMessageView, 'MessageList')}\n        // @ts-ignore -- FIXME: Find a way to disable interactions but keep a11y\n        inert\n        style={buildStyle(\n          `--pattern-color: ${patternColor}`,\n          backgroundColor && `--theme-background-color: ${backgroundColor}`,\n        )}\n      >\n        <div\n          className={bgClassName}\n          style={customBackgroundValue ? `--custom-background: ${customBackgroundValue}` : undefined}\n        />\n        <ActionMessage key={isStarGift ? gift.id : gift.months} message={localMessage} />\n      </div>\n      {renderOptionsSection()}\n      <div className={styles.spacer} />\n      {renderFooter()}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { peerId }): StateProps => {\n    const theme = selectTheme(global);\n    const {\n      isBlurred: isBackgroundBlurred,\n      patternColor,\n      background: customBackground,\n      backgroundColor,\n    } = global.settings.themes[theme] || {};\n    const peer = selectPeer(global, peerId);\n\n    const tabState = selectTabState(global);\n\n    return {\n      peer,\n      theme,\n      isBackgroundBlurred,\n      patternColor,\n      customBackground,\n      backgroundColor,\n      captionLimit: global.appConfig?.starGiftMaxMessageLength,\n      currentUserId: global.currentUserId,\n      isPaymentFormLoading: tabState.isPaymentFormLoading,\n    };\n  },\n)(GiftComposer));\n","import React, { memo } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type {\n  ApiPremiumGiftCodeOption,\n  ApiSticker,\n} from '../../../api/types';\n\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForDuration,\n} from '../../../global/selectors';\nimport { formatCurrencyAsString } from '../../../util/formatCurrency';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  option: ApiPremiumGiftCodeOption;\n  baseMonthAmount?: number;\n  onClick: (gift: ApiPremiumGiftCodeOption) => void;\n};\n\nexport type StateProps = {\n  sticker?: ApiSticker;\n  canPlayAnimatedEmojis?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 86;\n\nfunction GiftItemPremium({\n  sticker, canPlayAnimatedEmojis, baseMonthAmount, option, onClick,\n}: OwnProps & StateProps) {\n  const {\n    months, amount, currency,\n  } = option;\n  const lang = useLang();\n\n  const handleGiftClick = useLastCallback(() => {\n    onClick(option);\n  });\n\n  const perMonth = Math.floor(amount / months);\n  const discount = baseMonthAmount && baseMonthAmount > perMonth\n    ? Math.ceil(100 - perMonth / (baseMonthAmount / 100))\n    : undefined;\n\n  function renderMonths() {\n    const caption = months === 12\n      ? lang('Years', { count: 1 }, { pluralValue: 1 })\n      : lang('Months', { count: months }, { pluralValue: months });\n    return (\n      <div className={styles.monthsDescription}>\n        {caption}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={styles.container}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        play={canPlayAnimatedEmojis}\n        noLoop\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n\n      {renderMonths()}\n      <div className={styles.description}>\n        {lang('PremiumGiftDescription')}\n      </div>\n      <Button className={styles.buy} nonInteractive size=\"tiny\" pill fluid>\n        {formatCurrencyAsString(amount, currency)}\n      </Button>\n      {Boolean(discount) && (\n        <GiftRibbon color=\"red\" text={lang('GiftDiscount', { percent: discount })} />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { option }): StateProps => {\n    const sticker = selectGiftStickerForDuration(global, option.months);\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n\n    return {\n      sticker,\n      canPlayAnimatedEmojis,\n    };\n  },\n)(GiftItemPremium));\n","import React, { memo, useRef } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiStarGiftRegular,\n} from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useFlag from '../../../hooks/useFlag';\nimport { type ObserveFn, useOnIntersect } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Icon from '../../common/icons/Icon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  gift: ApiStarGiftRegular;\n  observeIntersection?: ObserveFn;\n  onClick: (gift: ApiStarGiftRegular) => void;\n};\n\nconst GIFT_STICKER_SIZE = 90;\n\nfunction GiftItemStar({ gift, observeIntersection, onClick }: OwnProps) {\n  const { openGiftInfoModal } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const lang = useLang();\n  const [shouldPlay, play] = useFlag();\n\n  const {\n    stars,\n    isLimited,\n    isSoldOut,\n    sticker,\n  } = gift;\n\n  const handleGiftClick = useLastCallback(() => {\n    if (isSoldOut) {\n      openGiftInfoModal({ gift });\n      return;\n    }\n\n    onClick(gift);\n  });\n\n  useOnIntersect(ref, observeIntersection, (entry) => {\n    if (entry.isIntersecting) play();\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(styles.container, styles.starGift)}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        noLoop\n        play={shouldPlay}\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n      <Button className={styles.buy} nonInteractive size=\"tiny\" color=\"stars\" withSparkleEffect pill fluid>\n        <Icon name=\"star\" className={styles.star} />\n        <div className={styles.amount}>\n          {stars}\n        </div>\n      </Button>\n      {isLimited && !isSoldOut && <GiftRibbon color=\"blue\" text={lang('GiftLimited')} />}\n      {isSoldOut && <GiftRibbon color=\"red\" text={lang('GiftSoldOut')} />}\n    </div>\n  );\n}\n\nexport default memo(GiftItemStar);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiPeer,\n  ApiPremiumGiftCodeOption,\n  ApiStarGiftRegular,\n  ApiStarsAmount,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { StarGiftCategory } from '../../../types';\n\nimport { getPeerTitle, getUserFullName } from '../../../global/helpers';\nimport { isApiPeerChat, isApiPeerUser } from '../../../global/helpers/peers';\nimport { selectPeer } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { throttle } from '../../../util/schedulers';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport GiftSendingOptions from './GiftComposer';\nimport GiftItemPremium from './GiftItemPremium';\nimport GiftItemStar from './GiftItemStar';\nimport StarGiftCategoryList from './StarGiftCategoryList';\n\nimport styles from './GiftModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['giftModal'];\n};\n\nexport type GiftOption = ApiPremiumGiftCodeOption | ApiStarGiftRegular;\n\ntype StateProps = {\n  boostPerSentGift?: number;\n  starGiftsById?: Record<string, ApiStarGiftRegular>;\n  starGiftIdsByCategory?: Record<StarGiftCategory, string[]>;\n  starBalance?: ApiStarsAmount;\n  peer?: ApiPeer;\n  isSelf?: boolean;\n};\n\nconst AVATAR_SIZE = 100;\nconst INTERSECTION_THROTTLE = 200;\nconst SCROLL_THROTTLE = 200;\n\nconst runThrottledForScroll = throttle((cb) => cb(), SCROLL_THROTTLE, true);\n\nconst PremiumGiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starGiftsById,\n  starGiftIdsByCategory,\n  starBalance,\n  peer,\n  isSelf,\n}) => {\n  const {\n    closeGiftModal, requestConfetti,\n  } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const dialogRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const giftHeaderRef = useRef<HTMLHeadingElement>(null);\n\n  // eslint-disable-next-line no-null/no-null\n  const scrollerRef = useRef<HTMLDivElement>(null);\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const user = peer && isApiPeerUser(peer) ? peer : undefined;\n  const chat = peer && isApiPeerChat(peer) ? peer : undefined;\n\n  const [selectedGift, setSelectedGift] = useState<GiftOption | undefined>();\n  const [isHeaderHidden, setIsHeaderHidden] = useState(true);\n  const [isHeaderForStarGifts, setIsHeaderForStarGifts] = useState(false);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const filteredGifts = useMemo(() => {\n    return renderingModal?.gifts?.sort((prevGift, gift) => prevGift.months - gift.months)\n      .filter((gift) => gift.users === 1);\n  }, [renderingModal]);\n\n  const baseGift = useMemo(() => {\n    return filteredGifts?.reduce((prev, gift) => (prev.amount < gift.amount ? prev : gift));\n  }, [filteredGifts]);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE, isDisabled: !isOpen });\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (renderingModal?.isCompleted) {\n      showConfetti();\n    }\n  }, [renderingModal]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setIsHeaderHidden(true);\n      setSelectedGift(undefined);\n      setSelectedCategory('all');\n    }\n  }, [isOpen]);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLDivElement>) => {\n    if (selectedGift) return;\n    const currentTarget = e.currentTarget;\n\n    runThrottledForScroll(() => {\n      const { scrollTop } = currentTarget;\n\n      setIsHeaderHidden(scrollTop <= 150);\n\n      if (transitionRef.current && giftHeaderRef.current) {\n        const { top: headerTop } = giftHeaderRef.current.getBoundingClientRect();\n        const { top: transitionTop } = transitionRef.current.getBoundingClientRect();\n        setIsHeaderForStarGifts(headerTop - transitionTop <= 0);\n      }\n    });\n  });\n\n  const giftPremiumDescription = lang('GiftPremiumDescription', {\n    user: getUserFullName(user)!,\n    link: (\n      <SafeLink\n        text={lang('GiftPremiumDescriptionLinkCaption')}\n        url={lang('GiftPremiumDescriptionLink')}\n      />\n    ),\n  }, { withNodes: true });\n\n  const starGiftDescription = chat\n    ? lang('StarGiftDescriptionChannel', { peer: getPeerTitle(lang, chat) }, {\n      withNodes: true,\n      withMarkdown: true,\n    })\n    : isSelf\n      ? lang('StarGiftDescriptionSelf', undefined, {\n        withNodes: true,\n        renderTextFilters: ['br'],\n      })\n      : lang('StarGiftDescription', {\n        user: getUserFullName(user)!,\n      }, { withNodes: true, withMarkdown: true });\n\n  function renderGiftPremiumHeader() {\n    return (\n      <h2 className={buildClassName(styles.headerText, styles.center)}>\n        {lang('GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  function renderGiftPremiumDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.center)}>\n        {giftPremiumDescription}\n      </p>\n    );\n  }\n\n  function renderStarGiftsHeader() {\n    return (\n      <h2 ref={giftHeaderRef} className={buildClassName(styles.headerText, styles.center)}>\n        {lang(isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader')}\n      </h2>\n    );\n  }\n\n  function renderStarGiftsDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.starGiftsDescription, styles.center)}>\n        {starGiftDescription}\n      </p>\n    );\n  }\n\n  const handleGiftClick = useLastCallback((gift: GiftOption) => {\n    setSelectedGift(gift);\n    setIsHeaderForStarGifts('id' in gift);\n    setIsHeaderHidden(false);\n  });\n\n  function renderStarGifts() {\n    return (\n      <div className={styles.starGiftsContainer}>\n        {starGiftsById && starGiftIdsByCategory?.[selectedCategory].map((giftId) => {\n          const gift = starGiftsById[giftId];\n          return (\n            <GiftItemStar\n              gift={gift}\n              observeIntersection={observeIntersection}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderPremiumGifts() {\n    return (\n      <div className={styles.premiumGiftsGallery}>\n        {filteredGifts?.map((gift) => {\n          return (\n            <GiftItemPremium\n              option={gift}\n              baseMonthAmount={baseGift ? Math.floor(baseGift.amount / baseGift.months) : undefined}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  const onCategoryChanged = useLastCallback((category: StarGiftCategory) => {\n    setSelectedCategory(category);\n  });\n\n  const handleCloseButtonClick = useLastCallback(() => {\n    if (selectedGift) {\n      setSelectedGift(undefined);\n      return;\n    }\n    closeGiftModal();\n  });\n\n  function renderMainScreen() {\n    return (\n      <div ref={scrollerRef} className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={styles.avatars}>\n          <Avatar\n            size={AVATAR_SIZE}\n            peer={peer}\n          />\n          <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n        </div>\n        {!isSelf && !chat && renderGiftPremiumHeader()}\n        {!isSelf && !chat && renderGiftPremiumDescription()}\n        {!isSelf && !chat && renderPremiumGifts()}\n\n        {renderStarGiftsHeader()}\n        {renderStarGiftsDescription()}\n        <StarGiftCategoryList onCategoryChanged={onCategoryChanged} />\n        <Transition\n          name=\"zoomFade\"\n          activeKey={getCategoryKey(selectedCategory)}\n          className={styles.starGiftsTransition}\n        >\n          {renderStarGifts()}\n        </Transition>\n      </div>\n    );\n  }\n\n  const isBackButton = Boolean(selectedGift);\n\n  const buttonClassName = buildClassName(\n    'animated-close-icon',\n    isBackButton && 'state-back',\n  );\n\n  return (\n    <Modal\n      dialogRef={dialogRef}\n      onClose={closeGiftModal}\n      isOpen={isOpen}\n      isSlim\n      contentClassName={styles.content}\n      className={buildClassName(styles.modalDialog, styles.root)}\n    >\n      <Button\n        className={styles.closeButton}\n        round\n        color=\"translucent\"\n        size=\"smaller\"\n        onClick={handleCloseButtonClick}\n        ariaLabel={isBackButton ? oldLang('Common.Back') : oldLang('Common.Close')}\n      >\n        <div className={buttonClassName} />\n      </Button>\n      <BalanceBlock className={styles.balance} balance={starBalance} />\n      <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n        <Transition\n          name=\"slideVerticalFade\"\n          activeKey={Number(isHeaderForStarGifts)}\n          slideClassName={styles.headerSlide}\n        >\n          <h2 className={styles.commonHeaderText}>\n            {lang(isHeaderForStarGifts ? (isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader') : 'GiftPremiumHeader')}\n          </h2>\n        </Transition>\n      </div>\n      <Transition\n        ref={transitionRef}\n        className={styles.transition}\n        name=\"pushSlide\"\n        activeKey={selectedGift ? 1 : 0}\n      >\n        {!selectedGift && renderMainScreen()}\n        {selectedGift && renderingModal?.forPeerId && (\n          <GiftSendingOptions gift={selectedGift} peerId={renderingModal.forPeerId} />\n        )}\n      </Transition>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const {\n    starGifts,\n    stars,\n    currentUserId,\n  } = global;\n\n  const peer = modal?.forPeerId ? selectPeer(global, modal.forPeerId) : undefined;\n  const isSelf = Boolean(currentUserId && modal?.forPeerId === currentUserId);\n\n  return {\n    boostPerSentGift: global.appConfig?.boostsPerSentGift,\n    starGiftsById: starGifts?.byId,\n    starGiftIdsByCategory: starGifts?.idsByCategory,\n    starBalance: stars?.balance,\n    peer,\n    isSelf,\n  };\n})(PremiumGiftModal));\n\nfunction getCategoryKey(category: StarGiftCategory) {\n  if (category === 'all') return -2;\n  if (category === 'limited') return -1;\n  if (category === 'stock') return 0;\n  return category;\n}\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { StarGiftCategory } from '../../../types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useLang from '../../../hooks/useLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarGiftCategoryList.module.scss';\n\ntype OwnProps = {\n  onCategoryChanged: (category: StarGiftCategory) => void;\n};\n\ntype StateProps = {\n  idsByCategory?: Record<StarGiftCategory, string[]>;\n};\n\nconst StarGiftCategoryList = ({\n  idsByCategory,\n  onCategoryChanged,\n}: StateProps & OwnProps) => {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const lang = useLang();\n  const starCategories: number[] | undefined = useMemo(() => idsByCategory && Object.keys(idsByCategory)\n    .filter((category) => category !== 'all' && category !== 'limited')\n    .map(Number)\n    .sort((a, b) => a - b),\n  [idsByCategory]);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  function handleItemClick(category: StarGiftCategory) {\n    setSelectedCategory(category);\n    onCategoryChanged(\n      category,\n    );\n  }\n\n  function renderCategoryName(category: StarGiftCategory) {\n    if (category === 'all') return lang('AllGiftsCategory');\n    if (category === 'stock') return lang('StockGiftsCategory');\n    if (category === 'limited') return lang('LimitedGiftsCategory');\n    return category;\n  }\n\n  function renderCategoryItem(category: StarGiftCategory) {\n    return (\n      <div\n        className={buildClassName(\n          styles.item,\n          selectedCategory === category && styles.selectedItem,\n        )}\n        onClick={() => handleItemClick(category)}\n      >\n        {Number.isInteger(category) && (\n          <StarIcon\n            className={styles.star}\n            type=\"gold\"\n            size=\"middle\"\n          />\n        )}\n        {renderCategoryName(category)}\n      </div>\n    );\n  }\n\n  useHorizontalScroll(ref, undefined, true);\n\n  return (\n    <div ref={ref} className={buildClassName(styles.list, 'no-scrollbar')}>\n      {renderCategoryItem('all')}\n      {renderCategoryItem('limited')}\n      {renderCategoryItem('stock')}\n      {starCategories?.map(renderCategoryItem)}\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const { starGifts } = global;\n\n    return {\n      idsByCategory: starGifts?.idsByCategory,\n    };\n  },\n)(StarGiftCategoryList));\n","import React, { memo, useMemo } from '../../../lib/teact/teact';\n\nimport type {\n  ApiStarGiftAttributeBackdrop, ApiStarGiftAttributeModel, ApiStarGiftAttributePattern,\n} from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\n\nimport { useTransitionActiveKey } from '../../../hooks/animations/useTransitionActiveKey';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Transition from '../../ui/Transition';\n\nimport styles from './UniqueGiftHeader.module.scss';\n\ntype OwnProps = {\n  modelAttribute: ApiStarGiftAttributeModel;\n  backdropAttribute: ApiStarGiftAttributeBackdrop;\n  patternAttribute: ApiStarGiftAttributePattern;\n  title?: string;\n  subtitle?: string;\n  className?: string;\n};\n\nconst STICKER_SIZE = 120;\n\nconst UniqueGiftHeader = ({\n  modelAttribute,\n  backdropAttribute,\n  patternAttribute,\n  title,\n  subtitle,\n  className,\n}: OwnProps) => {\n  const activeKey = useTransitionActiveKey([modelAttribute, backdropAttribute, patternAttribute]);\n  const subtitleColor = backdropAttribute?.textColor;\n\n  const radialPatternBackdrop = useMemo(() => {\n    const backdropColors = [backdropAttribute.centerColor, backdropAttribute.edgeColor];\n    const patternColor = backdropAttribute.patternColor;\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternColor={patternColor}\n        patternIcon={patternAttribute.sticker}\n      />\n    );\n  }, [backdropAttribute, patternAttribute]);\n\n  return (\n    <div className={buildClassName(styles.root, className)}>\n      <Transition\n        className={styles.transition}\n        slideClassName={styles.transitionSlide}\n        activeKey={activeKey}\n        direction={1}\n        name=\"zoomBounceSemiFade\"\n      >\n        {radialPatternBackdrop}\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          sticker={modelAttribute.sticker}\n          size={STICKER_SIZE}\n        />\n      </Transition>\n      {title && <h1 className={styles.title}>{title}</h1>}\n      {subtitle && (\n        <p className={styles.subtitle} style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}>\n          {subtitle}\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default memo(UniqueGiftHeader);\n","import React, {\n  memo,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftUnique } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport type { CustomPeer } from '../../../../types';\n\nimport { getDays } from '../../../../util/dates/units';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport PasswordForm from '../../../common/PasswordForm';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftWithdrawModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftWithdrawModal'];\n};\n\ntype StateProps = {\n  hasPassword?: boolean;\n  passwordHint?: string;\n};\n\nconst FRAGMENT_PEER: CustomPeer = {\n  isCustomPeer: true,\n  avatarIcon: 'fragment',\n  title: '',\n  customPeerAvatarColor: '#000000',\n};\nconst GIFT_STICKER_SIZE = 4.5 * REM;\n\nconst GiftWithdrawModal = ({ modal, hasPassword, passwordHint }: OwnProps & StateProps) => {\n  const { closeGiftWithdrawModal, clearGiftWithdrawError, processStarGiftWithdrawal } = getActions();\n  const isOpen = Boolean(modal);\n\n  const [shouldShowPassword, setShouldShowPassword] = useState(false);\n\n  const lang = useLang();\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const gift = renderingModal?.gift?.gift as ApiStarGiftUnique;\n  const giftAttributes = gift && getGiftAttributes(gift);\n  const exportDelay = renderingModal?.gift?.canExportAt\n    ? Math.max(renderingModal.gift.canExportAt - getServerTime(), 0) : undefined;\n\n  const handleClose = useLastCallback(() => {\n    closeGiftWithdrawModal();\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    processStarGiftWithdrawal({\n      gift: renderingModal!.gift.inputGift!,\n      password,\n    });\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('GiftWithdrawTitle')}\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      {giftAttributes && (\n        <>\n          <div className={styles.header}>\n            <div className={styles.giftPreview}>\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n                patternColor={giftAttributes.backdrop?.patternColor}\n                patternIcon={giftAttributes.pattern?.sticker}\n              />\n              <AnimatedIconFromSticker\n                className={styles.sticker}\n                size={GIFT_STICKER_SIZE}\n                sticker={giftAttributes.model?.sticker}\n              />\n            </div>\n            <Icon name=\"next\" className={styles.arrow} />\n            <Avatar\n              peer={FRAGMENT_PEER}\n              size=\"giant\"\n              className={styles.avatar}\n            />\n          </div>\n          <p className={styles.description}>\n            {lang('GiftWithdrawDescription', {\n              gift: `${gift.title} #${gift.number}`,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n              renderTextFilters: ['br'],\n            })}\n          </p>\n        </>\n      )}\n      {Boolean(exportDelay) && (\n        <p className={styles.exportHint}>\n          {lang('GiftWithdrawWait', { days: getDays(exportDelay) }, { pluralValue: getDays(exportDelay) })}\n        </p>\n      )}\n      {!hasPassword && <span className={styles.noPassword}>{lang('ErrorPasswordMissing')}</span>}\n      {hasPassword && !exportDelay && (\n        <PasswordForm\n          shouldShowSubmit\n          placeholder={lang('CheckPasswordPlaceholder')}\n          error={renderingModal?.errorKey && lang.withRegular(renderingModal?.errorKey)}\n          description={lang('CheckPasswordDescription')}\n          clearError={clearGiftWithdrawError}\n          isLoading={renderingModal?.isLoading}\n          hint={passwordHint}\n          isPasswordVisible={shouldShowPassword}\n          shouldResetValue={isOpen}\n          onChangePasswordVisibility={setShouldShowPassword}\n          submitLabel={lang('GiftWithdrawSubmit')}\n          onSubmit={handleSubmit}\n        />\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      settings: {\n        byKey: {\n          hasPassword,\n        },\n      },\n      twoFaSettings: {\n        hint: passwordHint,\n      },\n    } = global;\n\n    return {\n      hasPassword,\n      passwordHint,\n    };\n  },\n)(GiftWithdrawModal));\n","import type { FC, TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { TME_LINK_PREFIX } from '../../../../config';\nimport { getHasAdminRight, getPeerTitle } from '../../../../global/helpers';\nimport { isApiPeerChat } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\nimport { CUSTOM_PEER_HIDDEN } from '../../../../util/objects/customPeer';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { formatInteger, formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport BadgeButton from '../../../common/BadgeButton';\nimport Icon from '../../../common/icons/Icon';\nimport Button from '../../../ui/Button';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport Link from '../../../ui/Link';\nimport MenuItem from '../../../ui/MenuItem';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoModal'];\n};\n\ntype StateProps = {\n  fromPeer?: ApiPeer;\n  targetPeer?: ApiPeer;\n  currentUserId?: string;\n  starGiftMaxConvertPeriod?: number;\n  hasAdminRights?: boolean;\n};\n\nconst STICKER_SIZE = 120;\n\nconst GiftInfoModal = ({\n  modal,\n  fromPeer,\n  targetPeer,\n  currentUserId,\n  starGiftMaxConvertPeriod,\n  hasAdminRights,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftInfoModal,\n    changeGiftVisibility,\n    convertGiftToStars,\n    openChatWithInfo,\n    focusMessage,\n    openGiftUpgradeModal,\n    showNotification,\n    openChatWithDraft,\n    openGiftWithdrawModal,\n  } = getActions();\n\n  const [isConvertConfirmOpen, openConvertConfirm, closeConvertConfirm] = useFlag();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingFromPeer = useCurrentOrPrev(fromPeer);\n  const renderingTargetPeer = useCurrentOrPrev(targetPeer);\n\n  const isTargetChat = renderingTargetPeer && isApiPeerChat(renderingTargetPeer);\n\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const isSender = savedGift?.fromId === currentUserId;\n  const canConvertDifference = (savedGift && starGiftMaxConvertPeriod && (\n    savedGift.date + starGiftMaxConvertPeriod - getServerTime()\n  )) || 0;\n  const conversionLeft = Math.ceil(canConvertDifference / 60 / 60 / 24);\n\n  const gift = isSavedGift ? typeGift.gift : typeGift;\n  const giftSticker = gift && getStickerFromGift(gift);\n\n  const canFocusUpgrade = Boolean(savedGift?.upgradeMsgId);\n  const canUpdate = !canFocusUpgrade && savedGift?.inputGift && (\n    isTargetChat ? hasAdminRights : renderingTargetPeer?.id === currentUserId\n  );\n\n  const handleClose = useLastCallback(() => {\n    closeGiftInfoModal();\n  });\n\n  const starGiftUniqueLink = useMemo(() => {\n    const slug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n    if (!slug) return undefined;\n    return `${TME_LINK_PREFIX}nft/${slug}`;\n  }, [gift]);\n\n  const handleCopyLink = useLastCallback(() => {\n    if (!starGiftUniqueLink) return;\n    copyTextToClipboard(starGiftUniqueLink);\n    showNotification({\n      message: lang('LinkCopied'),\n    });\n  });\n\n  const handleLinkShare = useLastCallback(() => {\n    if (!starGiftUniqueLink) return;\n    openChatWithDraft({ text: { text: starGiftUniqueLink } });\n    handleClose();\n  });\n\n  const handleWithdraw = useLastCallback(() => {\n    if (savedGift?.gift.type !== 'starGiftUnique') return;\n    openGiftWithdrawModal({ gift: savedGift });\n  });\n\n  const handleFocusUpgraded = useLastCallback(() => {\n    if (!savedGift?.upgradeMsgId || !renderingTargetPeer) return;\n    const { upgradeMsgId } = savedGift;\n    focusMessage({ chatId: renderingTargetPeer.id, messageId: upgradeMsgId! });\n    handleClose();\n  });\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { inputGift, isUnsaved } = savedGift!;\n    changeGiftVisibility({ gift: inputGift!, shouldUnsave: !isUnsaved });\n    handleClose();\n  });\n\n  const handleConvertToStars = useLastCallback(() => {\n    const { inputGift } = savedGift!;\n    convertGiftToStars({ gift: inputGift! });\n    closeConvertConfirm();\n    handleClose();\n  });\n\n  const handleOpenUpgradeModal = useLastCallback(() => {\n    if (!savedGift) return;\n    openGiftUpgradeModal({ giftId: savedGift.gift.id, gift: savedGift });\n  });\n\n  const giftAttributes = useMemo(() => {\n    return gift && getGiftAttributes(gift);\n  }, [gift]);\n\n  const SettingsMenuButton: FC<{ onTrigger: () => void; isMenuOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isMenuOpen }) => (\n      <Button\n        round\n        size=\"smaller\"\n        color=\"translucent-white\"\n        className={isMenuOpen ? 'active' : ''}\n        onClick={onTrigger}\n        ariaLabel={lang('AriaMoreButton')}\n      >\n        <Icon name=\"more\" />\n      </Button>\n    );\n  }, [lang]);\n\n  const renderFooterButton = useLastCallback(() => {\n    if (canFocusUpgrade) {\n      return (\n        <Button size=\"smaller\" onClick={handleFocusUpgraded}>\n          {lang('GiftInfoViewUpgraded')}\n        </Button>\n      );\n    }\n\n    if (canUpdate && savedGift?.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n      return (\n        <Button size=\"smaller\" isShiny onClick={handleOpenUpgradeModal}>\n          {lang('GiftInfoUpgradeForFree')}\n        </Button>\n      );\n    }\n\n    return (\n      <Button size=\"smaller\" onClick={handleClose}>\n        {lang('OK')}\n      </Button>\n    );\n  });\n\n  const modalData = useMemo(() => {\n    if (!typeGift || !gift) {\n      return undefined;\n    }\n\n    const {\n      fromId, isNameHidden, starsToConvert, isUnsaved, isConverted,\n    } = savedGift || {};\n\n    const isVisibleForMe = isNameHidden && renderingTargetPeer;\n\n    const description = (() => {\n      if (!savedGift) return lang('GiftInfoSoldOutDescription');\n      if (isTargetChat) return undefined;\n\n      if (savedGift.upgradeMsgId) return lang('GiftInfoDescriptionUpgraded');\n      if (savedGift.canUpgrade && savedGift.alreadyPaidUpgradeStars) {\n        return canUpdate\n          ? lang('GiftInfoDescriptionFreeUpgrade')\n          : lang('GiftInfoPeerDescriptionFreeUpgradeOut', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n      }\n      if (!canUpdate && !isSender) return undefined;\n      if (isConverted && starsToConvert) {\n        return canUpdate\n          ? lang('GiftInfoDescriptionConverted', {\n            amount: formatInteger(starsToConvert!),\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftInfoPeerDescriptionOutConverted', {\n            amount: formatInteger(starsToConvert!),\n            peer: getPeerTitle(lang, renderingTargetPeer!)!,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n      }\n\n      if (savedGift.canUpgrade && canUpdate) {\n        return lang('GiftInfoDescriptionUpgrade', {\n          amount: formatInteger(starsToConvert!),\n        }, {\n          pluralValue: starsToConvert!,\n          withNodes: true,\n          withMarkdown: true,\n        });\n      }\n\n      return canUpdate\n        ? lang('GiftInfoDescription', {\n          amount: starsToConvert,\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n          pluralValue: starsToConvert || 0,\n        })\n        : lang('GiftInfoPeerDescriptionOut', {\n          amount: starsToConvert,\n          peer: getPeerTitle(lang, renderingTargetPeer!)!,\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n          pluralValue: starsToConvert || 0,\n        });\n    })();\n\n    function getTitle() {\n      if (gift?.type === 'starGiftUnique') return gift.title;\n      if (!savedGift) return lang('GiftInfoSoldOutTitle');\n\n      return canUpdate ? lang('GiftInfoReceived') : lang('GiftInfoTitle');\n    }\n\n    const isUniqueGift = gift.type === 'starGiftUnique';\n\n    const contextMenu = (\n      <DropdownMenu\n        className=\"with-menu-transitions\"\n        trigger={SettingsMenuButton}\n        positionX=\"right\"\n      >\n        <MenuItem\n          icon=\"link-badge\"\n          onClick={handleCopyLink}\n        >\n          {lang('CopyLink')}\n        </MenuItem>\n        <MenuItem\n          icon=\"forward\"\n          onClick={handleLinkShare}\n        >\n          {lang('Share')}\n        </MenuItem>\n        {canUpdate && isUniqueGift && (\n          <MenuItem icon=\"diamond\" onClick={handleWithdraw}>\n            {lang('GiftInfoWithdraw')}\n          </MenuItem>\n        )}\n      </DropdownMenu>\n    );\n\n    const uniqueGiftModalHeader = (\n      <div\n        className={styles.modalHeader}\n      >\n        <Button\n          className={styles.modalCloseButton}\n          round\n          color=\"translucent-white\"\n          size=\"smaller\"\n          ariaLabel={lang('Close')}\n          onClick={handleClose}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        {isOpen && contextMenu}\n      </div>\n    );\n\n    const uniqueGiftHeader = isUniqueGift && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={lang('GiftInfoCollectible', { number: gift.number })}\n        />\n      </div>\n    );\n\n    const regularHeader = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={STICKER_SIZE}\n        />\n        <h1 className={styles.title}>\n          {getTitle()}\n        </h1>\n        {description && (\n          <p className={buildClassName(styles.description, !savedGift && gift?.type === 'starGift' && styles.soldOut)}>\n            {description}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n    if (gift.type === 'starGift') {\n      if ((fromId || isNameHidden)) {\n        tableData.push([\n          lang('GiftInfoFrom'),\n          fromId ? { chatId: fromId } : (\n            <>\n              <Avatar size=\"small\" peer={CUSTOM_PEER_HIDDEN} />\n              <span className={styles.unknown}>{oldLang(CUSTOM_PEER_HIDDEN.titleKey!)}</span>\n            </>\n          ),\n        ]);\n      }\n\n      if (savedGift?.date) {\n        tableData.push([\n          lang('GiftInfoDate'),\n          formatDateTimeToString(savedGift.date * 1000, lang.code, true),\n        ]);\n      }\n\n      if (gift.firstSaleDate) {\n        tableData.push([\n          lang('GiftInfoFirstSale'),\n          formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      if (gift.lastSaleDate) {\n        tableData.push([\n          lang('GiftInfoLastSale'),\n          formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      const starsValue = gift.stars + (savedGift?.alreadyPaidUpgradeStars || 0);\n\n      tableData.push([\n        lang('GiftInfoValue'),\n        <div className={styles.giftValue}>\n          {formatStarsAsIcon(lang, starsValue, { className: styles.starAmountIcon })}\n          {canUpdate && canConvertDifference > 0 && Boolean(starsToConvert) && (\n            <BadgeButton onClick={openConvertConfirm}>\n              {lang('GiftInfoConvert', { amount: starsToConvert }, { pluralValue: starsToConvert })}\n            </BadgeButton>\n          )}\n        </div>,\n      ]);\n\n      if (gift.availabilityTotal) {\n        tableData.push([\n          lang('GiftInfoAvailability'),\n          lang('GiftInfoAvailabilityValue', {\n            count: gift.availabilityRemains || 0,\n            total: gift.availabilityTotal,\n          }, {\n            pluralValue: gift.availabilityRemains || 0,\n          }),\n        ]);\n      }\n\n      if (gift.upgradeStars && !savedGift?.upgradeMsgId) {\n        tableData.push([\n          lang('GiftInfoStatus'),\n          <div className={styles.giftValue}>\n            {lang('GiftInfoStatusNonUnique')}\n            {canUpdate && <BadgeButton onClick={handleOpenUpgradeModal}>{lang('GiftInfoUpgradeBadge')}</BadgeButton>}\n          </div>,\n        ]);\n      }\n\n      if (savedGift?.message) {\n        tableData.push([\n          undefined,\n          renderTextWithEntities(savedGift.message),\n        ]);\n      }\n    }\n\n    if (gift.type === 'starGiftUnique') {\n      const { ownerName, ownerAddress, ownerId } = gift;\n      const {\n        model, backdrop, pattern, originalDetails,\n      } = giftAttributes || {};\n\n      if (ownerAddress) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          <span\n            className={styles.ownerAddress}\n            onClick={() => {\n              copyTextToClipboard(ownerAddress);\n              showNotification({\n                message: { key: 'WalletAddressCopied' },\n                icon: 'copy',\n              });\n            }}\n          >\n            {ownerAddress}\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </span>,\n        ]);\n      } else {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          ownerId ? { chatId: ownerId } : ownerName || '',\n        ]);\n      }\n\n      if (model) {\n        tableData.push([\n          lang('GiftAttributeModel'),\n          <span className={styles.uniqueAttribute}>\n            {model.name}<BadgeButton>{formatPercent(model.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (backdrop) {\n        tableData.push([\n          lang('GiftAttributeBackdrop'),\n          <span className={styles.uniqueAttribute}>\n            {backdrop.name}<BadgeButton>{formatPercent(backdrop.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (pattern) {\n        tableData.push([\n          lang('GiftAttributeSymbol'),\n          <span className={styles.uniqueAttribute}>\n            {pattern.name}<BadgeButton>{formatPercent(pattern.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoIssued', {\n          issued: gift.issuedCount,\n          total: gift.totalCount,\n        }),\n      ]);\n\n      if (originalDetails) {\n        const {\n          date, recipientId, message, senderId,\n        } = originalDetails;\n        const global = getGlobal(); // Peer titles do not need to be reactive\n\n        const openChat = (id: string) => {\n          openChatWithInfo({ id });\n          closeGiftInfoModal();\n        };\n\n        const recipient = selectPeer(global, recipientId)!;\n        const sender = senderId ? selectPeer(global, senderId) : undefined;\n\n        const formattedDate = formatDateTimeToString(date * 1000, lang.code, true);\n        const recipientLink = (\n          // eslint-disable-next-line react/jsx-no-bind\n          <Link onClick={() => openChat(recipientId)} isPrimary>\n            {getPeerTitle(lang, recipient)}\n          </Link>\n        );\n\n        let text: TeactNode | undefined;\n        if (!sender || senderId === recipientId) {\n          text = message ? lang('GiftInfoPeerOriginalInfoText', {\n            peer: recipientLink,\n            text: renderTextWithEntities(message),\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          }) : lang('GiftInfoPeerOriginalInfo', {\n            peer: recipientLink,\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          });\n        } else {\n          const senderLink = (\n            // eslint-disable-next-line react/jsx-no-bind\n            <Link onClick={() => openChat(sender.id)} isPrimary>\n              {getPeerTitle(lang, sender)}\n            </Link>\n          );\n          text = message ? lang('GiftInfoPeerOriginalInfoTextSender', {\n            peer: recipientLink,\n            sender: senderLink,\n            text: renderTextWithEntities(message),\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          }) : lang('GiftInfoPeerOriginalInfoSender', {\n            peer: recipientLink,\n            date: formattedDate,\n            sender: senderLink,\n          }, {\n            withNodes: true,\n          });\n        }\n\n        tableData.push([\n          undefined,\n          <span>{text}</span>,\n        ]);\n      }\n    }\n\n    const footer = (\n      <div className={styles.footer}>\n        {canUpdate && (\n          <div className={styles.footerDescription}>\n            <div>\n              {lang(`GiftInfo${isTargetChat ? 'Channel' : ''}${isUnsaved ? 'Hidden' : 'Saved'}`, {\n                link: (\n                  <Link isPrimary onClick={handleTriggerVisibility}>\n                    {lang(`GiftInfoSaved${isUnsaved ? 'Show' : 'Hide'}`)}\n                  </Link>\n                ),\n              }, {\n                withNodes: true,\n              })}\n            </div>\n            {isVisibleForMe && (\n              <div>\n                {lang('GiftInfoSenderHidden')}\n              </div>\n            )}\n          </div>\n        )}\n        {renderFooterButton()}\n      </div>\n    );\n\n    return {\n      modalHeader: isUniqueGift ? uniqueGiftModalHeader : undefined,\n      header: isUniqueGift ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [\n    typeGift, savedGift, renderingTargetPeer, giftSticker, lang, canUpdate, canConvertDifference, isSender, oldLang,\n    gift, giftAttributes, renderFooterButton, isTargetChat, SettingsMenuButton, isOpen,\n  ]);\n\n  return (\n    <>\n      <TableInfoModal\n        isOpen={isOpen}\n        modalHeader={modalData?.modalHeader}\n        header={modalData?.header}\n        hasBackdrop={gift?.type === 'starGiftUnique'}\n        tableData={modalData?.tableData}\n        footer={modalData?.footer}\n        className={styles.modal}\n        onClose={handleClose}\n      />\n      {savedGift && (\n        <ConfirmDialog\n          isOpen={isConvertConfirmOpen}\n          onClose={closeConvertConfirm}\n          confirmHandler={handleConvertToStars}\n          title={lang('GiftInfoConvertTitle')}\n        >\n          <div>\n            {lang('GiftInfoPeerConvertDescription', {\n              amount: formatStarsAsText(lang, savedGift.starsToConvert!),\n              peer: getPeerTitle(lang, renderingFromPeer!)!,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n          {canConvertDifference > 0 && (\n            <div>\n              {lang('GiftInfoConvertDescriptionPeriod', {\n                count: conversionLeft,\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n                pluralValue: conversionLeft,\n              })}\n            </div>\n          )}\n          <div>{lang('GiftInfoConvertDescription2')}</div>\n        </ConfirmDialog>\n      )}\n    </>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const typeGift = modal?.gift;\n    const isSavedGift = typeGift && 'gift' in typeGift;\n\n    const fromId = isSavedGift && typeGift.fromId;\n    const fromPeer = fromId ? selectPeer(global, fromId) : undefined;\n    const targetPeer = modal?.peerId ? selectPeer(global, modal.peerId) : undefined;\n    const chat = targetPeer && isApiPeerChat(targetPeer) ? targetPeer : undefined;\n    const hasAdminRights = chat && getHasAdminRight(chat, 'postMessages');\n\n    return {\n      fromPeer,\n      targetPeer,\n      currentUserId: global.currentUserId,\n      starGiftMaxConvertPeriod: global.appConfig?.starGiftMaxConvertPeriod,\n      hasAdminRights,\n    };\n  },\n)(GiftInfoModal));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport {\n  filterUsersByName, isUserBot,\n} from '../../../../global/helpers';\nimport { unique } from '../../../../util/iteratees';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nimport styles from './GiftRecipientPicker.module.scss';\n\nexport type OwnProps = {\n  modal?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userSelectionLimit?: number;\n  userIds?: string[];\n}\n\nconst GiftRecipientPicker: FC<OwnProps & StateProps> = ({\n  modal,\n  currentUserId,\n  userIds,\n}) => {\n  const { closeGiftRecipientPicker, openGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n  const isOpen = modal;\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const idsWithSelf = userIds ? userIds.concat(currentUserId!) : undefined;\n    const filteredContactIds = idsWithSelf ? filterUsersByName(idsWithSelf, usersById, searchQuery) : [];\n\n    return sortChatIds(unique(filteredContactIds).filter((userId) => {\n      const user = usersById[userId];\n      if (!user) {\n        return true;\n      }\n\n      return !isUserBot(user);\n    }), undefined, [currentUserId!]);\n  }, [currentUserId, searchQuery, userIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((selectedId: string) => {\n    openGiftModal({ forUserId: selectedId });\n    closeGiftRecipientPicker();\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeGiftRecipientPicker}\n      title={oldLang('GiftTelegramPremiumOrStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onSelectedIdChange={handleSelectedUserIdsChange}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        forceShowSelf\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { currentUserId } = global;\n\n  return {\n    currentUserId,\n    userIds: global.contactList?.userIds,\n    userSelectionLimit: global.appConfig?.giveawayAddPeersMax,\n  };\n})(GiftRecipientPicker));\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarGiftAttribute,\n  ApiStarGiftAttributeBackdrop,\n  ApiStarGiftAttributeModel,\n  ApiStarGiftAttributePattern,\n  ApiStarGiftRegular,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { ApiMediaFormat } from '../../../../api/types';\n\nimport { getPeerTitle, getStickerMediaHash } from '../../../../global/helpers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { fetch } from '../../../../util/mediaLoader';\n\nimport useInterval from '../../../../hooks/schedulers/useInterval';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftUpgradeModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftUpgradeModal'];\n};\n\ntype StateProps = {\n  recipient?: ApiPeer;\n};\n\ntype Attributes = {\n  model: ApiStarGiftAttributeModel;\n  pattern: ApiStarGiftAttributePattern;\n  backdrop: ApiStarGiftAttributeBackdrop;\n};\n\nconst PREVIEW_UPDATE_INTERVAL = 3000;\n\nconst GiftUpgradeModal = ({ modal, recipient }: OwnProps & StateProps) => {\n  const { closeGiftUpgradeModal, upgradeGift } = getActions();\n  const isOpen = Boolean(modal);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingRecipient = useCurrentOrPrev(recipient);\n  const [shouldKeepOriginalDetails, setShouldKeepOriginalDetails] = useState(false);\n\n  const [previewAttributes, setPreviewAttributes] = useState<Attributes | undefined>();\n\n  const lang = useLang();\n\n  const handleClose = useLastCallback(() => closeGiftUpgradeModal());\n\n  const handleUpgrade = useLastCallback(() => {\n    const gift = renderingModal?.gift;\n    if (!gift?.inputGift) return;\n\n    upgradeGift({\n      gift: gift.inputGift,\n      shouldKeepOriginalDetails,\n      upgradeStars: !gift.alreadyPaidUpgradeStars ? (gift.gift as ApiStarGiftRegular).upgradeStars : undefined,\n    });\n    handleClose();\n  });\n\n  const updatePreviewAttributes = useLastCallback(() => {\n    if (!renderingModal?.sampleAttributes) return;\n    setPreviewAttributes(getRandomAttributes(renderingModal.sampleAttributes, previewAttributes));\n  });\n\n  useInterval(updatePreviewAttributes, isOpen ? PREVIEW_UPDATE_INTERVAL : undefined, true);\n\n  useEffect(() => {\n    if (isOpen && renderingModal?.sampleAttributes) {\n      updatePreviewAttributes();\n    }\n  }, [isOpen, renderingModal?.sampleAttributes]);\n\n  // Preload stickers and patterns\n  useEffect(() => {\n    const attributes = renderingModal?.sampleAttributes;\n    if (!attributes) return;\n    const patternStickers = attributes.filter((attr): attr is ApiStarGiftAttributeModel => attr.type === 'pattern')\n      .map((attr) => attr.sticker);\n    const modelStickers = attributes.filter((attr): attr is ApiStarGiftAttributeModel => attr.type === 'model')\n      .map((attr) => attr.sticker);\n\n    const mediaHashes = [...patternStickers, ...modelStickers].map((sticker) => getStickerMediaHash(sticker, 'full'));\n    mediaHashes.forEach((hash) => {\n      fetch(hash, ApiMediaFormat.BlobUrl);\n    });\n  }, [renderingModal?.sampleAttributes]);\n\n  const modalData = useMemo(() => {\n    if (!previewAttributes) {\n      return undefined;\n    }\n\n    const gift = renderingModal?.gift;\n\n    const listItemData = [\n      ['diamond', lang('GiftUpgradeUniqueTitle'), lang('GiftUpgradeUniqueDescription')],\n      ['trade', lang('GiftUpgradeTransferableTitle'), lang('GiftUpgradeTransferableDescription')],\n      ['auction', lang('GiftUpgradeTradeableTitle'), lang('GiftUpgradeTradeableDescription')],\n    ] satisfies TableAboutData;\n\n    const subtitle = renderingRecipient\n      ? lang('GiftPeerUpgradeText', { peer: getPeerTitle(lang, renderingRecipient) })\n      : lang('GiftUpgradeTextOwn');\n\n    const header = (\n      <UniqueGiftHeader\n        modelAttribute={previewAttributes.model}\n        backdropAttribute={previewAttributes.backdrop}\n        patternAttribute={previewAttributes.pattern}\n        title={lang('GiftUpgradeTitle')}\n        subtitle={subtitle}\n      />\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {!gift && (\n          <Button className={styles.footerButton} size=\"smaller\" onClick={handleClose}>\n            {lang('OK')}\n          </Button>\n        )}\n        {gift && (\n          <>\n            <Checkbox\n              label={lang('GiftUpgradeKeepDetails')}\n              onCheck={setShouldKeepOriginalDetails}\n              checked={shouldKeepOriginalDetails}\n            />\n            <Button className={styles.footerButton} size=\"smaller\" isShiny onClick={handleUpgrade}>\n              {gift.alreadyPaidUpgradeStars\n                ? lang('GeneralConfirm')\n                : lang('GiftUpgradeButton', {\n                  amount: formatStarsAsIcon(lang, (gift.gift as ApiStarGiftRegular).upgradeStars!, { asFont: true }),\n                }, { withNodes: true })}\n            </Button>\n          </>\n        )}\n      </div>\n    );\n\n    return {\n      listItemData,\n      header,\n      footer,\n    };\n  }, [previewAttributes, lang, renderingRecipient, renderingModal?.gift, shouldKeepOriginalDetails]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={modalData?.header}\n      footer={modalData?.footer}\n      listItemData={modalData?.listItemData}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const recipientId = modal?.recipientId;\n    const recipient = recipientId ? selectPeer(global, recipientId) : undefined;\n\n    return {\n      recipient,\n    };\n  },\n)(GiftUpgradeModal));\n\nfunction getRandomAttributes(list: ApiStarGiftAttribute[], previousSelection?: Attributes): Attributes {\n  const models = list.filter((attr): attr is ApiStarGiftAttributeModel => (\n    attr.type === 'model' && attr.name !== previousSelection?.model.name\n  ));\n  const patterns = list.filter((attr): attr is ApiStarGiftAttributePattern => (\n    attr.type === 'pattern' && attr.name !== previousSelection?.pattern.name\n  ));\n  const backdrops = list.filter((attr): attr is ApiStarGiftAttributeBackdrop => (\n    attr.type === 'backdrop' && attr.name !== previousSelection?.backdrop.name\n  ));\n\n  const randomModel = models[Math.floor(Math.random() * models.length)];\n  const randomPattern = patterns[Math.floor(Math.random() * patterns.length)];\n  const randomBackdrop = backdrops[Math.floor(Math.random() * backdrops.length)];\n\n  return {\n    model: randomModel,\n    pattern: randomPattern,\n    backdrop: randomBackdrop,\n  };\n}\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMessage, ApiStarsAmount, ApiUser,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { CustomPeer } from '../../../types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../config';\nimport { getChatTitle, getUserFullName } from '../../../global/helpers';\nimport { selectChat, selectChatMessage, selectUser } from '../../../global/selectors';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport PeerBadge from '../../common/PeerBadge';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport Modal from '../../ui/Modal';\nimport Separator from '../../ui/Separator';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport StarSlider from './StarSlider';\n\nimport styles from './PaidReactionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['paidReactionModal'];\n};\n\ntype StateProps = {\n  message?: ApiMessage;\n  chat?: ApiChat;\n  maxAmount: number;\n  starBalance?: ApiStarsAmount;\n  defaultPrivacy?: boolean;\n};\n\ntype ReactorData = {\n  amount: number;\n  localAmount: number;\n  isMe?: boolean;\n  isAnonymous?: boolean;\n  user?: ApiUser;\n};\n\nconst MAX_TOP_REACTORS = 3;\nconst DEFAULT_STARS_AMOUNT = 50;\nconst MAX_REACTION_AMOUNT = 2500;\nconst ANONYMOUS_PEER: CustomPeer = {\n  avatarIcon: 'author-hidden',\n  customPeerAvatarColor: '#9eaab5',\n  isCustomPeer: true,\n  titleKey: 'StarsReactionAnonymous',\n};\n\nconst PaidReactionModal = ({\n  modal,\n  chat,\n  message,\n  maxAmount,\n  starBalance,\n  defaultPrivacy,\n}: OwnProps & StateProps) => {\n  const { closePaidReactionModal, addLocalPaidReaction } = getActions();\n\n  const [starsAmount, setStarsAmount] = useState(DEFAULT_STARS_AMOUNT);\n  const [isTouched, markTouched, unmarkTouched] = useFlag();\n  const [shouldShowUp, setShouldShowUp] = useState(true);\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const handleAnonimityChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setShouldShowUp(e.target.checked);\n  });\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setStarsAmount(value);\n    markTouched();\n  });\n\n  useEffect(() => {\n    if (!modal) {\n      unmarkTouched();\n    }\n  }, [modal]);\n\n  useEffect(() => {\n    const currentReactor = message?.reactions?.topReactors?.find((reactor) => reactor.isMe);\n    if (currentReactor) {\n      setShouldShowUp(!currentReactor.isAnonymous);\n      return;\n    }\n\n    setShouldShowUp(defaultPrivacy || true);\n  }, [defaultPrivacy, message?.reactions?.topReactors]);\n\n  const handleSend = useLastCallback(() => {\n    if (!modal) return;\n\n    addLocalPaidReaction({\n      chatId: modal.chatId,\n      messageId: modal.messageId,\n      count: starsAmount,\n      isPrivate: !shouldShowUp,\n    });\n    closePaidReactionModal();\n  });\n\n  const topReactors = useMemo(() => {\n    const global = getGlobal();\n    const all = message?.reactions?.topReactors;\n    if (!all) {\n      return undefined;\n    }\n\n    const result: ReactorData[] = [];\n    let hasMe = false;\n\n    all.forEach((reactor) => {\n      const user = reactor.peerId ? selectUser(global, reactor.peerId) : undefined;\n      if (!user && !reactor.isAnonymous && !reactor.isMe) return;\n\n      if (reactor.isMe) {\n        hasMe = true;\n      }\n\n      result.push({\n        amount: reactor.count,\n        localAmount: reactor.isMe && isTouched ? starsAmount : 0,\n        isMe: reactor.isMe,\n        isAnonymous: reactor.isAnonymous,\n        user,\n      });\n    });\n\n    if (!hasMe && isTouched) {\n      const me = selectUser(global, global.currentUserId!);\n      result.push({\n        amount: 0,\n        localAmount: starsAmount,\n        isMe: true,\n        user: me,\n      });\n    }\n\n    result.sort((a, b) => (b.amount + b.localAmount) - (a.amount + a.localAmount));\n\n    return result.slice(0, MAX_TOP_REACTORS);\n  }, [isTouched, message?.reactions?.topReactors, starsAmount]);\n\n  const chatTitle = chat && getChatTitle(oldLang, chat);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      onClose={closePaidReactionModal}\n      isSlim\n      hasAbsoluteCloseButton\n      contentClassName={styles.content}\n    >\n      <BalanceBlock balance={starBalance} className={styles.modalBalance} />\n      <StarSlider\n        className={styles.slider}\n        defaultValue={DEFAULT_STARS_AMOUNT}\n        maxValue={maxAmount}\n        onChange={handleAmountChange}\n      />\n      <h3 className={styles.title}>{oldLang('StarsReactionTitle')}</h3>\n      <div className={styles.description}>\n        {renderText(oldLang('StarsReactionText', chatTitle), ['simple_markdown', 'emoji'])}\n      </div>\n      <Separator>\n        {topReactors && <div className={styles.topLabel}>{oldLang('StarsReactionTopSenders')}</div>}\n      </Separator>\n      {topReactors && (\n        <div className={styles.top}>\n          {topReactors.map((reactor) => {\n            const countText = formatInteger(reactor.amount + reactor.localAmount);\n            const peer = (reactor.isAnonymous || !reactor.user || (reactor.isMe && !shouldShowUp))\n              ? ANONYMOUS_PEER : reactor.user;\n            const text = 'isCustomPeer' in peer ? oldLang(peer.titleKey) : getUserFullName(peer);\n            return (\n              <PeerBadge\n                className={styles.topPeer}\n                key={`${reactor.user?.id || 'anonymous'}-${countText}`}\n                peer={peer}\n                badgeText={countText}\n                badgeIcon=\"star\"\n                badgeClassName={styles.topBadge}\n                text={text}\n              />\n            );\n          })}\n        </div>\n      )}\n      <Checkbox\n        className={styles.checkbox}\n        checked={shouldShowUp}\n        onChange={handleAnonimityChange}\n        label={oldLang('StarsReactionShowMeInTopSenders')}\n      />\n      <Button\n        size=\"smaller\"\n        onClick={handleSend}\n      >\n        {lang('SendPaidReaction', { amount: starsAmount }, {\n          withNodes: true,\n          specialReplacement: {\n            [STARS_ICON_PLACEHOLDER]: <Icon className={styles.buttonStar} name=\"star\" />,\n          },\n        })}\n      </Button>\n      <p className={styles.disclaimer}>\n        {lang('StarsReactionTerms', {\n          link: <SafeLink text={lang('StarsReactionLinkText')} url={lang('StarsReactionLink')} />,\n        }, {\n          withNodes: true,\n        })}\n      </p>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const chat = modal && selectChat(global, modal.chatId);\n    const message = modal && selectChatMessage(global, modal.chatId, modal.messageId);\n    const starBalance = global.stars?.balance;\n    const maxAmount = global.appConfig?.paidReactionMaxAmount || MAX_REACTION_AMOUNT;\n    const defaultPrivacy = global.settings.paidReactionPrivacy;\n\n    return {\n      chat,\n      message,\n      starBalance,\n      maxAmount,\n      defaultPrivacy,\n    };\n  },\n)(PaidReactionModal));\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\n\nimport { requestMeasure, requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\n\nimport useEffectOnce from '../../../hooks/useEffectOnce';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useResizeObserver from '../../../hooks/useResizeObserver';\n\nimport AnimatedCounter from '../../common/AnimatedCounter';\nimport Icon from '../../common/icons/Icon';\nimport Sparkles from '../../common/Sparkles';\n\nimport styles from './StarSlider.module.scss';\n\ntype OwnProps = {\n  maxValue: number;\n  defaultValue: number;\n  className?: string;\n  onChange: (value: number) => void;\n};\n\nconst DEFAULT_POINTS = [50, 100, 500, 1000, 2000, 5000, 10000];\n\nconst StarSlider = ({\n  maxValue,\n  defaultValue,\n  className,\n  onChange,\n}: OwnProps) => {\n  // eslint-disable-next-line no-null/no-null\n  const floatingBadgeRef = useRef<HTMLDivElement>(null);\n\n  const points = useMemo(() => {\n    const result = [];\n    for (let i = 0; i < DEFAULT_POINTS.length; i++) {\n      if (DEFAULT_POINTS[i] < maxValue) {\n        result.push(DEFAULT_POINTS[i]);\n      }\n\n      if (DEFAULT_POINTS[i] >= maxValue) {\n        result.push(maxValue);\n        break;\n      }\n    }\n\n    return result;\n  }, [maxValue]);\n\n  const [value, setValue] = useState(0);\n\n  useEffectOnce(() => {\n    setValue(getProgress(points, defaultValue));\n  });\n\n  const updateSafeBadgePosition = useLastCallback(() => {\n    const badge = floatingBadgeRef.current;\n    if (!badge) return;\n    const parent = badge.parentElement!;\n\n    requestMeasure(() => {\n      const safeMinX = parent.offsetLeft + badge.offsetWidth / 2;\n      const safeMaxX = parent.offsetLeft + parent.offsetWidth - badge.offsetWidth / 2;\n\n      requestMutation(() => {\n        parent.style.setProperty('--_min-x', `${safeMinX}px`);\n        parent.style.setProperty('--_max-x', `${safeMaxX}px`);\n      });\n    });\n  });\n\n  useResizeObserver(floatingBadgeRef, updateSafeBadgePosition);\n\n  const handleChange = useLastCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = Number(event.currentTarget.value);\n    setValue(newValue);\n\n    onChange(getValue(points, newValue));\n  });\n\n  return (\n    <div className={buildClassName(styles.root, className)} style={`--progress: ${value / points.length}`}>\n      <div className={styles.floatingBadgeWrapper}>\n        <div className={styles.floatingBadge} ref={floatingBadgeRef}>\n          <div className={styles.floatingBadgeText}>\n            <Icon name=\"star\" className={styles.floatingBadgeIcon} />\n            <AnimatedCounter text={formatInteger(getValue(points, value))} />\n          </div>\n          <svg className={styles.floatingBadgeTriangle} width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" fill=\"none\">\n            <defs>\n              <linearGradient id=\"StarBadgeTriangle\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\n                <stop offset=\"-50%\" stop-color=\"#FFAA00\" />\n                <stop offset=\"150%\" stop-color=\"#FFCD3A\" />\n              </linearGradient>\n            </defs>\n            <path d=\"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z\" fill=\"url(#StarBadgeTriangle)\" />\n          </svg>\n        </div>\n      </div>\n      <div className={styles.progress} />\n      <Sparkles preset=\"progress\" className={styles.sparkles} />\n      <input\n        className={styles.slider}\n        type=\"range\"\n        min={0}\n        max={points.length}\n        defaultValue={getProgress(points, defaultValue)}\n        step=\"any\"\n        onChange={handleChange}\n      />\n    </div>\n  );\n};\n\nfunction getProgress(points: number[], value: number) {\n  const pointIndex = points.findIndex((point) => value <= point);\n  const prevPoint = points[pointIndex - 1] || 1;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const progress = (value - prevPoint) / (nextPoint - prevPoint);\n  return pointIndex + progress;\n}\n\nfunction getValue(points: number[], progress: number) {\n  const pointIndex = Math.floor(progress);\n  const prevPoint = points[pointIndex - 1] || 1;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const value = prevPoint + (nextPoint - prevPoint) * (progress - pointIndex);\n  return Math.round(value);\n}\n\nexport default memo(StarSlider);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport type { ApiStarsAmount } from '../../../api/types';\n\nimport { formatStarsAmount } from '../../../global/helpers/payments';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarsBalanceModal.module.scss';\n\ntype OwnProps = {\n  balance?: ApiStarsAmount;\n  className?: string;\n};\n\nconst BalanceBlock = ({ balance, className }: OwnProps) => {\n  const lang = useLang();\n\n  return (\n    <div className={buildClassName(styles.balance, className)}>\n      <span className={styles.smallerText}>{lang('StarsBalance')}</span>\n      <div className={styles.balanceBottom}>\n        <StarIcon type=\"gold\" size=\"middle\" />\n        {balance !== undefined ? formatStarsAmount(lang, balance) : '…'}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(BalanceBlock);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiStarTopupOption } from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\nimport type { RegularLangKey } from '../../../types/language';\n\nimport { getChatTitle, getPeerTitle, getUserFullName } from '../../../global/helpers';\nimport { selectChat, selectIsPremiumPurchaseBlocked, selectUser } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport TabList, { type TabWithProperties } from '../../ui/TabList';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from './BalanceBlock';\nimport StarTopupOptionList from './StarTopupOptionList';\nimport StarsSubscriptionItem from './subscription/StarsSubscriptionItem';\nimport StarsTransactionItem from './transaction/StarsTransactionItem';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarLogo from '../../../assets/icons/StarLogo.svg';\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nconst TRANSACTION_TYPES = ['all', 'inbound', 'outbound'] as const;\nconst TRANSACTION_TABS_KEYS: RegularLangKey[] = [\n  'StarsTransactionsAll',\n  'StarsTransactionsIncoming',\n  'StarsTransactionsOutgoing',\n];\nconst TRANSACTION_ITEM_CLASS = 'StarsTransactionItem';\nconst SUBSCRIPTION_PURPOSE = 'subs';\n\nexport type OwnProps = {\n  modal: TabState['starsBalanceModal'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  canBuyPremium?: boolean;\n};\n\nconst StarsBalanceModal = ({\n  modal, starsBalanceState, canBuyPremium,\n}: OwnProps & StateProps) => {\n  const {\n    closeStarsBalanceModal, loadStarsTransactions, loadStarsSubscriptions, openStarsGiftingPickerModal, openInvoice,\n  } = getActions();\n\n  const { balance, history, subscriptions } = starsBalanceState || {};\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n  const [selectedTabIndex, setSelectedTabIndex] = useState(0);\n  const [areBuyOptionsShown, showBuyOptions, hideBuyOptions] = useFlag();\n\n  const isOpen = Boolean(modal && starsBalanceState);\n\n  const {\n    originStarsPayment, originReaction, originGift, topup,\n  } = modal || {};\n\n  const shouldOpenOnBuy = originStarsPayment || originReaction || originGift || topup;\n\n  const ongoingTransactionAmount = originStarsPayment?.form?.invoice?.totalAmount\n    || originStarsPayment?.subscriptionInfo?.subscriptionPricing?.amount\n    || originReaction?.amount\n    || originGift?.gift.stars\n    || topup?.balanceNeeded;\n  const starsNeeded = ongoingTransactionAmount ? ongoingTransactionAmount - (balance?.amount || 0) : undefined;\n  const starsNeededText = useMemo(() => {\n    const global = getGlobal();\n\n    if (originReaction) {\n      const channel = selectChat(global, originReaction.chatId);\n      if (!channel) return undefined;\n      return oldLang('StarsNeededTextReactions', getChatTitle(oldLang, channel));\n    }\n\n    if (originStarsPayment) {\n      const bot = originStarsPayment.form?.botId ? selectUser(global, originStarsPayment.form.botId) : undefined;\n      if (!bot) return undefined;\n      return oldLang('StarsNeededText', getUserFullName(bot));\n    }\n\n    if (originGift) {\n      const peer = selectUser(global, originGift.peerId);\n      if (!peer) return undefined;\n      return oldLang('StarsNeededTextGift', getPeerTitle(lang, peer));\n    }\n\n    if (topup?.purpose === SUBSCRIPTION_PURPOSE) {\n      return oldLang('StarsNeededTextLink');\n    }\n\n    return undefined;\n  }, [originReaction, originStarsPayment, originGift, topup?.purpose, lang, oldLang]);\n\n  const shouldShowItems = Boolean(history?.all?.transactions.length && !shouldOpenOnBuy);\n  const shouldSuggestGifting = !shouldOpenOnBuy;\n\n  const transactionTabs: TabWithProperties[] = useMemo(() => {\n    return TRANSACTION_TABS_KEYS.map((key) => ({\n      title: lang(key),\n    }));\n  }, [lang]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n      setSelectedTabIndex(0);\n      hideBuyOptions();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (shouldOpenOnBuy) {\n      showBuyOptions();\n      return;\n    }\n\n    hideBuyOptions();\n  }, [shouldOpenOnBuy]);\n\n  const tosText = useMemo(() => {\n    if (!isOpen) return undefined;\n\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />,\n      parts[1],\n    ];\n  }, [isOpen, oldLang]);\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleLoadMoreTransactions = useLastCallback(() => {\n    loadStarsTransactions({\n      type: TRANSACTION_TYPES[selectedTabIndex],\n    });\n  });\n\n  const handleLoadMoreSubscriptions = useLastCallback(() => {\n    loadStarsSubscriptions();\n  });\n\n  const openStarsGiftingPickerModalHandler = useLastCallback(() => {\n    openStarsGiftingPickerModal({});\n  });\n\n  const handleBuyStars = useLastCallback((option: ApiStarTopupOption) => {\n    openInvoice({\n      type: 'stars',\n      stars: option.stars,\n      currency: option.currency,\n      amount: option.amount,\n    });\n  });\n\n  return (\n    <Modal className={styles.root} isOpen={isOpen} onClose={closeStarsBalanceModal}>\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => closeStarsBalanceModal()}\n          ariaLabel={lang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <BalanceBlock balance={balance} className={styles.modalBalance} />\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {oldLang('TelegramStars')}\n          </h2>\n        </div>\n        <div className={styles.section}>\n          <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n          <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n          <h2 className={styles.headerText}>\n            {starsNeeded ? oldLang('StarsNeededTitle', ongoingTransactionAmount) : oldLang('TelegramStars')}\n          </h2>\n          <div className={styles.description}>\n            {renderText(\n              starsNeededText || oldLang('TelegramStarsInfo'),\n              ['simple_markdown', 'emoji'],\n            )}\n          </div>\n          {canBuyPremium && !areBuyOptionsShown && (\n            <Button\n              className={styles.starButton}\n              onClick={showBuyOptions}\n            >\n              {oldLang('Star.List.BuyMoreStars')}\n            </Button>\n          )}\n          {canBuyPremium && !areBuyOptionsShown && shouldSuggestGifting && (\n            <Button\n              className={buildClassName(styles.starButton, 'settings-main-menu-star')}\n              color=\"translucent\"\n              onClick={openStarsGiftingPickerModalHandler}\n            >\n              <StarIcon className=\"icon\" type=\"gold\" size=\"big\" />\n              {oldLang('TelegramStarsGift')}\n            </Button>\n          )}\n          {areBuyOptionsShown && starsBalanceState?.topupOptions && (\n            <StarTopupOptionList\n              starsNeeded={starsNeeded}\n              options={starsBalanceState.topupOptions}\n              onClick={handleBuyStars}\n            />\n          )}\n        </div>\n        {areBuyOptionsShown && (\n          <div className={styles.tos}>\n            {tosText}\n          </div>\n        )}\n        {shouldShowItems && Boolean(subscriptions?.list.length) && (\n          <div className={styles.section}>\n            <h3 className={styles.sectionTitle}>{oldLang('StarMySubscriptions')}</h3>\n            <div className={styles.subscriptions}>\n              {subscriptions?.list.map((subscription) => (\n                <StarsSubscriptionItem\n                  key={subscription.id}\n                  subscription={subscription}\n                />\n              ))}\n              {subscriptions?.nextOffset && (\n                <Button\n                  isText\n                  disabled={subscriptions.isLoading}\n                  size=\"smaller\"\n                  noForcedUpperCase\n                  className={styles.loadMore}\n                  onClick={handleLoadMoreSubscriptions}\n                >\n                  <Icon name=\"down\" className={styles.loadMoreIcon} />\n                  {oldLang('StarMySubscriptionsExpand')}\n                </Button>\n              )}\n            </div>\n          </div>\n        )}\n        {shouldShowItems && (\n          <div className={styles.container}>\n            <div className={styles.section}>\n              <Transition\n                name={lang.isRtl ? 'slideOptimizedRtl' : 'slideOptimized'}\n                activeKey={selectedTabIndex}\n                renderCount={TRANSACTION_TABS_KEYS.length}\n                shouldRestoreHeight\n                className={styles.transition}\n              >\n                <InfiniteScroll\n                  onLoadMore={handleLoadMoreTransactions}\n                  items={history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions}\n                  scrollContainerClosest={`.${styles.main}`}\n                  itemSelector={`.${TRANSACTION_ITEM_CLASS}`}\n                  className={styles.transactions}\n                  noFastList\n                >\n                  {history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions.map((transaction) => (\n                    <StarsTransactionItem\n                      key={`${transaction.id}-${transaction.isRefund}`}\n                      transaction={transaction}\n                      className={TRANSACTION_ITEM_CLASS}\n                    />\n                  ))}\n                </InfiniteScroll>\n              </Transition>\n            </div>\n            <TabList\n              className={styles.tabs}\n              tabClassName={styles.tab}\n              activeTab={selectedTabIndex}\n              tabs={transactionTabs}\n              onSwitchTab={setSelectedTabIndex}\n            />\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    return {\n      starsBalanceState: global.stars,\n      canBuyPremium: !selectIsPremiumPurchaseBlocked(global),\n    };\n  },\n)(StarsBalanceModal));\n","import React, { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMediaExtendedPreview, ApiMessage, ApiUser,\n} from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\n\nimport { getChatTitle, getCustomPeerFromInvite, getUserFullName } from '../../../global/helpers';\nimport {\n  selectChat, selectChatMessage, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport Avatar from '../../common/Avatar';\nimport StarIcon from '../../common/icons/StarIcon';\nimport PeerBadge from '../../common/PeerBadge';\nimport PeerChip from '../../common/PeerChip';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport BalanceBlock from './BalanceBlock';\nimport PaidMediaThumb from './transaction/PaidMediaThumb';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsPayment'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  bot?: ApiUser;\n  paidMediaMessage?: ApiMessage;\n  paidMediaChat?: ApiChat;\n};\n\nconst StarPaymentModal = ({\n  modal,\n  bot,\n  starsBalanceState,\n  paidMediaMessage,\n  paidMediaChat,\n}: OwnProps & StateProps) => {\n  const { closeStarsPaymentModal, openStarsBalanceModal, sendStarPaymentForm } = getActions();\n  const [isLoading, markLoading, unmarkLoading] = useFlag();\n  const isOpen = Boolean(modal?.inputInvoice && starsBalanceState);\n\n  const prevModal = usePrevious(modal);\n  const renderingModal = modal || prevModal;\n\n  const { form, subscriptionInfo } = renderingModal || {};\n  const amount = form?.invoice?.totalAmount || subscriptionInfo?.subscriptionPricing?.amount;\n  const isBotSubscription = Boolean(form?.invoice.subscriptionPeriod);\n  const canShowPeerItem = !subscriptionInfo?.subscriptionPricing;\n\n  const photo = form?.photo;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  useEffect(() => {\n    if (!isOpen) {\n      unmarkLoading();\n    }\n  }, [isOpen]);\n\n  const descriptionText = useMemo(() => {\n    if (!renderingModal?.inputInvoice) {\n      return '';\n    }\n\n    const botName = getUserFullName(bot);\n    const starsText = oldLang('Stars.Intro.PurchasedText.Stars', amount);\n\n    if (paidMediaMessage) {\n      const extendedMedia = paidMediaMessage.content.paidMedia!.extendedMedia as ApiMediaExtendedPreview[];\n      const areAllPhotos = extendedMedia.every((media) => !media.duration);\n      const areAllVideos = extendedMedia.every((media) => !!media.duration);\n\n      const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', extendedMedia.length)\n        : areAllVideos ? oldLang('Stars.Transfer.Videos', extendedMedia.length)\n          : oldLang('Media', extendedMedia.length);\n\n      const channelTitle = getChatTitle(oldLang, paidMediaChat!);\n      return oldLang('Stars.Transfer.UnlockInfo', [mediaText, channelTitle, starsText]);\n    }\n\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeText', {\n        chat: subscriptionInfo.title,\n        amount,\n      }, {\n        withNodes: true,\n        withMarkdown: true,\n        pluralValue: amount!,\n      });\n    }\n\n    if (isBotSubscription) {\n      return lang('StarsSubscribeBotText', {\n        name: form.title,\n        amount,\n        bot: botName,\n      }, {\n        pluralValue: amount!,\n      });\n    }\n\n    return oldLang('Stars.Transfer.Info', [form!.title, botName, starsText]);\n  }, [\n    renderingModal?.inputInvoice, bot, oldLang, amount, paidMediaMessage, subscriptionInfo, isBotSubscription, form,\n    paidMediaChat, lang,\n  ]);\n\n  const disclaimerText = useMemo(() => {\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeInfo', {\n        link: <SafeLink url={lang('StarsSubscribeInfoLink')} text={lang('StarsSubscribeInfoLinkText')} />,\n      }, {\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [subscriptionInfo, lang]);\n\n  const inviteCustomPeer = useMemo(() => {\n    if (!subscriptionInfo) {\n      return undefined;\n    }\n\n    return getCustomPeerFromInvite(subscriptionInfo);\n  }, [subscriptionInfo]);\n\n  const handlePayment = useLastCallback(() => {\n    const balance = starsBalanceState?.balance;\n    if (amount === undefined || balance === undefined) {\n      return;\n    }\n\n    if (amount > balance.amount) {\n      openStarsBalanceModal({\n        originStarsPayment: modal,\n      });\n      return;\n    }\n\n    sendStarPaymentForm({});\n    markLoading();\n  });\n\n  return (\n    <Modal\n      contentClassName={styles.paymentContent}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      onClose={closeStarsPaymentModal}\n    >\n      <BalanceBlock balance={starsBalanceState?.balance} className={styles.modalBalance} />\n      <div className={styles.paymentImages} dir={oldLang.isRtl ? 'ltr' : 'rtl'}>\n        {paidMediaMessage ? (\n          <PaidMediaThumb media={paidMediaMessage.content.paidMedia!.extendedMedia} />\n        ) : inviteCustomPeer ? (\n          <>\n            <Avatar className={styles.paymentPhoto} peer={inviteCustomPeer} size=\"giant\" />\n            <StarIcon type=\"gold\" size=\"adaptive\" className={styles.avatarStar} />\n          </>\n        ) : (\n          <PeerBadge\n            peer={!photo ? bot : undefined}\n            avatarWebPhoto={photo}\n            avatarSize=\"giant\"\n            badgeIcon=\"star\"\n            badgeText={formatInteger(amount!)}\n            badgeClassName={styles.amountBadge}\n            className={styles.paymentPhoto}\n          />\n        )}\n        <img className={styles.paymentImageBackground} src={StarsBackground} alt=\"\" draggable={false} />\n      </div>\n      <h2 className={styles.headerText}>\n        {inviteCustomPeer ? oldLang('StarsSubscribeTitle') : oldLang('StarsConfirmPurchaseTitle')}\n      </h2>\n      {canShowPeerItem && <PeerChip className={styles.botItem} peerId={form?.botId} />}\n      <div className={styles.description}>\n        {renderText(descriptionText, ['simple_markdown', 'emoji'])}\n      </div>\n      <Button className={styles.paymentButton} size=\"smaller\" onClick={handlePayment} isLoading={isLoading}>\n        {lang(isBotSubscription ? 'StarsSubscribeBotButtonMonth' : 'StarsPay', {\n          amount: formatStarsAsIcon(lang, amount!, { asFont: true }),\n        }, {\n          withNodes: true,\n        })}\n      </Button>\n      {disclaimerText && (\n        <div className={buildClassName(styles.disclaimer, styles.smallerText)}>\n          {disclaimerText}\n        </div>\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const bot = modal?.form?.botId ? selectUser(global, modal.form.botId) : undefined;\n\n    const messageInputInvoice = modal?.inputInvoice?.type === 'message' ? modal.inputInvoice : undefined;\n    const message = messageInputInvoice\n      ? selectChatMessage(global, messageInputInvoice.chatId, messageInputInvoice.messageId) : undefined;\n    const chat = messageInputInvoice ? selectChat(global, messageInputInvoice.chatId) : undefined;\n    const isPaidMedia = message?.content.paidMedia;\n\n    return {\n      bot,\n      starsBalanceState: global.stars,\n      paidMediaMessage: isPaidMedia ? message : undefined,\n      paidMediaChat: isPaidMedia ? chat : undefined,\n    };\n  },\n)(StarPaymentModal));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiStarTopupOption, ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers';\nimport {\n  selectUser,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\nimport StarTopupOptionList from '../StarTopupOptionList';\n\nimport styles from './StarsGiftModal.module.scss';\n\nimport StarLogo from '../../../../assets/icons/StarLogo.svg';\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsGiftModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst AVATAR_SIZE = 100;\n\nconst StarsGiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  user,\n}) => {\n  const {\n    closeStarsGiftModal, openInvoice, requestConfetti,\n  } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const dialogRef = useRef<HTMLDivElement>(null);\n\n  const isOpen = Boolean(modal?.isOpen);\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const oldLang = useOldLang();\n\n  const [selectedOption, setSelectedOption] = useState<ApiStarTopupOption | undefined>();\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n    }\n  }, [isOpen]);\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (renderingModal?.isCompleted) {\n      showConfetti();\n    }\n  }, [renderingModal, showConfetti]);\n\n  const handleClick = useLastCallback((option: ApiStarTopupOption) => {\n    if (!renderingModal) return;\n\n    setSelectedOption(option);\n    if (user) {\n      openInvoice({\n        type: 'starsgift',\n        userId: user.id,\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    } else {\n      openInvoice({\n        type: 'stars',\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    }\n  });\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleClose = useLastCallback(() => {\n    closeStarsGiftModal();\n  });\n\n  function renderGiftTitle() {\n    if (renderingModal?.isCompleted) {\n      return user ? renderText(oldLang('Notification.StarsGift.SentYou',\n        formatCurrencyAsString(selectedOption!.amount, selectedOption!.currency, oldLang.code)), ['simple_markdown'])\n        : renderText(oldLang('StarsAcquiredInfo', selectedOption?.stars), ['simple_markdown']);\n    }\n\n    return user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars');\n  }\n\n  const bottomText = useMemo(() => {\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink\n        url={oldLang('StarsTOSLink')}\n        text={oldLang('lng_credits_summary_options_about_link')}\n      />,\n      parts[1],\n    ];\n  }, [oldLang]);\n\n  return (\n    <Modal\n      className={buildClassName(styles.modalDialog)}\n      contentClassName={styles.content}\n      dialogRef={dialogRef}\n      isSlim\n      onClose={handleClose}\n      isOpen={isOpen}\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => closeStarsGiftModal()}\n          ariaLabel={oldLang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars')}\n          </h2>\n        </div>\n        <div className={styles.headerInfo}>\n          {user ? (\n            <>\n              <Avatar\n                size={AVATAR_SIZE}\n                peer={user}\n                className={styles.avatar}\n              />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          ) : (\n            <>\n              <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          )}\n        </div>\n        <h2 className={buildClassName(styles.headerText, styles.center)}>\n          {renderGiftTitle()}\n        </h2>\n        <p className={styles.description}>\n          {user ? renderText(\n            oldLang('ActionGiftStarsSubtitle', getPeerTitle(oldLang, user)), ['simple_markdown'],\n          ) : oldLang('Stars.Purchase.GetStarsInfo')}\n        </p>\n        <div className={styles.section}>\n          <StarTopupOptionList\n            options={renderingModal?.starsGiftOptions}\n            onClick={handleClick}\n          />\n          <div className={styles.secondaryInfo}>\n            {bottomText}\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const user = modal?.forUserId ? selectUser(getGlobal(), modal.forUserId) : undefined;\n\n  return {\n    user,\n  };\n})(StarsGiftModal));\n","import type { ApiStarsAmount, ApiStarsTransaction } from '../../../../api/types';\nimport type { OldLangFn } from '../../../../hooks/useOldLang';\n\nimport { buildStarsTransactionCustomPeer } from '../../../../global/helpers/payments';\nimport { formatPercent } from '../../../../util/textFormat';\n\nexport function getTransactionTitle(lang: OldLangFn, transaction: ApiStarsTransaction) {\n  if (transaction.starRefCommision) {\n    return lang('StarTransactionCommission', formatPercent(transaction.starRefCommision));\n  }\n  if (transaction.isGiftUpgrade) return lang('Gift2TransactionUpgraded');\n  if (transaction.extendedMedia) return lang('StarMediaPurchase');\n  if (transaction.subscriptionPeriod) return transaction.title || lang('StarSubscriptionPurchase');\n  if (transaction.isReaction) return lang('StarsReactionsSent');\n  if (transaction.giveawayPostId) return lang('StarsGiveawayPrizeReceived');\n  if (transaction.isMyGift) return lang('StarsGiftSent');\n  if (transaction.isGift) return lang('StarsGiftReceived');\n  if (transaction.starGift) {\n    return isNegativeStarsAmount(transaction.stars) ? lang('Gift2TransactionSent') : lang('Gift2ConvertedTitle');\n  }\n\n  const customPeer = (transaction.peer && transaction.peer.type !== 'peer'\n    && buildStarsTransactionCustomPeer(transaction.peer)) || undefined;\n\n  if (customPeer) return customPeer.title || lang(customPeer.titleKey!);\n\n  return transaction.title;\n}\n\nexport function isNegativeStarsAmount(starsAmount: ApiStarsAmount) {\n  if (starsAmount.amount) return starsAmount.amount < 0;\n  return starsAmount.nanos < 0;\n}\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiStarsSubscription,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatInteger } from '../../../../util/textFormat';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\n\nimport styles from './StarsSubscriptionItem.module.scss';\n\ntype OwnProps = {\n  subscription: ApiStarsSubscription;\n};\n\nfunction selectProvidedPeer(peerId: string) {\n  return (global: GlobalState) => (\n    selectPeer(global, peerId)\n  );\n}\n\nconst StarsSubscriptionItem = ({ subscription }: OwnProps) => {\n  const { openStarsSubscriptionModal } = getActions();\n  const {\n    peerId, pricing, until, isCancelled, title, photo,\n  } = subscription;\n  const lang = useOldLang();\n\n  const peer = useSelector(selectProvidedPeer(peerId))!;\n\n  const handleClick = useLastCallback(() => {\n    openStarsSubscriptionModal({ subscription });\n  });\n\n  if (!peer) {\n    return undefined;\n  }\n\n  const hasExpired = until < Date.now() / 1000;\n  const formattedDate = formatDateToString(until * 1000, lang.code, true, 'long');\n\n  return (\n    <div className={styles.root} onClick={handleClick}>\n      <div className={styles.preview}>\n        <Avatar size=\"medium\" peer={peer} />\n        <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{renderText(getPeerTitle(lang, peer) || '')}</h3>\n        {title && (\n          <p className={styles.subtitle}>\n            {photo && <Avatar webPhoto={photo} size=\"micro\" />}\n            {renderText(title)}\n          </p>\n        )}\n        <p className={styles.description}>\n          {lang(\n            hasExpired ? 'StarsSubscriptionExpired'\n              : isCancelled ? 'StarsSubscriptionExpires' : 'StarsSubscriptionRenews',\n            formattedDate,\n          )}\n        </p>\n      </div>\n      <div className={styles.status}>\n        {(isCancelled || hasExpired) ? (\n          <div className={styles.statusEnded}>\n            {lang(hasExpired ? 'StarsSubscriptionStatusExpired' : 'StarsSubscriptionStatusCancelled')}\n          </div>\n        ) : (\n          <>\n            <div className={styles.statusPricing}>\n              <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n              <span className={styles.amount}>\n                {formatInteger(pricing.amount)}\n              </span>\n            </div>\n            <div className={styles.statusPeriod}>{lang('StarsParticipantSubscriptionPerMonth')}</div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsSubscriptionItem);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../../config';\nimport { isApiPeerUser } from '../../../../global/helpers/peers';\nimport {\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './StarsSubscriptionModal.module.scss';\n\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsSubscriptionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n};\n\nconst StarsSubscriptionModal: FC<OwnProps & StateProps> = ({\n  modal, peer,\n}) => {\n  const {\n    closeStarsSubscriptionModal,\n    fulfillStarsSubscription,\n    changeStarsSubscription,\n    checkChatInvite,\n    loadStarStatus,\n    openInvoice,\n  } = getActions();\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const { subscription } = modal || {};\n\n  const buttonState = useMemo(() => {\n    if (!subscription) {\n      return 'hidden';\n    }\n\n    if (subscription.canRefulfill) {\n      return 'refulfill';\n    }\n\n    const isActive = subscription.until > Date.now() / 1000;\n    if (isActive && !subscription.isCancelled) {\n      return 'cancel';\n    }\n\n    if (isActive && subscription.isCancelled) {\n      return 'renew';\n    }\n\n    const canRestart = subscription.chatInviteHash || subscription.invoiceSlug;\n    if (!isActive && canRestart) {\n      return 'restart';\n    }\n\n    return 'ok';\n  }, [subscription]);\n\n  const handleButtonClick = useLastCallback(() => {\n    if (!subscription) {\n      return;\n    }\n\n    switch (buttonState) {\n      case 'refulfill': {\n        fulfillStarsSubscription({ id: subscription.id });\n        break;\n      }\n      case 'restart': {\n        if (subscription.chatInviteHash) {\n          checkChatInvite({ hash: subscription.chatInviteHash });\n        } else if (subscription.invoiceSlug) {\n          openInvoice({\n            type: 'slug',\n            slug: subscription.invoiceSlug,\n          });\n        }\n        loadStarStatus();\n        break;\n      }\n      case 'renew': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: false });\n        break;\n      }\n      case 'cancel': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: true });\n        break;\n      }\n    }\n    closeStarsSubscriptionModal();\n  });\n\n  const starModalData = useMemo(() => {\n    if (!subscription || !peer) {\n      return undefined;\n    }\n\n    const {\n      pricing, until, isCancelled, canRefulfill, photo, title, hasBotCancelled,\n    } = subscription;\n\n    const isBotSubscription = isApiPeerUser(peer);\n\n    const header = (\n      <div className={styles.header}>\n        <div className={styles.avatarWrapper}>\n          <Avatar peer={!photo ? peer : undefined} webPhoto={photo} size=\"giant\" />\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"adaptive\" />\n        </div>\n        <img\n          className={buildClassName(styles.starsBackground)}\n          src={StarsBackground}\n          alt=\"\"\n          draggable={false}\n        />\n        <h1 className={styles.title}>{title || oldLang('StarsSubscriptionTitle')}</h1>\n        <p className={styles.amount}>\n          {lang('StarsPerMonth', {\n            amount: pricing.amount,\n          }, {\n            withNodes: true,\n            specialReplacement: {\n              [STARS_ICON_PLACEHOLDER]: <StarIcon className={styles.amountStar} size=\"adaptive\" type=\"gold\" />,\n            },\n          })}\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      oldLang(isBotSubscription ? 'StarsSubscriptionBot' : 'StarsSubscriptionChannel'),\n      { chatId: peer.id },\n    ]);\n\n    if (title) {\n      tableData.push([\n        oldLang('StarsSubscriptionBotProduct'),\n        title,\n      ]);\n    }\n\n    const hasExpired = until < Date.now() / 1000;\n    tableData.push([\n      oldLang(hasExpired ? 'StarsSubscriptionUntilExpired'\n        : isCancelled ? 'StarsSubscriptionUntilExpires' : 'StarsSubscriptionUntilRenews'),\n      formatDateTimeToString(until * 1000, oldLang.code, true),\n    ]);\n\n    const footerTos = lang('StarsTransactionTOS', {\n      link: <SafeLink url={lang('StarsTransactionTOSLink')} text={lang('StarsTransactionTOSLinkText')} />,\n    }, {\n      withNodes: true,\n    });\n\n    const footer = (\n      <span className={styles.footer}>\n        <p className={styles.secondary}>{footerTos}</p>\n        {isCancelled && (\n          <p className={styles.danger}>\n            {oldLang(hasBotCancelled ? 'StarsSubscriptionBotCancelledText' : 'StarsSubscriptionCancelledText')}\n          </p>\n        )}\n        {canRefulfill && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionRefulfillInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionExpiredInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && !hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionCancelInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {buttonState !== 'hidden' && (\n          <Button\n            size=\"smaller\"\n            color={buttonState === 'cancel' ? 'danger' : 'primary'}\n            isText={buttonState === 'cancel'}\n            onClick={handleButtonClick}\n          >\n            {oldLang(\n              buttonState === 'cancel' ? 'StarsSubscriptionCancel'\n                : buttonState === 'refulfill' ? 'StarsSubscriptionRefulfill'\n                  : buttonState === 'restart' ? 'StarsSubscriptionAgain'\n                    : buttonState === 'renew' ? 'StarsSubscriptionRenew' : 'OK',\n            )}\n          </Button>\n        )}\n      </span>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [buttonState, lang, oldLang, peer, subscription]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(subscription)}\n      className={styles.modal}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      onClose={closeStarsSubscriptionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const peerId = modal?.subscription.peerId;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    return {\n      peer,\n    };\n  },\n)(StarsSubscriptionModal));\n","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiMediaExtendedPreview, BoughtPaidMedia } from '../../../../api/types';\n\nimport { getMediaHash, getMediaThumbUri } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useMedia from '../../../../hooks/useMedia';\n\nimport Icon from '../../../common/icons/Icon';\nimport MediaSpoiler from '../../../common/MediaSpoiler';\n\nimport styles from './PaidMediaThumb.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  media: ApiMediaExtendedPreview[] | BoughtPaidMedia[];\n  isTransactionPreview?: boolean;\n  onClick?: NoneToVoidFunction;\n};\n\nconst THUMB_LIMIT = 3;\nconst PREVIEW_THUMB_LIMIT = 2;\n\nconst PaidMediaThumb = ({\n  media, className, isTransactionPreview, onClick,\n}: OwnProps) => {\n  const count = Math.min(media.length, isTransactionPreview ? PREVIEW_THUMB_LIMIT : THUMB_LIMIT);\n  const isLocked = 'mediaType' in media[0];\n  return (\n    <div\n      className={buildClassName(\n        styles.root,\n        styles[`itemCount${count}`],\n        isTransactionPreview && styles.preview,\n        className,\n      )}\n      dir=\"rtl\"\n      onClick={onClick}\n    >\n      {media.slice(0, count).reverse().map((item, i, arr) => {\n        const realIndex = arr.length - i - 1;\n        return 'mediaType' in item ? (\n          <MediaSpoiler\n            className={styles.thumb}\n            isVisible\n            width={item.width}\n            height={item.height}\n            thumbDataUri={item.thumbnail?.dataUri}\n          />\n        ) : (\n          <SingleMediaThumb\n            className={buildClassName(isTransactionPreview && realIndex > 0 && styles.noOutline)}\n            boughtMedia={item}\n            index={realIndex}\n          />\n        );\n      })}\n      {isLocked && (\n        <div className={styles.count}>\n          <Icon name=\"stars-lock\" />\n          {media.length > 1 ? media.length : ''}\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction SingleMediaThumb({\n  boughtMedia,\n  index,\n  className,\n}: {\n  boughtMedia: BoughtPaidMedia;\n  index?: number;\n  className?: string;\n}) {\n  const media = (boughtMedia.video || boughtMedia.photo)!;\n  const mediaHash = getMediaHash(media, 'pictogram');\n  const thumb = getMediaThumbUri(media);\n\n  const mediaBlob = useMedia(mediaHash);\n\n  return (\n    <div className={buildClassName(styles.thumb, index !== undefined && `stars-transaction-media-${index}`, className)}>\n      {thumb && <img className={styles.blurry} src={thumb} alt=\"\" />}\n      {mediaBlob && <img className={styles.full} src={mediaBlob} alt=\"\" />}\n    </div>\n  );\n}\n\nexport default memo(PaidMediaThumb);\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransaction,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\nimport type { CustomPeer } from '../../../../types';\n\nimport { getPeerTitle } from '../../../../global/helpers';\nimport { buildStarsTransactionCustomPeer, formatStarsTransactionAmount } from '../../../../global/helpers/payments';\nimport { selectPeer } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { CUSTOM_PEER_PREMIUM } from '../../../../util/objects/customPeer';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport renderText from '../../../common/helpers/renderText';\nimport { getTransactionTitle, isNegativeStarsAmount } from '../helpers/transaction';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionItem.module.scss';\n\ntype OwnProps = {\n  transaction: ApiStarsTransaction;\n  className?: string;\n};\n\nconst UNIQUE_GIFT_STICKER_SIZE = 36;\n\nfunction selectOptionalPeer(peerId?: string) {\n  return (global: GlobalState) => (\n    peerId ? selectPeer(global, peerId) : undefined\n  );\n}\n\nconst StarsTransactionItem = ({ transaction, className }: OwnProps) => {\n  const { openStarsTransactionModal } = getActions();\n  const {\n    date,\n    stars,\n    photo,\n    peer: transactionPeer,\n    extendedMedia,\n    subscriptionPeriod,\n  } = transaction;\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const peerId = transactionPeer.type === 'peer' ? transactionPeer.id : undefined;\n  const peer = useSelector(selectOptionalPeer(peerId));\n  const uniqueGift = transaction.starGift?.type === 'starGiftUnique' ? transaction.starGift : undefined;\n  const uniqueGiftSticker = uniqueGift && getStickerFromGift(uniqueGift);\n\n  const data = useMemo(() => {\n    let title = getTransactionTitle(oldLang, transaction);\n    let description;\n    let status: string | undefined;\n    let avatarPeer: ApiPeer | CustomPeer | undefined;\n\n    if (transaction.peer.type === 'peer') {\n      description = peer && getPeerTitle(oldLang, peer);\n      avatarPeer = peer || CUSTOM_PEER_PREMIUM;\n    } else {\n      const customPeer = buildStarsTransactionCustomPeer(transaction.peer);\n      title = customPeer.title || oldLang(customPeer.titleKey!);\n      description = oldLang(customPeer.subtitleKey!);\n      avatarPeer = customPeer;\n    }\n\n    if (transaction.isGiftUpgrade && transaction.starGift?.type === 'starGiftUnique') {\n      description = transaction.starGift.title;\n    }\n\n    if (transaction.photo) {\n      avatarPeer = undefined;\n    }\n\n    if (transaction.isRefund) {\n      status = oldLang('StarsRefunded');\n    }\n\n    if (transaction.hasFailed) {\n      status = oldLang('StarsFailed');\n    }\n\n    if (transaction.isPending) {\n      status = oldLang('StarsPending');\n    }\n\n    return {\n      title,\n      description,\n      avatarPeer,\n      status,\n    };\n  }, [oldLang, peer, transaction]);\n\n  const previewContent = useMemo(() => {\n    if (uniqueGiftSticker) {\n      const { backdrop } = getGiftAttributes(uniqueGift)!;\n      const backgroundColors = [backdrop!.centerColor, backdrop!.edgeColor];\n\n      return (\n        <>\n          <RadialPatternBackground\n            className={styles.uniqueGiftBackground}\n            backgroundColors={backgroundColors}\n          />\n          <AnimatedIconFromSticker\n            className={styles.uniqueGift}\n            sticker={uniqueGiftSticker}\n            size={UNIQUE_GIFT_STICKER_SIZE}\n            play={false}\n          />\n        </>\n      );\n    }\n\n    if (extendedMedia) {\n      return <PaidMediaThumb media={extendedMedia} isTransactionPreview />;\n    }\n\n    return (\n      <>\n        <Avatar size=\"medium\" webPhoto={photo} peer={data.avatarPeer} />\n        {Boolean(subscriptionPeriod) && (\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n        )}\n      </>\n    );\n  }, [extendedMedia, photo, uniqueGiftSticker, subscriptionPeriod, data.avatarPeer, uniqueGift]);\n\n  const handleClick = useLastCallback(() => {\n    openStarsTransactionModal({ transaction });\n  });\n\n  return (\n    <div className={buildClassName(styles.root, className)} onClick={handleClick}>\n      <div className={styles.preview}>\n        {previewContent}\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{data.title}</h3>\n        {data.description && (\n          <p className={styles.description}>{renderText(data.description)}</p>\n        )}\n        <p className={styles.date}>\n          {formatDateTimeToString(date * 1000, oldLang.code, true)}\n          {data.status && ` — (${data.status})`}\n        </p>\n      </div>\n      <div className={styles.stars}>\n        <span\n          className={buildClassName(styles.amount, isNegativeStarsAmount(stars) ? styles.negative : styles.positive)}\n        >\n          {formatStarsTransactionAmount(lang, stars)}\n        </span>\n        <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsTransactionItem);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransactionPeer, ApiSticker,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { MediaViewerOrigin } from '../../../../types';\n\nimport { getMessageLink } from '../../../../global/helpers';\nimport { buildStarsTransactionCustomPeer, formatStarsTransactionAmount } from '../../../../global/helpers/payments';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForStars,\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { getTransactionTitle, isNegativeStarsAmount } from '../helpers/transaction';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport SafeLink from '../../../common/SafeLink';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../../gift/UniqueGiftHeader';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionModal.module.scss';\n\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsTransactionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n  canPlayAnimatedEmojis?: boolean;\n  topSticker?: ApiSticker;\n};\n\nconst StarsTransactionModal: FC<OwnProps & StateProps> = ({\n  modal, peer, canPlayAnimatedEmojis, topSticker,\n}) => {\n  const { showNotification, openMediaViewer, closeStarsTransactionModal } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const { transaction } = modal || {};\n\n  const handleOpenMedia = useLastCallback(() => {\n    const media = transaction?.extendedMedia;\n    if (!media) return;\n\n    openMediaViewer({\n      origin: MediaViewerOrigin.StarsTransaction,\n      standaloneMedia: media.flatMap((item) => Object.values(item)),\n    });\n  });\n\n  const starModalData = useMemo(() => {\n    if (!transaction) {\n      return undefined;\n    }\n\n    const {\n      giveawayPostId, photo, stars, isGiftUpgrade, starGift,\n    } = transaction;\n\n    const gift = transaction?.starGift;\n    const isUniqueGift = gift?.type === 'starGiftUnique';\n    const sticker = transaction?.starGift ? getStickerFromGift(transaction.starGift) : topSticker;\n\n    const giftAttributes = isUniqueGift ? getGiftAttributes(gift) : undefined;\n\n    const customPeer = (transaction.peer && transaction.peer.type !== 'peer'\n        && buildStarsTransactionCustomPeer(transaction.peer)) || undefined;\n\n    const peerId = transaction.peer?.type === 'peer' ? transaction.peer.id : undefined;\n    const toName = transaction.peer && oldLang(getStarsPeerTitleKey(transaction.peer));\n\n    const title = getTransactionTitle(oldLang, transaction);\n\n    const messageLink = peer && transaction.messageId && !isGiftUpgrade\n      ? getMessageLink(peer, undefined, transaction.messageId) : undefined;\n    const giveawayMessageLink = peer && giveawayPostId && getMessageLink(peer, undefined, giveawayPostId);\n\n    const media = transaction.extendedMedia;\n\n    const mediaAmount = media?.length || 0;\n    const areAllPhotos = media?.every((m) => !m.video);\n    const areAllVideos = media?.every((m) => !m.photo);\n\n    const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', mediaAmount)\n      : areAllVideos ? oldLang('Stars.Transfer.Videos', mediaAmount)\n        : oldLang('Media', mediaAmount);\n\n    const description = transaction.description\n      || (isGiftUpgrade && starGift?.type === 'starGiftUnique' ? starGift.title : undefined)\n      || (media ? mediaText : undefined);\n\n    const shouldDisplayAvatar = !media && !sticker;\n    const avatarPeer = !photo ? (peer || customPeer) : undefined;\n\n    const uniqueGiftHeader = isUniqueGift && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={lang('GiftInfoCollectible', { number: gift.number })}\n        />\n      </div>\n    );\n\n    const regularHeader = (\n      <div className={styles.header}>\n        {media && (\n          <PaidMediaThumb\n            className={buildClassName(styles.mediaPreview, 'transaction-media-preview')}\n            media={media}\n            onClick={handleOpenMedia}\n          />\n        )}\n        {!media && sticker && (\n          <AnimatedIconFromSticker\n            key={transaction.id}\n            sticker={sticker}\n            play={canPlayAnimatedEmojis}\n            noLoop\n          />\n        )}\n        {shouldDisplayAvatar && (\n          <Avatar peer={avatarPeer} webPhoto={photo} size=\"giant\" />\n        )}\n        {!sticker && (\n          <img\n            className={buildClassName(styles.starsBackground)}\n            src={StarsBackground}\n            alt=\"\"\n            draggable={false}\n          />\n        )}\n        {title && <h1 className={styles.title}>{title}</h1>}\n        <p className={styles.description}>{description}</p>\n        <p className={styles.amount}>\n          <span\n            className={buildClassName(styles.amount, isNegativeStarsAmount(stars) ? styles.negative : styles.positive)}\n          >\n            {formatStarsTransactionAmount(lang, stars)}\n          </span>\n          <StarIcon type=\"gold\" size=\"middle\" />\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    if (transaction.starRefCommision) {\n      tableData.push([\n        oldLang('StarsTransaction.StarRefReason.Title'),\n        oldLang('StarsTransaction.StarRefReason.Program'),\n      ]);\n    }\n\n    if (isGiftUpgrade) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        oldLang('StarGiftReasonUpgrade'),\n      ]);\n    }\n\n    let peerLabel;\n    if (isGiftUpgrade) {\n      peerLabel = oldLang('Stars.Transaction.GiftFrom');\n    } else if (isNegativeStarsAmount(stars) || transaction.isMyGift) {\n      peerLabel = oldLang('Stars.Transaction.To');\n    } else if (transaction.starRefCommision) {\n      peerLabel = oldLang('StarsTransaction.StarRefReason.Miniapp');\n    } else if (peerId) {\n      peerLabel = oldLang('Star.Transaction.From');\n    } else {\n      peerLabel = oldLang('Stars.Transaction.Via');\n    }\n\n    tableData.push([\n      peerLabel,\n      peerId ? { chatId: peerId } : toName || '',\n    ]);\n\n    if (messageLink) {\n      tableData.push([oldLang('Stars.Transaction.Reaction.Post'), <SafeLink url={messageLink} text={messageLink} />]);\n    }\n\n    if (giveawayMessageLink) {\n      tableData.push([oldLang('BoostReason'), <SafeLink url={giveawayMessageLink} text={oldLang('Giveaway')} />]);\n      tableData.push([oldLang('Gift'), oldLang('Stars', transaction.stars, 'i')]);\n    }\n\n    if (transaction.id) {\n      tableData.push([\n        oldLang('Stars.Transaction.Id'),\n        (\n          <>\n            <div\n              className={styles.tid}\n              onClick={() => {\n                copyTextToClipboard(transaction.id!);\n                showNotification({\n                  message: oldLang('StarsTransactionIDCopied'),\n                });\n              }}\n            >\n              {transaction.id}\n            </div>\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </>\n        ),\n      ]);\n    }\n\n    tableData.push([\n      oldLang('Stars.Transaction.Date'),\n      formatDateTimeToString(transaction.date * 1000, oldLang.code, true),\n    ]);\n\n    const footerText = oldLang('lng_credits_box_out_about');\n    const footerTextParts = footerText.split('{link}');\n\n    const footer = (\n      <span className={styles.footer}>\n        {footerTextParts[0]}\n        <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />\n        {footerTextParts[1]}\n      </span>\n    );\n\n    return {\n      header: isUniqueGift ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [transaction, oldLang, lang, peer, canPlayAnimatedEmojis, topSticker]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(transaction)}\n      className={styles.modal}\n      hasBackdrop={transaction?.starGift?.type === 'starGiftUnique'}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      buttonText={oldLang('OK')}\n      onClose={closeStarsTransactionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const peerId = modal?.transaction?.peer?.type === 'peer' && modal.transaction.peer.id;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    const starCount = modal?.transaction.stars;\n    const starsGiftSticker = modal?.transaction.isGift && selectGiftStickerForStars(global, starCount?.amount);\n\n    return {\n      peer,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n      topSticker: starsGiftSticker,\n    };\n  },\n)(StarsTransactionModal));\n\nfunction getStarsPeerTitleKey(peer: ApiStarsTransactionPeer) {\n  switch (peer.type) {\n    case 'appStore':\n      return 'AppStore';\n    case 'playMarket':\n      return 'PlayMarket';\n    case 'fragment':\n      return 'Fragment';\n    case 'premiumBot':\n      return 'StarsTransactionBot';\n    case 'ads':\n      return 'StarsTransactionAds';\n    case 'api':\n      return 'Stars.Intro.Transaction.TelegramBotApi.Subtitle';\n    default:\n      return 'Stars.Transaction.Unsupported.Title';\n  }\n}\n","import { useMemo, useRef } from '../../lib/teact/teact';\n\n/**\n * Use this hook to bind `<Transition />` animation to changes in the dependency array.\n * Use optional parameter `noAnimation` if you want to prevent the animation even if the dependency array changes.\n*/\nexport function useTransitionActiveKey(deps: unknown[], noAnimation?: boolean): number {\n  const activeKey = useRef(0);\n  let didUpdate = false;\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useMemo(() => { activeKey.current += 1; didUpdate = true; }, deps);\n\n  if (noAnimation && didUpdate) activeKey.current -= 1;\n\n  return activeKey.current;\n}\n","import { useEffect, useState } from '../lib/teact/teact';\nimport { getActions } from '../global';\n\nimport type { ThemeKey } from '../types';\n\nimport { CUSTOM_BG_CACHE_NAME, DARK_THEME_PATTERN_COLOR, DEFAULT_PATTERN_COLOR } from '../config';\nimport * as cacheApi from '../util/cacheApi';\nimport { preloadImage } from '../util/files';\n\nconst useCustomBackground = (theme: ThemeKey, settingValue?: string) => {\n  const { setThemeSettings } = getActions();\n  const [value, setValue] = useState(settingValue);\n\n  useEffect(() => {\n    if (!settingValue) {\n      return;\n    }\n\n    if (settingValue.startsWith('#')) {\n      setValue(settingValue);\n    } else {\n      cacheApi.fetch(CUSTOM_BG_CACHE_NAME, theme, cacheApi.Type.Blob)\n        .then((blob) => {\n          const url = URL.createObjectURL(blob);\n          preloadImage(url)\n            .then(() => {\n              setValue(`url(${url})`);\n            });\n        })\n        .catch(() => {\n          setThemeSettings({\n            theme,\n            background: undefined,\n            backgroundColor: undefined,\n            isBlurred: true,\n            patternColor: theme === 'dark' ? DARK_THEME_PATTERN_COLOR : DEFAULT_PATTERN_COLOR,\n          });\n        });\n    }\n  }, [settingValue, theme]);\n\n  return settingValue ? value : undefined;\n};\n\nexport default useCustomBackground;\n","import React from '../../lib/teact/teact';\n\nimport type { LangFn } from './types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../config';\nimport buildClassName from '../buildClassName';\n\nimport Icon from '../../components/common/icons/Icon';\nimport StarIcon from '../../components/common/icons/StarIcon';\n\nexport function formatStarsAsText(lang: LangFn, amount: number) {\n  return lang('StarsAmountText', { amount }, { pluralValue: amount });\n}\n\nexport function formatStarsAsIcon(lang: LangFn, amount: number, options?: { asFont?: boolean; className?: string }) {\n  const { asFont, className } = options || {};\n  const icon = asFont\n    ? <Icon name=\"star\" className={buildClassName('star-amount-icon', className)} />\n    : <StarIcon type=\"gold\" className={buildClassName('star-amount-icon', className)} size=\"adaptive\" />;\n  return lang('StarsAmount', { amount }, {\n    withNodes: true,\n    specialReplacement: {\n      [STARS_ICON_PLACEHOLDER]: icon,\n    },\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"BadgeButton-module__root\",\"clickable\":\"BadgeButton-module__clickable\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsGiftingPickerModal-module__root\",\"transition\":\"StarsGiftingPickerModal-module__transition\",\"main\":\"StarsGiftingPickerModal-module__main\",\"filter\":\"StarsGiftingPickerModal-module__filter\",\"title\":\"StarsGiftingPickerModal-module__title\",\"buttons\":\"StarsGiftingPickerModal-module__buttons\",\"picker\":\"StarsGiftingPickerModal-module__picker\",\"avatars\":\"StarsGiftingPickerModal-module__avatars\",\"center\":\"StarsGiftingPickerModal-module__center\",\"description\":\"StarsGiftingPickerModal-module__description\",\"premiumFeatures\":\"StarsGiftingPickerModal-module__premiumFeatures\",\"options\":\"StarsGiftingPickerModal-module__options\",\"button\":\"StarsGiftingPickerModal-module__button\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftComposer-module__root\",\"header\":\"GiftComposer-module__header\",\"spacer\":\"GiftComposer-module__spacer\",\"title\":\"GiftComposer-module__title\",\"balance-container\":\"GiftComposer-module__balance-container\",\"balanceContainer\":\"GiftComposer-module__balance-container\",\"balance-caption\":\"GiftComposer-module__balance-caption\",\"balanceCaption\":\"GiftComposer-module__balance-caption\",\"star-balance\":\"GiftComposer-module__star-balance\",\"starBalance\":\"GiftComposer-module__star-balance\",\"balance\":\"GiftComposer-module__balance\",\"optionsSection\":\"GiftComposer-module__optionsSection\",\"checkboxTitle\":\"GiftComposer-module__checkboxTitle\",\"actionMessageView\":\"GiftComposer-module__actionMessageView\",\"messageInput\":\"GiftComposer-module__messageInput\",\"limited\":\"GiftComposer-module__limited\",\"footer\":\"GiftComposer-module__footer\",\"switcher\":\"GiftComposer-module__switcher\",\"switcherStarIcon\":\"GiftComposer-module__switcherStarIcon\",\"description\":\"GiftComposer-module__description\",\"main-button\":\"GiftComposer-module__main-button\",\"mainButton\":\"GiftComposer-module__main-button\",\"star\":\"GiftComposer-module__star\",\"background\":\"GiftComposer-module__background\",\"customBgImage\":\"GiftComposer-module__customBgImage\",\"customBgColor\":\"GiftComposer-module__customBgColor\",\"withTransition\":\"GiftComposer-module__withTransition\",\"blurred\":\"GiftComposer-module__blurred\",\"withRightColumn\":\"GiftComposer-module__withRightColumn\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"GiftItem-module__container\",\"starGift\":\"GiftItem-module__starGift\",\"monthsDescription\":\"GiftItem-module__monthsDescription\",\"description\":\"GiftItem-module__description\",\"buy\":\"GiftItem-module__buy\",\"star\":\"GiftItem-module__star\",\"amount\":\"GiftItem-module__amount\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftModal-module__root\",\"transition\":\"GiftModal-module__transition\",\"content\":\"GiftModal-module__content\",\"main\":\"GiftModal-module__main\",\"giftSection\":\"GiftModal-module__giftSection\",\"section\":\"GiftModal-module__section\",\"starGiftsContainer\":\"GiftModal-module__starGiftsContainer\",\"premiumGiftsGallery\":\"GiftModal-module__premiumGiftsGallery\",\"header\":\"GiftModal-module__header\",\"headerSlide\":\"GiftModal-module__headerSlide\",\"headerText\":\"GiftModal-module__headerText\",\"hiddenHeader\":\"GiftModal-module__hiddenHeader\",\"commonHeaderText\":\"GiftModal-module__commonHeaderText\",\"closeButton\":\"GiftModal-module__closeButton\",\"balance\":\"GiftModal-module__balance\",\"avatars\":\"GiftModal-module__avatars\",\"logoBackground\":\"GiftModal-module__logoBackground\",\"center\":\"GiftModal-module__center\",\"description\":\"GiftModal-module__description\",\"starGiftsDescription\":\"GiftModal-module__starGiftsDescription\",\"boostIcon\":\"GiftModal-module__boostIcon\",\"optionBottom\":\"GiftModal-module__optionBottom\",\"secondaryInfo\":\"GiftModal-module__secondaryInfo\",\"footer\":\"GiftModal-module__footer\",\"starGiftsTransition\":\"GiftModal-module__starGiftsTransition\"};","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"StarGiftCategoryList-module__list\",\"item-selected\":\"StarGiftCategoryList-module__item-selected\",\"itemSelected\":\"StarGiftCategoryList-module__item-selected\",\"item\":\"StarGiftCategoryList-module__item\",\"selected-item\":\"StarGiftCategoryList-module__selected-item\",\"selectedItem\":\"StarGiftCategoryList-module__selected-item\",\"star\":\"StarGiftCategoryList-module__star\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UniqueGiftHeader-module__root\",\"radialPattern\":\"UniqueGiftHeader-module__radialPattern\",\"sticker\":\"UniqueGiftHeader-module__sticker\",\"transition\":\"UniqueGiftHeader-module__transition\",\"transitionSlide\":\"UniqueGiftHeader-module__transitionSlide\",\"title\":\"UniqueGiftHeader-module__title\",\"subtitle\":\"UniqueGiftHeader-module__subtitle\"};","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"GiftWithdrawModal-module__header\",\"giftPreview\":\"GiftWithdrawModal-module__giftPreview\",\"backdrop\":\"GiftWithdrawModal-module__backdrop\",\"description\":\"GiftWithdrawModal-module__description\",\"arrow\":\"GiftWithdrawModal-module__arrow\",\"noPassword\":\"GiftWithdrawModal-module__noPassword\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"GiftInfoModal-module__modal\",\"header\":\"GiftInfoModal-module__header\",\"title\":\"GiftInfoModal-module__title\",\"description\":\"GiftInfoModal-module__description\",\"soldOut\":\"GiftInfoModal-module__soldOut\",\"footer\":\"GiftInfoModal-module__footer\",\"footerDescription\":\"GiftInfoModal-module__footerDescription\",\"unknown\":\"GiftInfoModal-module__unknown\",\"giftValue\":\"GiftInfoModal-module__giftValue\",\"uniqueAttribute\":\"GiftInfoModal-module__uniqueAttribute\",\"uniqueGift\":\"GiftInfoModal-module__uniqueGift\",\"starAmountIcon\":\"GiftInfoModal-module__starAmountIcon\",\"modalHeader\":\"GiftInfoModal-module__modalHeader\",\"modalCloseButton\":\"GiftInfoModal-module__modalCloseButton\",\"ownerAddress\":\"GiftInfoModal-module__ownerAddress\",\"copyIcon\":\"GiftInfoModal-module__copyIcon\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftRecipientPicker-module__root\",\"picker\":\"GiftRecipientPicker-module__picker\"};","// extracted by mini-css-extract-plugin\nexport default {\"footer\":\"GiftUpgradeModal-module__footer\",\"footerButton\":\"GiftUpgradeModal-module__footerButton\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"PaidReactionModal-module__content\",\"title\":\"PaidReactionModal-module__title\",\"slider\":\"PaidReactionModal-module__slider\",\"description\":\"PaidReactionModal-module__description\",\"modalBalance\":\"PaidReactionModal-module__modalBalance\",\"topLabel\":\"PaidReactionModal-module__topLabel\",\"top\":\"PaidReactionModal-module__top\",\"topBadge\":\"PaidReactionModal-module__topBadge\",\"buttonStar\":\"PaidReactionModal-module__buttonStar\",\"topPeer\":\"PaidReactionModal-module__topPeer\",\"checkbox\":\"PaidReactionModal-module__checkbox\",\"disclaimer\":\"PaidReactionModal-module__disclaimer\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarSlider-module__root\",\"slider\":\"StarSlider-module__slider\",\"sparkles\":\"StarSlider-module__sparkles\",\"progress\":\"StarSlider-module__progress\",\"floatingBadgeWrapper\":\"StarSlider-module__floatingBadgeWrapper\",\"floatingBadge\":\"StarSlider-module__floatingBadge\",\"floatingBadgeText\":\"StarSlider-module__floatingBadgeText\",\"floatingBadgeTriangle\":\"StarSlider-module__floatingBadgeTriangle\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsBalanceModal-module__root\",\"transition\":\"StarsBalanceModal-module__transition\",\"main\":\"StarsBalanceModal-module__main\",\"container\":\"StarsBalanceModal-module__container\",\"section\":\"StarsBalanceModal-module__section\",\"sectionTitle\":\"StarsBalanceModal-module__sectionTitle\",\"tos\":\"StarsBalanceModal-module__tos\",\"logo\":\"StarsBalanceModal-module__logo\",\"logoBackground\":\"StarsBalanceModal-module__logoBackground\",\"headerHext\":\"StarsBalanceModal-module__headerHext\",\"description\":\"StarsBalanceModal-module__description\",\"header\":\"StarsBalanceModal-module__header\",\"starHeaderText\":\"StarsBalanceModal-module__starHeaderText\",\"botItem\":\"StarsBalanceModal-module__botItem\",\"hiddenHeader\":\"StarsBalanceModal-module__hiddenHeader\",\"closeButton\":\"StarsBalanceModal-module__closeButton\",\"balance\":\"StarsBalanceModal-module__balance\",\"smallerText\":\"StarsBalanceModal-module__smallerText\",\"balanceBottom\":\"StarsBalanceModal-module__balanceBottom\",\"modalBalance\":\"StarsBalanceModal-module__modalBalance\",\"starButton\":\"StarsBalanceModal-module__starButton\",\"paymentContent\":\"StarsBalanceModal-module__paymentContent\",\"paymentImages\":\"StarsBalanceModal-module__paymentImages\",\"paymentPhoto\":\"StarsBalanceModal-module__paymentPhoto\",\"avatarStar\":\"StarsBalanceModal-module__avatarStar\",\"paymentImageBackground\":\"StarsBalanceModal-module__paymentImageBackground\",\"paymentButton\":\"StarsBalanceModal-module__paymentButton\",\"paymentButtonStar\":\"StarsBalanceModal-module__paymentButtonStar\",\"transactions\":\"StarsBalanceModal-module__transactions\",\"subscriptions\":\"StarsBalanceModal-module__subscriptions\",\"tabs\":\"StarsBalanceModal-module__tabs\",\"disclaimer\":\"StarsBalanceModal-module__disclaimer\",\"amountBadge\":\"StarsBalanceModal-module__amountBadge\",\"loadMore\":\"StarsBalanceModal-module__loadMore\",\"loadMoreIcon\":\"StarsBalanceModal-module__loadMoreIcon\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"StarsGiftModal-module__modalDialog\",\"content\":\"StarsGiftModal-module__content\",\"main\":\"StarsGiftModal-module__main\",\"headerInfo\":\"StarsGiftModal-module__headerInfo\",\"logo\":\"StarsGiftModal-module__logo\",\"logoBackground\":\"StarsGiftModal-module__logoBackground\",\"description\":\"StarsGiftModal-module__description\",\"section\":\"StarsGiftModal-module__section\",\"header\":\"StarsGiftModal-module__header\",\"starHeaderText\":\"StarsGiftModal-module__starHeaderText\",\"hiddenHeader\":\"StarsGiftModal-module__hiddenHeader\",\"closeButton\":\"StarsGiftModal-module__closeButton\",\"avatar\":\"StarsGiftModal-module__avatar\",\"center\":\"StarsGiftModal-module__center\",\"secondaryInfo\":\"StarsGiftModal-module__secondaryInfo\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsSubscriptionItem-module__root\",\"info\":\"StarsSubscriptionItem-module__info\",\"subtitle\":\"StarsSubscriptionItem-module__subtitle\",\"status\":\"StarsSubscriptionItem-module__status\",\"statusPricing\":\"StarsSubscriptionItem-module__statusPricing\",\"amount\":\"StarsSubscriptionItem-module__amount\",\"title\":\"StarsSubscriptionItem-module__title\",\"description\":\"StarsSubscriptionItem-module__description\",\"statusPeriod\":\"StarsSubscriptionItem-module__statusPeriod\",\"statusEnded\":\"StarsSubscriptionItem-module__statusEnded\",\"preview\":\"StarsSubscriptionItem-module__preview\",\"subscriptionStar\":\"StarsSubscriptionItem-module__subscriptionStar\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"StarsSubscriptionModal-module__modal\",\"header\":\"StarsSubscriptionModal-module__header\",\"title\":\"StarsSubscriptionModal-module__title\",\"amount\":\"StarsSubscriptionModal-module__amount\",\"footer\":\"StarsSubscriptionModal-module__footer\",\"starsBackground\":\"StarsSubscriptionModal-module__starsBackground\",\"avatarWrapper\":\"StarsSubscriptionModal-module__avatarWrapper\",\"subscriptionStar\":\"StarsSubscriptionModal-module__subscriptionStar\",\"amountStar\":\"StarsSubscriptionModal-module__amountStar\",\"secondary\":\"StarsSubscriptionModal-module__secondary\",\"danger\":\"StarsSubscriptionModal-module__danger\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"PaidMediaThumb-module__root\",\"preview\":\"PaidMediaThumb-module__preview\",\"count\":\"PaidMediaThumb-module__count\",\"thumb\":\"PaidMediaThumb-module__thumb\",\"noOutline\":\"PaidMediaThumb-module__noOutline\",\"itemCount1\":\"PaidMediaThumb-module__itemCount1\",\"itemCount2\":\"PaidMediaThumb-module__itemCount2\",\"itemCount3\":\"PaidMediaThumb-module__itemCount3\",\"blurry\":\"PaidMediaThumb-module__blurry\",\"full\":\"PaidMediaThumb-module__full\",\"fadeIn\":\"PaidMediaThumb-module__fadeIn\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsTransactionItem-module__root\",\"info\":\"StarsTransactionItem-module__info\",\"stars\":\"StarsTransactionItem-module__stars\",\"amount\":\"StarsTransactionItem-module__amount\",\"title\":\"StarsTransactionItem-module__title\",\"description\":\"StarsTransactionItem-module__description\",\"date\":\"StarsTransactionItem-module__date\",\"positive\":\"StarsTransactionItem-module__positive\",\"negative\":\"StarsTransactionItem-module__negative\",\"preview\":\"StarsTransactionItem-module__preview\",\"subscriptionStar\":\"StarsTransactionItem-module__subscriptionStar\",\"uniqueGiftBackground\":\"StarsTransactionItem-module__uniqueGiftBackground\",\"uniqueGift\":\"StarsTransactionItem-module__uniqueGift\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"StarsTransactionModal-module__modal\",\"positive\":\"StarsTransactionModal-module__positive\",\"negative\":\"StarsTransactionModal-module__negative\",\"header\":\"StarsTransactionModal-module__header\",\"uniqueGift\":\"StarsTransactionModal-module__uniqueGift\",\"amount\":\"StarsTransactionModal-module__amount\",\"title\":\"StarsTransactionModal-module__title\",\"description\":\"StarsTransactionModal-module__description\",\"tid\":\"StarsTransactionModal-module__tid\",\"footer\":\"StarsTransactionModal-module__footer\",\"starsBackground\":\"StarsTransactionModal-module__starsBackground\",\"copyIcon\":\"StarsTransactionModal-module__copyIcon\",\"mediaPreview\":\"StarsTransactionModal-module__mediaPreview\",\"subtitle\":\"StarsTransactionModal-module__subtitle\",\"starGiftSticker\":\"StarsTransactionModal-module__starGiftSticker\"};"],"names":["default","StarsGiftModal","StarsGiftingPickerModal","StarsBalanceModal","StarPaymentModal","StarsTransactionInfoModal","StarsSubscriptionModal","PaidReactionModal","GiftModal","GiftRecipientPicker","GiftInfoModal","GiftUpgradeModal","GiftWithdrawModal","React","buildClassName","styles","BadgeButton","children","className","onClick","createElement","root","clickable","memo","useMemo","useState","getActions","getGlobal","withGlobal","SERVICE_NOTIFICATIONS_USER_ID","filterUsersByName","isDeletedUser","isUserBot","unique","sortChatIds","useLastCallback","useOldLang","PeerPicker","PickerModal","isOpen","currentUserId","activeListIds","archivedListIds","userIds","closeStarsGiftingPickerModal","openStarsGiftModal","oldLang","searchQuery","setSearchQuery","displayedUserIds","usersById","users","byId","combinedIds","filteredContactIds","filter","id","user","isSupport","handleSelectedUserIdsChange","newSelectedId","length","forUserId","onClose","title","hasCloseButton","shouldAdaptToSearch","withFixedHeight","confirmButtonText","onEnter","picker","itemIds","filterValue","filterPlaceholder","onFilterChange","isSearchable","withDefaultPadding","withStatus","onSelectedIdChange","global","chats","listIds","contactList","active","archived","STARS_CURRENCY_CODE","getPeerTitle","isApiPeerUser","selectPeer","selectTabState","selectTheme","buildStyle","formatCurrency","formatStarsAsIcon","useCustomBackground","useLang","PremiumProgress","ActionMessage","Button","Link","ListItem","Switcher","TextArea","LIMIT_DISPLAY_THRESHOLD","GiftComposer","gift","peerId","peer","captionLimit","theme","isBackgroundBlurred","patternColor","backgroundColor","customBackground","isPaymentFormLoading","sendStarGift","openInvoice","openGiftUpgradeModal","lang","giftMessage","setGiftMessage","shouldHideName","setShouldHideName","shouldPayForUpgrade","setShouldPayForUpgrade","customBackgroundValue","isStarGift","isPeerUser","localMessage","chatId","isOutgoing","senderId","date","Math","floor","Date","now","content","action","targetChatId","mediaType","text","type","amount","currency","months","message","translationValues","stars","starGift","undefined","isNameHidden","starsToConvert","canUpgrade","alreadyPaidUpgradeStars","upgradeStars","isSaved","fromId","handleGiftMessageChange","e","target","value","handleShouldHideNameChange","handleShouldPayForUpgradeChange","handleOpenUpgradePreview","giftId","handleMainButtonClick","shouldUpgrade","option","renderOptionsSection","symbolsLeft","optionsSection","messageInput","onChange","label","maxLength","maxLengthIndicator","toString","switcher","narrow","ripple","switcherStarIcon","withNodes","checked","description","link","isPrimary","receiver","renderFooter","asFont","footer","availabilityRemains","progress","availabilityTotal","rightText","count","leftText","limited","mainButton","isLoading","bgClassName","background","withTransition","customBgImage","customBgColor","blurred","actionMessageView","inert","style","key","spacer","isBlurred","settings","themes","tabState","appConfig","starGiftMaxMessageLength","selectCanPlayAnimatedEmojis","selectGiftStickerForDuration","formatCurrencyAsString","AnimatedIconFromSticker","GiftRibbon","GIFT_STICKER_SIZE","GiftItemPremium","sticker","canPlayAnimatedEmojis","baseMonthAmount","handleGiftClick","perMonth","discount","ceil","renderMonths","caption","pluralValue","monthsDescription","container","tabIndex","role","play","noLoop","nonInteractive","size","buy","pill","fluid","Boolean","color","percent","useRef","useFlag","useOnIntersect","Icon","GiftItemStar","observeIntersection","openGiftInfoModal","ref","shouldPlay","isLimited","isSoldOut","entry","isIntersecting","withSparkleEffect","name","star","useEffect","getUserFullName","isApiPeerChat","throttle","useCurrentOrPrev","useIntersectionObserver","Avatar","SafeLink","Modal","Transition","BalanceBlock","GiftSendingOptions","StarGiftCategoryList","StarsBackground","AVATAR_SIZE","INTERSECTION_THROTTLE","SCROLL_THROTTLE","runThrottledForScroll","cb","PremiumGiftModal","modal","starGiftsById","starGiftIdsByCategory","starBalance","isSelf","closeGiftModal","requestConfetti","dialogRef","transitionRef","giftHeaderRef","scrollerRef","renderingModal","chat","selectedGift","setSelectedGift","isHeaderHidden","setIsHeaderHidden","isHeaderForStarGifts","setIsHeaderForStarGifts","selectedCategory","setSelectedCategory","filteredGifts","gifts","sort","prevGift","baseGift","reduce","prev","observe","rootRef","throttleMs","isDisabled","showConfetti","dialog","current","top","left","width","height","querySelector","getBoundingClientRect","withStars","isCompleted","handleScroll","currentTarget","scrollTop","headerTop","transitionTop","giftPremiumDescription","url","starGiftDescription","withMarkdown","renderTextFilters","renderGiftPremiumHeader","headerText","center","renderGiftPremiumDescription","renderStarGiftsHeader","renderStarGiftsDescription","starGiftsDescription","renderStarGifts","starGiftsContainer","map","renderPremiumGifts","premiumGiftsGallery","onCategoryChanged","category","handleCloseButtonClick","renderMainScreen","main","onScroll","avatars","logoBackground","src","alt","draggable","activeKey","getCategoryKey","starGiftsTransition","isBackButton","buttonClassName","isSlim","contentClassName","modalDialog","closeButton","round","ariaLabel","balance","header","hiddenHeader","Number","slideClassName","headerSlide","commonHeaderText","transition","forPeerId","starGifts","boostPerSentGift","boostsPerSentGift","idsByCategory","useHorizontalScroll","StarIcon","starCategories","Object","keys","a","b","handleItemClick","renderCategoryName","renderCategoryItem","item","selectedItem","isInteger","list","useTransitionActiveKey","RadialPatternBackground","STICKER_SIZE","UniqueGiftHeader","modelAttribute","backdropAttribute","patternAttribute","subtitle","subtitleColor","textColor","radialPatternBackdrop","backdropColors","centerColor","edgeColor","radialPattern","backgroundColors","patternIcon","transitionSlide","direction","getDays","getServerTime","getGiftAttributes","REM","PasswordForm","FRAGMENT_PEER","isCustomPeer","avatarIcon","customPeerAvatarColor","hasPassword","passwordHint","closeGiftWithdrawModal","clearGiftWithdrawError","processStarGiftWithdrawal","shouldShowPassword","setShouldShowPassword","giftAttributes","exportDelay","canExportAt","max","handleClose","handleSubmit","password","inputGift","Fragment","giftPreview","backdrop","pattern","model","arrow","avatar","number","exportHint","days","noPassword","shouldShowSubmit","placeholder","error","errorKey","withRegular","clearError","hint","isPasswordVisible","shouldResetValue","onChangePasswordVisibility","submitLabel","onSubmit","byKey","twoFaSettings","TME_LINK_PREFIX","getHasAdminRight","copyTextToClipboard","formatDateTimeToString","formatStarsAsText","CUSTOM_PEER_HIDDEN","formatInteger","formatPercent","getStickerFromGift","renderTextWithEntities","ConfirmDialog","DropdownMenu","MenuItem","TableInfoModal","fromPeer","targetPeer","starGiftMaxConvertPeriod","hasAdminRights","closeGiftInfoModal","changeGiftVisibility","convertGiftToStars","openChatWithInfo","focusMessage","showNotification","openChatWithDraft","openGiftWithdrawModal","isConvertConfirmOpen","openConvertConfirm","closeConvertConfirm","renderingFromPeer","renderingTargetPeer","isTargetChat","typeGift","isSavedGift","savedGift","isSender","canConvertDifference","conversionLeft","giftSticker","canFocusUpgrade","upgradeMsgId","canUpdate","starGiftUniqueLink","slug","handleCopyLink","handleLinkShare","handleWithdraw","handleFocusUpgraded","messageId","handleTriggerVisibility","isUnsaved","shouldUnsave","handleConvertToStars","handleOpenUpgradeModal","SettingsMenuButton","onTrigger","isMenuOpen","renderFooterButton","isShiny","modalData","isConverted","isVisibleForMe","getTitle","isUniqueGift","contextMenu","trigger","positionX","icon","uniqueGiftModalHeader","modalHeader","modalCloseButton","uniqueGiftHeader","uniqueGift","regularHeader","soldOut","tableData","push","unknown","titleKey","code","firstSaleDate","lastSaleDate","starsValue","giftValue","starAmountIcon","total","ownerName","ownerAddress","ownerId","originalDetails","copyIcon","uniqueAttribute","rarityPercent","issued","issuedCount","totalCount","recipientId","openChat","recipient","sender","formattedDate","recipientLink","senderLink","footerDescription","hasBackdrop","confirmHandler","closeGiftRecipientPicker","openGiftModal","idsWithSelf","concat","userId","selectedId","forceShowSelf","userSelectionLimit","giveawayAddPeersMax","ApiMediaFormat","getStickerMediaHash","fetch","useInterval","Checkbox","TableAboutModal","PREVIEW_UPDATE_INTERVAL","closeGiftUpgradeModal","upgradeGift","renderingRecipient","shouldKeepOriginalDetails","setShouldKeepOriginalDetails","previewAttributes","setPreviewAttributes","handleUpgrade","updatePreviewAttributes","sampleAttributes","getRandomAttributes","attributes","patternStickers","attr","modelStickers","mediaHashes","forEach","hash","BlobUrl","listItemData","footerButton","onCheck","previousSelection","models","patterns","backdrops","randomModel","random","randomPattern","randomBackdrop","STARS_ICON_PLACEHOLDER","getChatTitle","selectChat","selectChatMessage","selectUser","renderText","PeerBadge","Separator","StarSlider","MAX_TOP_REACTORS","DEFAULT_STARS_AMOUNT","MAX_REACTION_AMOUNT","ANONYMOUS_PEER","maxAmount","defaultPrivacy","closePaidReactionModal","addLocalPaidReaction","starsAmount","setStarsAmount","isTouched","markTouched","unmarkTouched","shouldShowUp","setShouldShowUp","handleAnonimityChange","handleAmountChange","currentReactor","reactions","topReactors","find","reactor","isMe","isAnonymous","handleSend","isPrivate","all","result","hasMe","localAmount","me","slice","chatTitle","hasAbsoluteCloseButton","modalBalance","slider","defaultValue","maxValue","topLabel","countText","topPeer","badgeText","badgeIcon","badgeClassName","topBadge","checkbox","specialReplacement","buttonStar","disclaimer","paidReactionMaxAmount","paidReactionPrivacy","requestMeasure","requestMutation","useEffectOnce","useResizeObserver","AnimatedCounter","Sparkles","DEFAULT_POINTS","floatingBadgeRef","points","i","setValue","getProgress","updateSafeBadgePosition","badge","parent","parentElement","safeMinX","offsetLeft","offsetWidth","safeMaxX","setProperty","handleChange","event","newValue","getValue","floatingBadgeWrapper","floatingBadge","floatingBadgeText","floatingBadgeIcon","floatingBadgeTriangle","viewBox","fill","x1","x2","y1","y2","offset","d","preset","sparkles","min","step","pointIndex","findIndex","point","prevPoint","nextPoint","formatStarsAmount","smallerText","balanceBottom","selectIsPremiumPurchaseBlocked","InfiniteScroll","TabList","StarTopupOptionList","StarsSubscriptionItem","StarsTransactionItem","StarLogo","TRANSACTION_TYPES","TRANSACTION_TABS_KEYS","TRANSACTION_ITEM_CLASS","SUBSCRIPTION_PURPOSE","starsBalanceState","canBuyPremium","closeStarsBalanceModal","loadStarsTransactions","loadStarsSubscriptions","openStarsGiftingPickerModal","history","subscriptions","setHeaderHidden","selectedTabIndex","setSelectedTabIndex","areBuyOptionsShown","showBuyOptions","hideBuyOptions","originStarsPayment","originReaction","originGift","topup","shouldOpenOnBuy","ongoingTransactionAmount","form","invoice","totalAmount","subscriptionInfo","subscriptionPricing","balanceNeeded","starsNeeded","starsNeededText","channel","bot","botId","purpose","shouldShowItems","transactions","shouldSuggestGifting","transactionTabs","tosText","parts","split","handleLoadMoreTransactions","handleLoadMoreSubscriptions","openStarsGiftingPickerModalHandler","handleBuyStars","starHeaderText","section","logo","starButton","topupOptions","options","tos","sectionTitle","subscription","nextOffset","isText","disabled","noForcedUpperCase","loadMore","loadMoreIcon","isRtl","renderCount","shouldRestoreHeight","onLoadMore","items","scrollContainerClosest","itemSelector","noFastList","transaction","isRefund","tabs","tabClassName","tab","activeTab","onSwitchTab","getCustomPeerFromInvite","usePrevious","PeerChip","PaidMediaThumb","paidMediaMessage","paidMediaChat","closeStarsPaymentModal","openStarsBalanceModal","sendStarPaymentForm","markLoading","unmarkLoading","inputInvoice","prevModal","isBotSubscription","subscriptionPeriod","canShowPeerItem","photo","descriptionText","botName","starsText","extendedMedia","paidMedia","areAllPhotos","every","media","duration","areAllVideos","mediaText","channelTitle","disclaimerText","inviteCustomPeer","handlePayment","paymentContent","paymentImages","dir","paymentPhoto","avatarStar","avatarWebPhoto","avatarSize","amountBadge","paymentImageBackground","botItem","paymentButton","messageInputInvoice","isPaidMedia","closeStarsGiftModal","selectedOption","setSelectedOption","handleClick","renderGiftTitle","bottomText","headerInfo","starsGiftOptions","secondaryInfo","buildStarsTransactionCustomPeer","getTransactionTitle","starRefCommision","isGiftUpgrade","isReaction","giveawayPostId","isMyGift","isGift","isNegativeStarsAmount","customPeer","nanos","formatDateToString","useSelector","selectProvidedPeer","openStarsSubscriptionModal","pricing","until","isCancelled","hasExpired","preview","subscriptionStar","info","webPhoto","status","statusEnded","statusPricing","statusPeriod","closeStarsSubscriptionModal","fulfillStarsSubscription","changeStarsSubscription","checkChatInvite","loadStarStatus","buttonState","canRefulfill","isActive","canRestart","chatInviteHash","invoiceSlug","handleButtonClick","starModalData","hasBotCancelled","avatarWrapper","starsBackground","amountStar","footerTos","secondary","danger","prevModalData","renderingModalData","getMediaHash","getMediaThumbUri","useMedia","MediaSpoiler","THUMB_LIMIT","PREVIEW_THUMB_LIMIT","isTransactionPreview","isLocked","reverse","arr","realIndex","thumb","isVisible","thumbDataUri","thumbnail","dataUri","SingleMediaThumb","noOutline","boughtMedia","index","video","mediaHash","mediaBlob","blurry","full","formatStarsTransactionAmount","CUSTOM_PEER_PREMIUM","UNIQUE_GIFT_STICKER_SIZE","selectOptionalPeer","openStarsTransactionModal","transactionPeer","uniqueGiftSticker","data","avatarPeer","subtitleKey","hasFailed","isPending","previewContent","uniqueGiftBackground","negative","positive","MediaViewerOrigin","getMessageLink","selectGiftStickerForStars","StarsTransactionModal","topSticker","openMediaViewer","closeStarsTransactionModal","handleOpenMedia","origin","StarsTransaction","standaloneMedia","flatMap","values","toName","getStarsPeerTitleKey","messageLink","giveawayMessageLink","mediaAmount","m","shouldDisplayAvatar","mediaPreview","peerLabel","tid","footerText","footerTextParts","buttonText","starCount","starsGiftSticker","deps","noAnimation","didUpdate","CUSTOM_BG_CACHE_NAME","DARK_THEME_PATTERN_COLOR","DEFAULT_PATTERN_COLOR","cacheApi","preloadImage","settingValue","setThemeSettings","startsWith","Type","Blob","then","blob","URL","createObjectURL","catch"],"sourceRoot":""}