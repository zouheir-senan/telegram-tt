{"version":3,"file":"src_serviceWorker_index_ts.3c48e9e67c9fa7ce7ccf.js","mappings":"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AAQ,CAAC,EAAE,CAAC,CAAC3G,KAAK,CAAC,CAAC,CAAC;AACtE;;;;;;UCFA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;;;;WClCA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WClBA;;WAEA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,aAAa;WACb;WACA;WACA;WACA;;WAEA;WACA;WACA;;WAEA;;WAEA;;;;;WCpCA;WACA;WACA;WACA;;;;;UEHA;UACA","sources":["webpack://telegram-t/./src/serviceWorker/assetCache.ts","webpack://telegram-t/./src/serviceWorker/download.ts","webpack://telegram-t/./src/serviceWorker/index.ts","webpack://telegram-t/./src/serviceWorker/progressive.ts","webpack://telegram-t/./src/serviceWorker/pushNotification.ts","webpack://telegram-t/./src/serviceWorker/share.ts","webpack://telegram-t/./src/util/Deferred.ts","webpack://telegram-t/./src/util/generateUniqueId.ts","webpack://telegram-t/webpack/bootstrap","webpack://telegram-t/webpack/runtime/chunk loaded","webpack://telegram-t/webpack/runtime/define property getters","webpack://telegram-t/webpack/runtime/ensure chunk","webpack://telegram-t/webpack/runtime/get javascript chunk filename","webpack://telegram-t/webpack/runtime/get mini-css chunk filename","webpack://telegram-t/webpack/runtime/global","webpack://telegram-t/webpack/runtime/hasOwnProperty shorthand","webpack://telegram-t/webpack/runtime/make namespace object","webpack://telegram-t/webpack/runtime/publicPath","webpack://telegram-t/webpack/runtime/importScripts chunk loading","webpack://telegram-t/webpack/runtime/startup chunk dependencies","webpack://telegram-t/webpack/before-startup","webpack://telegram-t/webpack/startup","webpack://telegram-t/webpack/after-startup"],"sourcesContent":["import { ASSET_CACHE_NAME } from '../config';\nimport { pause } from '../util/schedulers';\n\ndeclare const self: ServiceWorkerGlobalScope;\n\n// An attempt to fix freezing UI on iOS\nconst TIMEOUT = 3000;\n\nexport async function respondWithCacheNetworkFirst(e: FetchEvent) {\n  const remote = await withTimeout(() => fetch(e.request), TIMEOUT);\n  if (!remote?.ok) {\n    return respondWithCache(e);\n  }\n\n  const toCache = remote.clone();\n  self.caches.open(ASSET_CACHE_NAME).then((cache) => {\n    return cache?.put(e.request, toCache);\n  });\n\n  return remote;\n}\n\nexport async function respondWithCache(e: FetchEvent) {\n  const cacheResult = await withTimeout(async () => {\n    const cache = await self.caches.open(ASSET_CACHE_NAME);\n    const cached = await cache.match(e.request);\n\n    return { cache, cached };\n  }, TIMEOUT);\n\n  const { cache, cached } = cacheResult || {};\n\n  if (cache && cached) {\n    if (cached.ok) {\n      return cached;\n    } else {\n      await cache.delete(e.request);\n    }\n  }\n\n  const remote = await fetch(e.request);\n\n  if (remote.ok && cache) {\n    cache.put(e.request, remote.clone());\n  }\n\n  return remote;\n}\n\nasync function withTimeout<T>(cb: () => Promise<T>, timeout: number) {\n  let isResolved = false;\n\n  try {\n    return await Promise.race([\n      pause(timeout).then(() => (isResolved ? undefined : Promise.reject(new Error('TIMEOUT')))),\n      cb(),\n    ]);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n    return undefined;\n  } finally {\n    isResolved = true;\n  }\n}\n\nexport function clearAssetCache() {\n  return self.caches.delete(ASSET_CACHE_NAME);\n}\n","import { DEBUG } from '../config';\nimport { requestPart } from './progressive';\n\nconst DOWNLOAD_PART_SIZE = 1024 * 1024;\nconst TEST_PART_SIZE = 64 * 1024;\n\nconst QUEUE_SIZE = 8;\n\nclass FilePartQueue<T> {\n  queue: Promise<T>[];\n\n  constructor() {\n    this.queue = [];\n  }\n\n  push(task: Promise<T>) {\n    this.queue.push(task);\n  }\n\n  async pop(): Promise<T> {\n    const result = await this.queue.shift()!;\n    return result;\n  }\n\n  get size() {\n    return this.queue.length;\n  }\n}\n\nexport async function respondForDownload(e: FetchEvent) {\n  const { url } = e.request;\n\n  let partInfo;\n  try {\n    partInfo = await requestPart(e, { url, start: 0, end: TEST_PART_SIZE });\n  } catch (err) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error('FETCH DOWNLOAD', err);\n    }\n  }\n\n  if (!partInfo) {\n    return new Response('', {\n      status: 500,\n      statusText: 'Failed to fetch file to download',\n    });\n  }\n\n  const matchedFilename = e.request.url.match(/filename=(.*)/);\n  const filenameHeader = matchedFilename ? `filename=\"${decodeURIComponent(matchedFilename[1])}\"` : '';\n  const { fullSize, mimeType } = partInfo;\n\n  const headers: [string, string][] = [\n    ['Content-Length', String(fullSize)],\n    ['Content-Type', mimeType],\n    ['Content-Disposition', `attachment; ${filenameHeader}`],\n  ];\n\n  const queue = new FilePartQueue<ArrayBuffer | undefined>();\n  const enqueue = (offset: number) => {\n    queue.push(requestPart(e, {\n      url, start: offset, end: offset + DOWNLOAD_PART_SIZE - 1,\n    })\n      .then((part) => part?.arrayBuffer));\n    return offset + DOWNLOAD_PART_SIZE;\n  };\n  let lastOffset = 0;\n  const stream = new ReadableStream({\n    start() {\n      for (let i = 0; i < QUEUE_SIZE; i++) {\n        if (lastOffset >= fullSize) break;\n        lastOffset = enqueue(lastOffset);\n      }\n    },\n\n    async pull(controller) {\n      const buffer = await queue.pop();\n      if (!buffer) {\n        controller.close();\n        return;\n      }\n      controller.enqueue(new Uint8Array(buffer));\n\n      if (buffer.byteLength < DOWNLOAD_PART_SIZE) {\n        controller.close();\n        return;\n      }\n\n      if (lastOffset < fullSize) {\n        lastOffset = enqueue(lastOffset);\n      }\n    },\n  });\n\n  return new Response(stream, {\n    status: 200,\n    statusText: 'OK',\n    headers,\n  });\n}\n","import { DEBUG, ELECTRON_HOST_URL, IS_PACKAGED_ELECTRON } from '../config';\nimport { pause } from '../util/schedulers';\nimport { clearAssetCache, respondWithCache, respondWithCacheNetworkFirst } from './assetCache';\nimport { respondForDownload } from './download';\nimport { respondForProgressive } from './progressive';\nimport {\n  handleClientMessage as handleNotificationMessage,\n  handleNotificationClick,\n  handlePush,\n} from './pushNotification';\nimport { handleClientMessage as handleShareMessage, respondForShare } from './share';\n\ndeclare const self: ServiceWorkerGlobalScope;\n\nconst RE_NETWORK_FIRST_ASSETS = /\\.(wasm|html)$/;\nconst RE_CACHE_FIRST_ASSETS = /[\\da-f]{20}.*\\.(js|css|woff2?|svg|png|jpg|jpeg|tgs|json|wasm)$/;\nconst ACTIVATE_TIMEOUT = 3000;\n\nself.addEventListener('install', (e) => {\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('ServiceWorker installed');\n  }\n\n  // Activate worker immediately\n  e.waitUntil(self.skipWaiting());\n});\n\nself.addEventListener('activate', (e) => {\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('ServiceWorker activated');\n  }\n\n  e.waitUntil(\n    Promise.race([\n      // An attempt to fix freezing UI on iOS\n      pause(ACTIVATE_TIMEOUT),\n      Promise.all([\n        clearAssetCache(),\n        // Become available to all pages\n        self.clients.claim(),\n      ]),\n    ]),\n  );\n});\n\nself.addEventListener('fetch', (e: FetchEvent) => {\n  const { url } = e.request;\n  const scope = IS_PACKAGED_ELECTRON ? ELECTRON_HOST_URL : self.registration.scope;\n  if (!url.startsWith(scope)) {\n    return false;\n  }\n\n  const { pathname, protocol } = new URL(url);\n  const { pathname: scopePathname } = new URL(scope);\n\n  if (pathname.includes('/progressive/')) {\n    e.respondWith(respondForProgressive(e));\n    return true;\n  }\n\n  if (pathname.includes('/download/')) {\n    e.respondWith(respondForDownload(e));\n    return true;\n  }\n\n  if (pathname.includes('/share/')) {\n    e.respondWith(respondForShare(e));\n  }\n\n  if (protocol === 'http:' || protocol === 'https:') {\n    if (pathname === scopePathname || pathname.match(RE_NETWORK_FIRST_ASSETS)) {\n      e.respondWith(respondWithCacheNetworkFirst(e));\n      return true;\n    }\n\n    if (pathname.match(RE_CACHE_FIRST_ASSETS)) {\n      e.respondWith(respondWithCache(e));\n      return true;\n    }\n  }\n\n  return false;\n});\n\nself.addEventListener('push', handlePush);\nself.addEventListener('notificationclick', handleNotificationClick);\nself.addEventListener('message', (event) => {\n  handleNotificationMessage(event);\n  handleShareMessage(event);\n});\n","import {\n  DEBUG,\n  MEDIA_CACHE_MAX_BYTES,\n  MEDIA_PROGRESSIVE_CACHE_DISABLED,\n  MEDIA_PROGRESSIVE_CACHE_NAME,\n} from '../config';\nimport generateUniqueId from '../util/generateUniqueId';\nimport { pause } from '../util/schedulers';\n\ndeclare const self: ServiceWorkerGlobalScope;\n\ntype PartInfo = {\n  type: 'PartInfo';\n  arrayBuffer: ArrayBuffer;\n  mimeType: 'string';\n  fullSize: number;\n};\n\ntype RequestStates = {\n  resolve: (response: PartInfo) => void;\n  reject: () => void;\n};\n\nconst MB = 1024 * 1024;\nconst DEFAULT_PART_SIZE = 0.5 * MB;\nconst MAX_END_TO_CACHE = 2 * MB - 1; // We only cache the first 2 MB of each file\nconst PART_TIMEOUT = 60000;\n\nconst requestStates = new Map<string, RequestStates>();\n\nexport async function respondForProgressive(e: FetchEvent) {\n  const { url } = e.request;\n  const range = e.request.headers.get('range');\n  const bytes = /^bytes=(\\d+)-(\\d+)?$/g.exec(range || '')!;\n  const start = Number(bytes[1]);\n  const originalEnd = Number(bytes[2]);\n\n  let end = originalEnd;\n  if (!end || (end - start + 1) > DEFAULT_PART_SIZE) {\n    end = start + DEFAULT_PART_SIZE - 1;\n  }\n\n  // Optimization for Safari\n  if (start === 0 && end === 1) {\n    const match = e.request.url.match(/fileSize=(\\d+)&mimeType=([\\w/]+)/);\n    const fileSize = match && Number(match[1]);\n    const mimeType = match?.[2];\n\n    if (fileSize && mimeType) {\n      return new Response(new Uint8Array(2).buffer, {\n        status: 206,\n        statusText: 'Partial Content',\n        headers: [\n          ['Content-Range', `bytes 0-1/${fileSize}`],\n          ['Accept-Ranges', 'bytes'],\n          ['Content-Length', '2'],\n          ['Content-Type', mimeType],\n        ],\n      });\n    }\n  }\n\n  const cacheKey = `${url}?start=${start}&end=${end}`;\n  const [cachedArrayBuffer, cachedHeaders] = !MEDIA_PROGRESSIVE_CACHE_DISABLED ? await fetchFromCache(cacheKey) : [];\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log(\n      `FETCH PROGRESSIVE ${cacheKey} (request: ${start}-${originalEnd}) CACHED: ${Boolean(cachedArrayBuffer)}`,\n    );\n  }\n\n  if (cachedArrayBuffer) {\n    return new Response(cachedArrayBuffer, {\n      status: 206,\n      statusText: 'Partial Content',\n      headers: cachedHeaders,\n    });\n  }\n\n  let partInfo;\n  try {\n    partInfo = await requestPart(e, { url, start, end });\n  } catch (err) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error('FETCH PROGRESSIVE', err);\n    }\n  }\n\n  if (!partInfo) {\n    return new Response('', {\n      status: 500,\n      statusText: 'Failed to fetch progressive part',\n    });\n  }\n\n  const { arrayBuffer, fullSize, mimeType } = partInfo;\n\n  const partSize = Math.min(end - start + 1, arrayBuffer.byteLength);\n  end = start + partSize - 1;\n  const arrayBufferPart = arrayBuffer.slice(0, partSize);\n  const headers: [string, string][] = [\n    ['Content-Range', `bytes ${start}-${end}/${fullSize}`],\n    ['Accept-Ranges', 'bytes'],\n    ['Content-Length', String(partSize)],\n    ['Content-Type', mimeType],\n  ];\n\n  if (!MEDIA_PROGRESSIVE_CACHE_DISABLED && partSize <= MEDIA_CACHE_MAX_BYTES && end < MAX_END_TO_CACHE) {\n    saveToCache(cacheKey, arrayBufferPart, headers);\n  }\n\n  return new Response(arrayBufferPart, {\n    status: 206,\n    statusText: 'Partial Content',\n    headers,\n  });\n}\n\n// We can not cache 206 responses: https://github.com/GoogleChrome/workbox/issues/1644#issuecomment-638741359\nasync function fetchFromCache(cacheKey: string) {\n  const cache = await self.caches.open(MEDIA_PROGRESSIVE_CACHE_NAME);\n\n  return Promise.all([\n    cache.match(`${cacheKey}&type=arrayBuffer`).then((r) => (r ? r.arrayBuffer() : undefined)),\n    cache.match(`${cacheKey}&type=headers`).then((r) => (r ? r.json() : undefined)),\n  ]);\n}\n\nasync function saveToCache(cacheKey: string, arrayBuffer: ArrayBuffer, headers: HeadersInit) {\n  const cache = await self.caches.open(MEDIA_PROGRESSIVE_CACHE_NAME);\n\n  return Promise.all([\n    cache.put(new Request(`${cacheKey}&type=arrayBuffer`), new Response(arrayBuffer)),\n    cache.put(new Request(`${cacheKey}&type=headers`), new Response(JSON.stringify(headers))),\n  ]);\n}\n\nexport async function requestPart(\n  e: FetchEvent,\n  params: { url: string; start: number; end: number },\n): Promise<PartInfo | undefined> {\n  const isDownload = params.url.includes('/download/');\n  const client = isDownload ? (await self.clients.matchAll())\n    .find((c) => c.type === 'window' && c.frameType === 'top-level')\n    : await (self.clients.get(e.clientId));\n  if (!client) {\n    return undefined;\n  }\n\n  const messageId = generateUniqueId();\n  const requestState = {} as RequestStates;\n\n  let isResolved = false;\n  const promise = Promise.race([\n    pause(PART_TIMEOUT).then(() => (isResolved ? undefined : Promise.reject(new Error('ERROR_PART_TIMEOUT')))),\n    new Promise<PartInfo>((resolve, reject) => {\n      Object.assign(requestState, { resolve, reject });\n    }),\n  ]);\n\n  requestStates.set(messageId, requestState);\n  promise\n    .catch(() => undefined)\n    .finally(() => {\n      requestStates.delete(messageId);\n      isResolved = true;\n    });\n\n  client.postMessage({\n    type: 'requestPart',\n    messageId,\n    params,\n  });\n\n  return promise;\n}\n\nself.addEventListener('message', (e) => {\n  const { type, messageId, result } = e.data as {\n    type: string;\n    messageId: string;\n    result: PartInfo;\n  };\n\n  if (type === 'partResponse') {\n    const requestState = requestStates.get(messageId);\n    if (requestState) {\n      requestState.resolve(result);\n    }\n  }\n});\n","import { APP_NAME, DEBUG, DEBUG_MORE } from '../config';\n\ndeclare const self: ServiceWorkerGlobalScope;\n\nenum Boolean {\n  True = '1',\n  False = '0',\n}\n\ntype PushData = {\n  custom: {\n    msg_id?: string;\n    silent?: string;\n    channel_id?: string;\n    chat_id?: string;\n    from_id?: string;\n  };\n  mute: Boolean;\n  badge: Boolean;\n  loc_key: string;\n  loc_args: string[];\n  random_id: number;\n  title: string;\n  description: string;\n};\n\ntype NotificationData = {\n  messageId?: number;\n  chatId?: string;\n  title: string;\n  body: string;\n  isSilent?: boolean;\n  icon?: string;\n  reaction?: string;\n  shouldReplaceHistory?: boolean;\n};\n\ntype FocusMessageData = {\n  chatId?: string;\n  messageId?: number;\n  reaction?: string;\n  shouldReplaceHistory?: boolean;\n};\n\ntype CloseNotificationData = {\n  lastReadInboxMessageId?: number;\n  chatId: string;\n};\n\nlet lastSyncAt = new Date().valueOf();\nconst shownNotifications = new Set();\nconst clickBuffer: Record<string, NotificationData> = {};\n\nfunction getPushData(e: PushEvent | Notification): PushData | undefined {\n  try {\n    return e.data.json();\n  } catch (error) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.log('[SW] Unable to parse push notification data', e.data);\n    }\n    return undefined;\n  }\n}\n\nfunction getChatId(data: PushData) {\n  if (data.custom.from_id) {\n    return data.custom.from_id;\n  }\n\n  // Chats and channels have â€œnegativeâ€ IDs\n  if (data.custom.chat_id || data.custom.channel_id) {\n    return `-${data.custom.chat_id || data.custom.channel_id}`;\n  }\n\n  return undefined;\n}\n\nfunction getMessageId(data: PushData) {\n  if (!data.custom.msg_id) return undefined;\n  return parseInt(data.custom.msg_id, 10);\n}\n\nfunction getNotificationData(data: PushData): NotificationData {\n  let title = data.title || APP_NAME;\n  const isSilent = data.custom?.silent === Boolean.True;\n  if (isSilent) {\n    title += ' ðŸ”•';\n  }\n  return {\n    chatId: getChatId(data),\n    messageId: getMessageId(data),\n    body: data.description,\n    isSilent,\n    title,\n  };\n}\n\nasync function getClients() {\n  const appUrl = new URL(self.registration.scope).origin;\n  const clients = await self.clients.matchAll({ type: 'window' }) as WindowClient[];\n  return clients.filter((client) => {\n    return new URL(client.url).origin === appUrl;\n  });\n}\n\nasync function playNotificationSound(id: string) {\n  const clients = await getClients();\n  const client = clients[0];\n  if (!client) return;\n  client.postMessage({\n    type: 'playNotificationSound',\n    payload: { id },\n  });\n}\n\nfunction showNotification({\n  chatId,\n  messageId,\n  body,\n  title,\n  icon,\n  reaction,\n  isSilent,\n  shouldReplaceHistory,\n}: NotificationData) {\n  const isFirstBatch = new Date().valueOf() - lastSyncAt < 1000;\n  const tag = String(isFirstBatch ? 0 : chatId || 0);\n  const options: NotificationOptions = {\n    body,\n    data: {\n      chatId,\n      messageId,\n      reaction,\n      count: 1,\n      shouldReplaceHistory,\n    },\n    icon: icon || 'icon-192x192.png',\n    badge: 'icon-192x192.png',\n    tag,\n    // @ts-ignore\n    vibrate: [200, 100, 200],\n  };\n\n  return Promise.all([\n    // TODO Update condition when reaction badges are implemented\n    (!reaction && !isSilent) ? playNotificationSound(String(messageId) || chatId || '') : undefined,\n    self.registration.showNotification(title, options),\n  ]);\n}\n\nasync function closeNotifications({\n  chatId,\n  lastReadInboxMessageId,\n}: CloseNotificationData) {\n  const notifications = await self.registration.getNotifications();\n  const lastMessageId = lastReadInboxMessageId || Number.MAX_VALUE;\n  notifications.forEach((notification) => {\n    if (\n      notification.tag === '0'\n      || (notification.data.chatId === chatId && notification.data.messageId <= lastMessageId)\n    ) {\n      notification.close();\n    }\n  });\n}\n\nexport function handlePush(e: PushEvent) {\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('[SW] Push received event', e);\n    if (e.data) {\n      // eslint-disable-next-line no-console\n      console.log('[SW] Push received with data', e.data.json());\n    }\n  }\n\n  const data = getPushData(e);\n\n  // Do not show muted notifications\n  if (!data || data.mute === Boolean.True) return;\n\n  const notification = getNotificationData(data);\n\n  // Don't show already triggered notification\n  if (shownNotifications.has(notification.messageId)) {\n    shownNotifications.delete(notification.messageId);\n    return;\n  }\n\n  e.waitUntil(showNotification(notification));\n}\n\nasync function focusChatMessage(client: WindowClient, data: FocusMessageData) {\n  if (!data.chatId) return;\n  client.postMessage({\n    type: 'focusMessage',\n    payload: data,\n  });\n  if (!client.focused) {\n    // Catch \"focus not allowed\" DOM Exceptions\n    try {\n      await client.focus();\n    } catch (error) {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.warn('[SW] ', error);\n      }\n    }\n  }\n}\n\nexport function handleNotificationClick(e: NotificationEvent) {\n  const appUrl = self.registration.scope;\n  e.notification.close(); // Android needs explicit close.\n  const { data } = e.notification;\n  const notifyClients = async () => {\n    const clients = await getClients();\n    await Promise.all(clients.map((client) => {\n      clickBuffer[client.id] = data;\n      return focusChatMessage(client, data);\n    }));\n    if (!self.clients.openWindow || clients.length > 0) return undefined;\n    // Store notification data for default client (fix for android)\n    clickBuffer[0] = data;\n    // If there is no opened client we need to open one and wait until it is fully loaded\n    try {\n      const newClient = await self.clients.openWindow(appUrl);\n      if (newClient) {\n        // Store notification data until client is fully loaded\n        clickBuffer[newClient.id] = data;\n      }\n    } catch (error) {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.warn('[SW] ', error);\n      }\n    }\n    return undefined;\n  };\n  e.waitUntil(notifyClients());\n}\n\nexport function handleClientMessage(e: ExtendableMessageEvent) {\n  if (DEBUG_MORE) {\n    // eslint-disable-next-line no-console\n    console.log('[SW] New message from client', e);\n  }\n  if (!e.data) return;\n  const source = e.source as WindowClient;\n  if (e.data.type === 'clientReady') {\n    // focus on chat message when client is fully ready\n    const data = clickBuffer[source.id] || clickBuffer[0];\n    if (data) {\n      delete clickBuffer[source.id];\n      delete clickBuffer[0];\n      e.waitUntil(focusChatMessage(source, data));\n    }\n  }\n  if (e.data.type === 'showMessageNotification') {\n    // store messageId for already shown notification\n    const notification: NotificationData = e.data.payload;\n    e.waitUntil((async () => {\n      // Close existing notification if it is already shown\n      if (notification.chatId) {\n        const notifications = await self.registration.getNotifications({ tag: notification.chatId });\n        notifications.forEach((n) => n.close());\n      }\n      // Mark this notification as shown if it was handled locally\n      shownNotifications.add(notification.messageId);\n      return showNotification(notification);\n    })());\n  }\n\n  if (e.data.type === 'closeMessageNotifications') {\n    e.waitUntil(closeNotifications(e.data.payload));\n  }\n}\n\nself.addEventListener('sync', () => {\n  lastSyncAt = Date.now();\n});\n","import Deferred from '../util/Deferred';\n\ndeclare const self: ServiceWorkerGlobalScope;\n\ntype ShareData = {\n  title?: string;\n  text?: string;\n  url?: string;\n  files?: File[];\n};\n\nconst READY_CLIENT_DEFERREDS = new Map<string, Deferred<void>>();\n\nexport async function respondForShare(e: FetchEvent) {\n  if (e.request.method === 'POST') {\n    try {\n      const formData = await e.request.formData();\n      const data = parseFormData(formData);\n      requestShare(data, e.resultingClientId);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.warn('[SHARE] Failed to parse input data', err);\n    }\n  }\n\n  return Response.redirect('.');\n}\n\nexport function handleClientMessage(e: ExtendableMessageEvent) {\n  const { source, data } = e;\n  if (!source) return;\n\n  if (data.type === 'clientReady') {\n    const { id } = (source as Client);\n    const deferred = READY_CLIENT_DEFERREDS.get(id);\n    if (deferred) {\n      deferred.resolve();\n    } else {\n      READY_CLIENT_DEFERREDS.set(id, Deferred.resolved());\n    }\n  }\n}\n\nasync function requestShare(data: ShareData, clientId: string) {\n  const client = await self.clients.get(clientId);\n  if (!client) {\n    return;\n  }\n\n  await getClientReadyDeferred(clientId);\n\n  client.postMessage({\n    type: 'share',\n    payload: data,\n  });\n}\n\nfunction getClientReadyDeferred(clientId: string) {\n  const deferred = READY_CLIENT_DEFERREDS.get(clientId);\n  if (deferred) {\n    return deferred.promise;\n  }\n\n  const newDeferred = new Deferred<void>();\n  READY_CLIENT_DEFERREDS.set(clientId, newDeferred);\n  return newDeferred.promise;\n}\n\nfunction parseFormData(formData: FormData): ShareData {\n  const files = formData.getAll('files') as File[];\n  const title = formData.get('title') as string;\n  const text = formData.get('text') as string;\n  const url = formData.get('url') as string;\n\n  return {\n    title,\n    text,\n    url,\n    files,\n  };\n}\n","export default class Deferred<T = void> {\n  promise: Promise<T>;\n\n  reject!: (reason?: any) => void;\n\n  resolve!: (value: T | PromiseLike<T>) => void;\n\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.reject = reject;\n      this.resolve = resolve;\n    });\n  }\n\n  static resolved(): Deferred<void>;\n  static resolved<T>(value: T): Deferred<T>;\n  static resolved<T>(value?: T): Deferred<T | void> {\n    const deferred = new Deferred<T | void>();\n    deferred.resolve(value);\n    return deferred;\n  }\n}\n","export default function generateUniqueId() {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [\"src_config_ts-src_util_schedulers_ts\"], () => (__webpack_require__(\"./src/serviceWorker/index.ts\")))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + \"283d6f39991e6fefe2bf\" + \".js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t\"src_serviceWorker_index_ts\": 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunktelegram_t\"] = self[\"webpackChunktelegram_t\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn __webpack_require__.e(\"src_config_ts-src_util_schedulers_ts\").then(next);\n};","","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n",""],"names":["ASSET_CACHE_NAME","pause","TIMEOUT","respondWithCacheNetworkFirst","e","remote","withTimeout","fetch","request","ok","respondWithCache","toCache","clone","self","caches","open","then","cache","put","cacheResult","cached","match","delete","cb","timeout","isResolved","Promise","race","undefined","reject","Error","err","console","error","clearAssetCache","DEBUG","requestPart","DOWNLOAD_PART_SIZE","TEST_PART_SIZE","QUEUE_SIZE","FilePartQueue","constructor","_defineProperty","queue","push","task","pop","result","shift","size","length","respondForDownload","url","partInfo","start","end","Response","status","statusText","matchedFilename","filenameHeader","decodeURIComponent","fullSize","mimeType","headers","String","enqueue","offset","part","arrayBuffer","lastOffset","stream","ReadableStream","i","pull","controller","buffer","close","Uint8Array","byteLength","ELECTRON_HOST_URL","IS_PACKAGED_ELECTRON","respondForProgressive","handleClientMessage","handleNotificationMessage","handleNotificationClick","handlePush","handleShareMessage","respondForShare","RE_NETWORK_FIRST_ASSETS","RE_CACHE_FIRST_ASSETS","ACTIVATE_TIMEOUT","addEventListener","log","waitUntil","skipWaiting","all","clients","claim","scope","registration","startsWith","pathname","protocol","URL","scopePathname","includes","respondWith","event","MEDIA_CACHE_MAX_BYTES","MEDIA_PROGRESSIVE_CACHE_DISABLED","MEDIA_PROGRESSIVE_CACHE_NAME","generateUniqueId","MB","DEFAULT_PART_SIZE","MAX_END_TO_CACHE","PART_TIMEOUT","requestStates","Map","range","get","bytes","exec","Number","originalEnd","fileSize","cacheKey","cachedArrayBuffer","cachedHeaders","fetchFromCache","Boolean","partSize","Math","min","arrayBufferPart","slice","saveToCache","r","json","Request","JSON","stringify","params","isDownload","client","matchAll","find","c","type","frameType","clientId","messageId","requestState","promise","resolve","Object","assign","set","catch","finally","postMessage","data","APP_NAME","DEBUG_MORE","lastSyncAt","Date","valueOf","shownNotifications","Set","clickBuffer","getPushData","getChatId","custom","from_id","chat_id","channel_id","getMessageId","msg_id","parseInt","getNotificationData","title","isSilent","silent","True","chatId","body","description","getClients","appUrl","origin","filter","playNotificationSound","id","payload","showNotification","icon","reaction","shouldReplaceHistory","isFirstBatch","tag","options","count","badge","vibrate","closeNotifications","lastReadInboxMessageId","notifications","getNotifications","lastMessageId","MAX_VALUE","forEach","notification","mute","has","focusChatMessage","focused","focus","warn","notifyClients","map","openWindow","newClient","source","n","add","now","Deferred","READY_CLIENT_DEFERREDS","method","formData","parseFormData","requestShare","resultingClientId","redirect","deferred","resolved","getClientReadyDeferred","newDeferred","files","getAll","text","value","toString","random"],"sourceRoot":""}