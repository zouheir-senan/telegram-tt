{"version":3,"file":"src_lib_lovely-chart_LovelyChart_js.cd62ac30808e64513e4c.js","mappings":"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","sources":["webpack://telegram-t/./src/lib/lovely-chart/Axes.js","webpack://telegram-t/./src/lib/lovely-chart/Header.js","webpack://telegram-t/./src/lib/lovely-chart/LovelyChart.js","webpack://telegram-t/./src/lib/lovely-chart/Minimap.js","webpack://telegram-t/./src/lib/lovely-chart/Projection.js","webpack://telegram-t/./src/lib/lovely-chart/StateManager.js","webpack://telegram-t/./src/lib/lovely-chart/Tools.js","webpack://telegram-t/./src/lib/lovely-chart/Tooltip.js","webpack://telegram-t/./src/lib/lovely-chart/TransitionManager.js","webpack://telegram-t/./src/lib/lovely-chart/Zoomer.js","webpack://telegram-t/./src/lib/lovely-chart/canvas.js","webpack://telegram-t/./src/lib/lovely-chart/captureEvents.js","webpack://telegram-t/./src/lib/lovely-chart/constants.js","webpack://telegram-t/./src/lib/lovely-chart/data.js","webpack://telegram-t/./src/lib/lovely-chart/drawDatasets.js","webpack://telegram-t/./src/lib/lovely-chart/format.js","webpack://telegram-t/./src/lib/lovely-chart/formulas.js","webpack://telegram-t/./src/lib/lovely-chart/minifiers.js","webpack://telegram-t/./src/lib/lovely-chart/preparePoints.js","webpack://telegram-t/./src/lib/lovely-chart/simplify.js","webpack://telegram-t/./src/lib/lovely-chart/skin.js","webpack://telegram-t/./src/lib/lovely-chart/toggleText.js","webpack://telegram-t/./src/lib/lovely-chart/utils.js","webpack://telegram-t/./src/lib/lovely-chart/styles/index.scss?24b3"],"sourcesContent":["import { GUTTER, AXES_FONT, X_AXIS_HEIGHT, X_AXIS_SHIFT_START, PLOT_TOP_PADDING } from './constants';\nimport { formatCryptoValue, humanize } from './format';\nimport { getCssColor } from './skin';\nimport { applyXEdgeOpacity, applyYEdgeOpacity, xScaleLevelToStep, yScaleLevelToStep } from './formulas';\nimport { toPixels } from './Projection';\n\nexport function createAxes(context, data, plotSize, colors) {\n  function drawXAxis(state, projection) {\n    context.clearRect(0, plotSize.height - X_AXIS_HEIGHT + 1, plotSize.width, X_AXIS_HEIGHT + 1);\n\n    const topOffset = plotSize.height - X_AXIS_HEIGHT / 2;\n    const scaleLevel = Math.floor(state.xAxisScale);\n    const step = xScaleLevelToStep(scaleLevel);\n    const opacityFactor = 1 - (state.xAxisScale - scaleLevel);\n\n    context.font = AXES_FONT;\n    context.textAlign = 'center';\n    context.textBaseline = 'middle';\n\n    for (let i = state.labelFromIndex; i <= state.labelToIndex; i++) {\n      const shiftedI = i - X_AXIS_SHIFT_START;\n\n      if (shiftedI % step !== 0) {\n        continue;\n      }\n\n      const label = data.xLabels[i];\n      const [xPx] = toPixels(projection, i, 0);\n      let opacity = shiftedI % (step * 2) === 0 ? 1 : opacityFactor;\n      opacity = applyYEdgeOpacity(opacity, xPx, plotSize.width);\n\n      context.fillStyle = getCssColor(colors, 'x-axis-text', opacity);\n      context.fillText(label.text, xPx, topOffset);\n    }\n  }\n\n  function drawYAxis(state, projection, secondaryProjection) {\n    const {\n      yAxisScale, yAxisScaleFrom, yAxisScaleTo, yAxisScaleProgress = 0,\n      yMinViewport, yMinViewportFrom, yMinViewportTo,\n      yMaxViewport, yMaxViewportFrom, yMaxViewportTo,\n      yMinViewportSecond, yMinViewportSecondFrom, yMinViewportSecondTo,\n      yMaxViewportSecond, yMaxViewportSecondFrom, yMaxViewportSecondTo,\n    } = state;\n    const colorKey = secondaryProjection && `dataset#${data.datasets[0].key}`;\n    const isYChanging = yMinViewportFrom !== undefined || yMaxViewportFrom !== undefined;\n\n    if (data.isPercentage) {\n      _drawYAxisPercents(projection);\n    } else if (data.isCurrency) {\n      _drawYAxisCurrency(projection, data);\n    } else {\n      _drawYAxisScaled(\n        state,\n        projection,\n        Math.round(yAxisScaleTo || yAxisScale),\n        yMinViewportTo !== undefined ? yMinViewportTo : yMinViewport,\n        yMaxViewportTo !== undefined ? yMaxViewportTo : yMaxViewport,\n        yAxisScaleFrom ? yAxisScaleProgress : 1,\n        colorKey,\n      );\n    }\n\n    if (yAxisScaleProgress > 0 && isYChanging) {\n      _drawYAxisScaled(\n        state,\n        projection,\n        Math.round(yAxisScaleFrom),\n        yMinViewportFrom !== undefined ? yMinViewportFrom : yMinViewport,\n        yMaxViewportFrom !== undefined ? yMaxViewportFrom : yMaxViewport,\n        1 - yAxisScaleProgress,\n        colorKey,\n      );\n    }\n\n    if (secondaryProjection) {\n      const { yAxisScaleSecond, yAxisScaleSecondFrom, yAxisScaleSecondTo, yAxisScaleSecondProgress = 0 } = state;\n      const secondaryColorKey = `dataset#${data.datasets[data.datasets.length - 1].key}`;\n      const isYChanging = yMinViewportSecondFrom !== undefined || yMaxViewportSecondFrom !== undefined;\n\n      _drawYAxisScaled(\n        state,\n        secondaryProjection,\n        Math.round(yAxisScaleSecondTo || yAxisScaleSecond),\n        yMinViewportSecondTo !== undefined ? yMinViewportSecondTo : yMinViewportSecond,\n        yMaxViewportSecondTo !== undefined ? yMaxViewportSecondTo : yMaxViewportSecond,\n        yAxisScaleSecondFrom ? yAxisScaleSecondProgress : 1,\n        secondaryColorKey,\n        true,\n      );\n\n      if (yAxisScaleSecondProgress > 0 && isYChanging) {\n        _drawYAxisScaled(\n          state,\n          secondaryProjection,\n          Math.round(yAxisScaleSecondFrom),\n          yMinViewportSecondFrom !== undefined ? yMinViewportSecondFrom : yMinViewportSecond,\n          yMaxViewportSecondFrom !== undefined ? yMaxViewportSecondFrom : yMaxViewportSecond,\n          1 - yAxisScaleSecondProgress,\n          secondaryColorKey,\n          true,\n        );\n      }\n    }\n  }\n\n  function _drawYAxisScaled(state, projection, scaleLevel, yMin, yMax, opacity = 1, colorKey = null, isSecondary = false) {\n    const step = yScaleLevelToStep(scaleLevel);\n    const firstVisibleValue = Math.ceil(yMin / step) * step;\n    const lastVisibleValue = Math.floor(yMax / step) * step;\n\n    context.font = AXES_FONT;\n    context.textAlign = isSecondary ? 'right' : 'left';\n    context.textBaseline = 'bottom';\n\n    context.lineWidth = 1;\n\n    context.beginPath();\n\n    for (let value = firstVisibleValue; value <= lastVisibleValue; value += step) {\n      const [, yPx] = toPixels(projection, 0, value);\n      const textOpacity = applyXEdgeOpacity(opacity, yPx);\n\n      context.fillStyle = colorKey\n        ? getCssColor(colors, colorKey, textOpacity)\n        : getCssColor(colors, 'y-axis-text', textOpacity);\n\n      if (!isSecondary) {\n        context.fillText(humanize(value), GUTTER, yPx - GUTTER / 2);\n      } else {\n        context.fillText(humanize(value), plotSize.width - GUTTER, yPx - GUTTER / 2);\n      }\n\n      if (isSecondary) {\n        context.strokeStyle = getCssColor(colors, colorKey, opacity);\n\n        context.moveTo(plotSize.width - GUTTER, yPx);\n        context.lineTo(plotSize.width - GUTTER * 2, yPx);\n      } else {\n        context.moveTo(GUTTER, yPx);\n        context.strokeStyle = getCssColor(colors, 'grid-lines', opacity);\n        context.lineTo(plotSize.width - GUTTER, yPx);\n      }\n    }\n\n    context.stroke();\n  }\n\n  function _drawYAxisPercents(projection) {\n    const percentValues = [0, 0.25, 0.50, 0.75, 1];\n    const [, height] = projection.getSize();\n\n    context.font = AXES_FONT;\n    context.textAlign = 'left';\n    context.textBaseline = 'bottom';\n    context.lineWidth = 1;\n\n    context.beginPath();\n\n    percentValues.forEach((value) => {\n      const yPx = height - height * value + PLOT_TOP_PADDING;\n\n      context.fillStyle = getCssColor(colors, 'y-axis-text', 1);\n      context.fillText(`${value * 100}%`, GUTTER, yPx - GUTTER / 4);\n\n      context.moveTo(GUTTER, yPx);\n      context.strokeStyle = getCssColor(colors, 'grid-lines', 1);\n      context.lineTo(plotSize.width - GUTTER, yPx);\n    });\n\n    context.stroke();\n  }\n\n  function _drawYAxisCurrency(projection, data) {\n    const formatValue = data.datasets[0].values.map(value => formatCryptoValue(value));\n\n    const total = formatValue.reduce((sum, value) => sum + value, 0);\n    const avg1 = total / formatValue.length;\n    const avg2 = total / (formatValue.length / 2);\n    const avg3 = total / (formatValue.length / 3);\n\n    const averageRate1 = avg1 * data.currencyRate;\n    const averageRate2 = avg2 * data.currencyRate;\n    const averageRate3 = avg3 * data.currencyRate;\n\n    const totalAvg = [0, avg1, avg2, avg3];\n    const totalRate = [0, averageRate1, averageRate2, averageRate3];\n\n    const [, height] = projection.getSize();\n\n    context.font = AXES_FONT;\n    context.textAlign = 'left';\n    context.textBaseline = 'bottom';\n    context.lineWidth = 1;\n\n    context.beginPath();\n\n    totalAvg.forEach((value, index) => {\n      const yPx = height - height * (value / Math.max(...formatValue)) + PLOT_TOP_PADDING;\n\n      context.fillStyle = getCssColor(colors, 'y-axis-text', 1);\n\n      context.fillText(`${value.toFixed(2)} TON`, GUTTER, yPx - GUTTER / 4);\n\n      context.textAlign = 'right';\n      context.fillText(`$${totalRate[index].toFixed(2)}`, plotSize.width - GUTTER, yPx - GUTTER / 4);\n\n      context.textAlign = 'left';\n\n      context.moveTo(GUTTER, yPx);\n      context.strokeStyle = getCssColor(colors, 'grid-lines', 1);\n      context.lineTo(plotSize.width - GUTTER, yPx);\n    });\n\n    context.stroke();\n  }\n\n  return { drawXAxis, drawYAxis };\n}\n","import { createElement, addEventListener } from './minifiers';\nimport { toggleText } from './toggleText';\nimport { throttle } from './utils';\n\nexport function createHeader(container, title, zoomOutLabel = 'Zoom out', zoomOutCallback) {\n  let _element;\n  let _titleElement;\n  let _zoomOutElement;\n  let _captionElement;\n  let _isZooming;\n\n  const setCaptionThrottled = throttle(setCaption, 100, false);\n\n  _setupLayout();\n\n  function setCaption(caption) {\n    if (_isZooming) {\n      return;\n    }\n\n    _captionElement.innerHTML = caption;\n  }\n\n  function zoom(caption) {\n    _zoomOutElement = toggleText(_titleElement, zoomOutLabel, 'lovely-chart--header-title lovely-chart--header-zoom-out-control');\n    setTimeout(() => {\n      addEventListener(_zoomOutElement, 'click', _onZoomOut);\n    }, 500);\n\n    setCaption(caption);\n  }\n\n  function toggleIsZooming(isZooming) {\n    _isZooming = isZooming;\n  }\n\n  function _setupLayout() {\n    _element = createElement();\n    _element.className = 'lovely-chart--header';\n\n    _titleElement = createElement();\n    _titleElement.className = 'lovely-chart--header-title';\n    _titleElement.innerHTML = title;\n    _element.appendChild(_titleElement);\n\n    _captionElement = createElement();\n    _captionElement.className = 'lovely-chart--header-caption lovely-chart--position-right';\n    _element.appendChild(_captionElement);\n\n    container.appendChild(_element);\n  }\n\n  function _onZoomOut() {\n    _titleElement = toggleText(_zoomOutElement, title, 'lovely-chart--header-title', true);\n    _titleElement.classList.remove('lovely-chart--transition');\n\n    zoomOutCallback();\n  }\n\n  return {\n    setCaption: setCaptionThrottled,\n    zoom,\n    toggleIsZooming,\n  };\n}\n","import { createStateManager } from './StateManager';\nimport { createHeader } from './Header';\nimport { createAxes } from './Axes';\nimport { createMinimap } from './Minimap';\nimport { createTooltip } from './Tooltip';\nimport { createTools } from './Tools';\nimport { createZoomer } from './Zoomer';\nimport { createColors } from './skin';\nimport { analyzeData } from './data';\nimport { setupCanvas, clearCanvas } from './canvas';\nimport { preparePoints } from './preparePoints';\nimport { createProjection } from './Projection';\nimport { drawDatasets } from './drawDatasets';\nimport { createElement } from './minifiers';\nimport { getFullLabelDate, getLabelDate } from './format';\nimport {\n  X_AXIS_HEIGHT,\n  GUTTER,\n  PLOT_TOP_PADDING,\n  PLOT_HEIGHT,\n  PLOT_LINE_WIDTH,\n  SIMPLIFIER_PLOT_FACTOR,\n} from './constants';\nimport { getSimplificationDelta, isDataRange } from './formulas';\nimport { debounce } from './utils';\nimport './styles/index.scss';\n\nfunction create(container, originalData) {\n  let _stateManager;\n\n  let _element;\n  let _plot;\n  let _context;\n  let _plotSize;\n\n  let _header;\n  let _axes;\n  let _minimap;\n  let _tooltip;\n  let _tools;\n  let _zoomer;\n\n  let _state;\n  let _windowWidth = window.innerWidth;\n\n  const _data = analyzeData(originalData);\n  const _colors = createColors(_data.colors);\n  const _redrawDebounced = debounce(_redraw, 500, false, true);\n\n  _setupComponents();\n  _setupGlobalListeners();\n\n  function _setupComponents() {\n    _setupContainer();\n    _header = createHeader(_element, _data.title, _data.zoomOutLabel, _onZoomOut);\n    _setupPlotCanvas();\n    _stateManager = createStateManager(_data, _plotSize, _onStateUpdate);\n    _axes = createAxes(_context, _data, _plotSize, _colors);\n    _minimap = createMinimap(_element, _data, _colors, _onRangeChange);\n    _tooltip = createTooltip(_element, _data, _plotSize, _colors, _onZoomIn, _onFocus);\n    _tools = createTools(_element, _data, _onFilterChange);\n    _zoomer = _data.isZoomable && createZoomer(_data, originalData, _colors, _stateManager, _element, _header, _minimap, _tooltip, _tools);\n    // hideOnScroll(_element);\n  }\n\n  function _setupContainer() {\n    _element = createElement();\n    _element.className = `lovely-chart--container${_data.shouldZoomToPie ? ' lovely-chart--container-type-pie' : ''}`;\n\n    container.appendChild(_element);\n  }\n\n  function _setupPlotCanvas() {\n    const { canvas, context } = setupCanvas(_element, {\n      width: _element.clientWidth,\n      height: PLOT_HEIGHT,\n    });\n\n    _plot = canvas;\n    _context = context;\n\n    _plotSize = {\n      width: _plot.offsetWidth,\n      height: _plot.offsetHeight,\n    };\n  }\n\n  function _onStateUpdate(state) {\n    _state = state;\n\n    const { datasets } = _data;\n    const range = {\n      from: state.labelFromIndex,\n      to: state.labelToIndex,\n    };\n    const boundsAndParams = {\n      begin: state.begin,\n      end: state.end,\n      totalXWidth: state.totalXWidth,\n      yMin: state.yMinViewport,\n      yMax: state.yMaxViewport,\n      availableWidth: _plotSize.width,\n      availableHeight: _plotSize.height - X_AXIS_HEIGHT,\n      xPadding: GUTTER,\n      yPadding: PLOT_TOP_PADDING,\n    };\n    const visibilities = datasets.map(({ key }) => state[`opacity#${key}`]);\n    const points = preparePoints(_data, datasets, range, visibilities, boundsAndParams);\n    const projection = createProjection(boundsAndParams);\n\n    let secondaryPoints = null;\n    let secondaryProjection = null;\n    if (_data.hasSecondYAxis) {\n      const secondaryDataset = datasets.find((d) => d.hasOwnYAxis);\n      const bounds = {\n        yMin: state.yMinViewportSecond,\n        yMax: state.yMaxViewportSecond,\n      };\n      secondaryPoints = preparePoints(_data, [secondaryDataset], range, visibilities, bounds)[0];\n      secondaryProjection = projection.copy(bounds);\n    }\n\n    if (!_data.hideCaption) {\n      _header.setCaption(_getCaption(state));\n    }\n\n    clearCanvas(_plot, _context);\n\n    const totalPoints = points.reduce((a, p) => a + p.length, 0);\n    const simplification = getSimplificationDelta(totalPoints) * SIMPLIFIER_PLOT_FACTOR;\n\n    drawDatasets(\n      _context, state, _data,\n      range, points, projection, secondaryPoints, secondaryProjection,\n      PLOT_LINE_WIDTH, visibilities, _colors, false, simplification,\n    );\n    if (!_data.isPie) {\n      _axes.drawYAxis(state, projection, secondaryProjection);\n      // TODO check isChanged\n      _axes.drawXAxis(state, projection);\n    }\n    _minimap.update(state);\n    _tooltip.update(state, points, projection, secondaryPoints, secondaryProjection);\n  }\n\n  function _onRangeChange(range) {\n    _stateManager.update({ range });\n  }\n\n  function _onFilterChange(filter) {\n    _stateManager.update({ filter });\n  }\n\n  function _onFocus(focusOn) {\n    if (_data.isBars || _data.isPie || _data.isSteps) {\n      // TODO animate\n      _stateManager.update({ focusOn });\n    }\n  }\n\n  function _onZoomIn(labelIndex) {\n    _zoomer.zoomIn(_state, labelIndex);\n  }\n\n  function _onZoomOut() {\n    _zoomer.zoomOut(_state);\n  }\n\n  function _setupGlobalListeners() {\n    document.documentElement.addEventListener('darkmode', () => {\n      _stateManager.update();\n    });\n\n    window.addEventListener('resize', () => {\n      if (window.innerWidth !== _windowWidth) {\n        _windowWidth = window.innerWidth;\n        _redrawDebounced();\n      }\n    });\n\n    window.addEventListener('orientationchange', () => {\n      _redrawDebounced();\n    });\n  }\n\n  function _redraw() {\n    Object.assign(_data, analyzeData(originalData));\n    _element.remove();\n    _setupComponents();\n  }\n\n  function _getCaption(state) {\n    let startIndex;\n    let endIndex;\n\n    if (_zoomer && _zoomer.isZoomed()) {\n      // TODO Fix label\n      startIndex = state.labelFromIndex === 0 ? 0 : state.labelFromIndex + 1;\n      endIndex = state.labelToIndex === state.totalXWidth - 1 ? state.labelToIndex : state.labelToIndex - 1;\n    } else {\n      startIndex = state.labelFromIndex;\n      endIndex = state.labelToIndex;\n    }\n\n    return isDataRange(_data.xLabels[startIndex], _data.xLabels[endIndex])\n      ? (\n        `${getLabelDate(_data.xLabels[startIndex])}` +\n        ' — ' +\n        `${getLabelDate(_data.xLabels[endIndex])}`\n      )\n      : getFullLabelDate(_data.xLabels[startIndex]);\n  }\n}\n\nexport { create };\n","import { setupCanvas, clearCanvas } from './canvas';\nimport { preparePoints } from './preparePoints';\nimport { createProjection } from './Projection';\nimport { drawDatasets } from './drawDatasets';\nimport { captureEvents } from './captureEvents';\nimport {\n  DEFAULT_RANGE,\n  MINIMAP_HEIGHT,\n  MINIMAP_EAR_WIDTH,\n  MINIMAP_MARGIN,\n  MINIMAP_LINE_WIDTH,\n  MINIMAP_MAX_ANIMATED_DATASETS,\n  SIMPLIFIER_MINIMAP_FACTOR,\n} from './constants';\nimport { proxyMerge, throttleWithRaf } from './utils';\nimport { createElement } from './minifiers';\nimport { getSimplificationDelta } from './formulas';\n\nexport function createMinimap(container, data, colors, rangeCallback) {\n  let _element;\n  let _canvas;\n  let _context;\n  let _canvasSize;\n  let _ruler;\n  let _slider;\n\n  let _capturedOffset;\n  let _range = {};\n  let _state;\n\n  const _updateRulerOnRaf = throttleWithRaf(_updateRuler);\n\n  _setupLayout();\n  _updateRange(data.minimapRange || DEFAULT_RANGE);\n\n  function update(newState) {\n    const { begin, end } = newState;\n    if (!_capturedOffset) {\n      _updateRange({ begin, end }, true);\n    }\n\n    if (data.datasets.length >= MINIMAP_MAX_ANIMATED_DATASETS) {\n      newState = newState.static;\n    }\n\n    if (!_isStateChanged(newState)) {\n      return;\n    }\n\n    _state = proxyMerge(newState, { focusOn: null });\n    clearCanvas(_canvas, _context);\n\n    _drawDatasets(_state);\n  }\n\n  function toggle(shouldShow) {\n    _element.classList.toggle('lovely-chart--state-hidden', !shouldShow);\n\n    requestAnimationFrame(() => {\n      _element.classList.toggle('lovely-chart--state-transparent', !shouldShow);\n    });\n  }\n\n  function _setupLayout() {\n    _element = createElement();\n\n    _element.className = 'lovely-chart--minimap';\n    _element.style.height = `${MINIMAP_HEIGHT}px`;\n\n    _setupCanvas();\n    _setupRuler();\n\n    container.appendChild(_element);\n\n    _canvasSize = {\n      width: _canvas.offsetWidth,\n      height: _canvas.offsetHeight,\n    };\n  }\n\n  function _getSize() {\n    return {\n      width: container.offsetWidth - MINIMAP_MARGIN * 2,\n      height: MINIMAP_HEIGHT,\n    };\n  }\n\n  function _setupCanvas() {\n    const { canvas, context } = setupCanvas(_element, _getSize());\n\n    _canvas = canvas;\n    _context = context;\n  }\n\n  function _setupRuler() {\n    _ruler = createElement();\n    _ruler.className = 'lovely-chart--minimap-ruler';\n    _ruler.innerHTML =\n      '<div class=\"lovely-chart--minimap-mask\"></div>' +\n      '<div class=\"lovely-chart--minimap-slider\">' +\n      '<div class=\"lovely-chart--minimap-slider-handle\"><span class=\"lovely-chart--minimap-slider-handle-pin\"></span></div>' +\n      '<div class=\"lovely-chart--minimap-slider-inner\"></div>' +\n      '<div class=\"lovely-chart--minimap-slider-handle\"><span class=\"lovely-chart--minimap-slider-handle-pin\"></span></div>' +\n      '</div>' +\n      '<div class=\"lovely-chart--minimap-mask\"></div>';\n\n    _slider = _ruler.children[1];\n\n    captureEvents(\n      _slider.children[1],\n      {\n        onCapture: _onDragCapture,\n        onDrag: _onSliderDrag,\n        onRelease: _onDragRelease,\n        draggingCursor: 'grabbing',\n      },\n    );\n\n    captureEvents(\n      _slider.children[0],\n      {\n        onCapture: _onDragCapture,\n        onDrag: _onLeftEarDrag,\n        onRelease: _onDragRelease,\n        draggingCursor: 'ew-resize',\n      },\n    );\n\n    captureEvents(\n      _slider.children[2],\n      {\n        onCapture: _onDragCapture,\n        onDrag: _onRightEarDrag,\n        onRelease: _onDragRelease,\n        draggingCursor: 'ew-resize',\n      },\n    );\n\n    _element.appendChild(_ruler);\n  }\n\n  function _isStateChanged(newState) {\n    if (!_state) {\n      return true;\n    }\n\n    const { datasets } = data;\n\n    if (datasets.some(({ key }) => _state[`opacity#${key}`] !== newState[`opacity#${key}`])) {\n      return true;\n    }\n\n    if (_state.yMaxMinimap !== newState.yMaxMinimap) {\n      return true;\n    }\n\n    return false;\n  }\n\n  function _drawDatasets(state = {}) {\n    const { datasets } = data;\n    const range = {\n      from: 0,\n      to: state.totalXWidth,\n    };\n    const boundsAndParams = {\n      begin: 0,\n      end: 1,\n      totalXWidth: state.totalXWidth,\n      yMin: state.yMinMinimap,\n      yMax: state.yMaxMinimap,\n      availableWidth: _canvasSize.width,\n      availableHeight: _canvasSize.height,\n      yPadding: 1,\n    };\n    const visibilities = datasets.map(({ key }) => _state[`opacity#${key}`]);\n    const points = preparePoints(data, datasets, range, visibilities, boundsAndParams, true);\n    const projection = createProjection(boundsAndParams);\n\n    let secondaryPoints = null;\n    let secondaryProjection = null;\n    if (data.hasSecondYAxis) {\n      const secondaryDataset = datasets.find((d) => d.hasOwnYAxis);\n      const bounds = { yMin: state.yMinMinimapSecond, yMax: state.yMaxMinimapSecond };\n      secondaryPoints = preparePoints(data, [secondaryDataset], range, visibilities, bounds)[0];\n      secondaryProjection = projection.copy(bounds);\n    }\n\n    const totalPoints = points.reduce((a, p) => a + p.length, 0);\n    const simplification = getSimplificationDelta(totalPoints) * SIMPLIFIER_MINIMAP_FACTOR;\n\n    drawDatasets(\n      _context, state, data,\n      range, points, projection, secondaryPoints, secondaryProjection,\n      MINIMAP_LINE_WIDTH, visibilities, colors, true, simplification,\n    );\n  }\n\n  function _onDragCapture(e) {\n    e.preventDefault();\n    _capturedOffset = e.target.offsetLeft;\n  }\n\n  function _onDragRelease() {\n    _capturedOffset = null;\n  }\n\n  function _onSliderDrag(moveEvent, captureEvent, { dragOffsetX }) {\n    const minX1 = 0;\n    const maxX1 = _canvasSize.width - _slider.offsetWidth;\n\n    const newX1 = Math.max(minX1, Math.min(_capturedOffset + dragOffsetX - MINIMAP_EAR_WIDTH, maxX1));\n    const newX2 = newX1 + _slider.offsetWidth;\n    const begin = newX1 / _canvasSize.width;\n    const end = newX2 / _canvasSize.width;\n\n    _updateRange({ begin, end });\n  }\n\n  function _onLeftEarDrag(moveEvent, captureEvent, { dragOffsetX }) {\n    const minX1 = 0;\n    const maxX1 = _slider.offsetLeft + _slider.offsetWidth - MINIMAP_EAR_WIDTH * 2;\n\n    const newX1 = Math.min(maxX1, Math.max(minX1, _capturedOffset + dragOffsetX));\n    const begin = newX1 / _canvasSize.width;\n\n    _updateRange({ begin });\n  }\n\n  function _onRightEarDrag(moveEvent, captureEvent, { dragOffsetX }) {\n    const minX2 = _slider.offsetLeft + MINIMAP_EAR_WIDTH * 2;\n    const maxX2 = _canvasSize.width;\n\n    const newX2 = Math.max(minX2, Math.min(_capturedOffset + MINIMAP_EAR_WIDTH + dragOffsetX, maxX2));\n    const end = newX2 / _canvasSize.width;\n\n    _updateRange({ end });\n  }\n\n  function _updateRange(range, isExternal) {\n    let nextRange = Object.assign({}, _range, range);\n\n    if (_state && _state.minimapDelta && !isExternal) {\n      nextRange = _adjustDiscreteRange(nextRange);\n    }\n\n    if (nextRange.begin === _range.begin && nextRange.end === _range.end) {\n      return;\n    }\n\n    _range = nextRange;\n    _updateRulerOnRaf();\n\n    if (!isExternal) {\n      rangeCallback(_range);\n    }\n  }\n\n  function _adjustDiscreteRange(nextRange) {\n    // TODO sometimes beginChange and endChange are different for slider drag because of pixels division\n    const begin = Math.round(nextRange.begin / _state.minimapDelta) * _state.minimapDelta;\n    const end = Math.round(nextRange.end / _state.minimapDelta) * _state.minimapDelta;\n\n    return { begin, end };\n  }\n\n  function _updateRuler() {\n    const { begin, end } = _range;\n\n    _ruler.children[0].style.width = `${begin * 100}%`;\n    _ruler.children[1].style.width = `${(end - begin) * 100}%`;\n    _ruler.children[2].style.width = `${(1 - end) * 100}%`;\n  }\n\n  return { update, toggle };\n}\n","import { proxyMerge } from './utils';\n\nexport function createProjection(params) {\n  const {\n    begin,\n    end,\n    totalXWidth,\n    yMin,\n    yMax,\n    availableWidth,\n    availableHeight,\n    xPadding = 0,\n    yPadding = 0,\n  } = params;\n\n  let effectiveWidth = availableWidth;\n\n  // TODO bug get rid of padding jumps\n  if (begin === 0) {\n    effectiveWidth -= xPadding;\n  }\n  if (end === 1) {\n    effectiveWidth -= xPadding;\n  }\n  const xFactor = effectiveWidth / ((end !== begin ? end - begin : 1) * totalXWidth);\n  let xOffsetPx = (begin * totalXWidth) * xFactor;\n  if (begin === 0) {\n    xOffsetPx -= xPadding;\n  }\n\n  const effectiveHeight = availableHeight - yPadding;\n  const yFactor = effectiveHeight / (yMax - yMin);\n  const yOffsetPx = yMin * yFactor;\n\n  function getState() {\n    return { xFactor, xOffsetPx, availableHeight, yFactor, yOffsetPx };\n  }\n\n  function findClosestLabelIndex(xPx) {\n    return Math.round((xPx + xOffsetPx) / xFactor);\n  }\n\n  function copy(overrides, cons) {\n    return createProjection(proxyMerge(params, overrides), cons);\n  }\n\n  function getCenter() {\n    return [\n      availableWidth / 2,\n      availableHeight - effectiveHeight / 2,\n    ];\n  }\n\n  function getSize() {\n    return [availableWidth, effectiveHeight];\n  }\n\n  function getParams() {\n    return params;\n  }\n\n  return {\n    findClosestLabelIndex,\n    copy,\n    getCenter,\n    getSize,\n    getParams,\n    getState,\n  };\n}\n\nexport function toPixels(projection, labelIndex, value) {\n  const { xFactor, xOffsetPx, availableHeight, yFactor, yOffsetPx } = projection.getState();\n\n  return [\n    labelIndex * xFactor - xOffsetPx,\n    availableHeight - (value * yFactor - yOffsetPx),\n  ];\n}\n","import { createTransitionManager } from './TransitionManager';\nimport { throttleWithRaf, getMaxMin, mergeArrays, proxyMerge, sumArrays } from './utils';\nimport {\n  AXES_MAX_COLUMN_WIDTH,\n  AXES_MAX_ROW_HEIGHT,\n  X_AXIS_HEIGHT,\n  ANIMATE_PROPS,\n  Y_AXIS_ZERO_BASED_THRESHOLD,\n} from './constants';\nimport { xStepToScaleLevel, yScaleLevelToStep, yStepToScaleLevel } from './formulas';\n\nexport function createStateManager(data, viewportSize, callback) {\n  const _range = { begin: 0, end: 1 };\n  const _filter = _buildDefaultFilter();\n  const _transitionConfig = _buildTransitionConfig();\n  const _transitions = createTransitionManager(_runCallback);\n  const _runCallbackOnRaf = throttleWithRaf(_runCallback);\n\n  let _state = {};\n\n  function update({ range = {}, filter = {}, focusOn, minimapDelta } = {}, noTransition) {\n    Object.assign(_range, range);\n    Object.assign(_filter, filter);\n\n    const prevState = _state;\n    _state = calculateState(data, viewportSize, _range, _filter, focusOn, minimapDelta, prevState);\n\n    if (!noTransition) {\n      _transitionConfig.forEach(({ prop, duration, options }) => {\n        const transition = _transitions.get(prop);\n        const currentTarget = transition ? transition.to : prevState[prop];\n\n        if (currentTarget !== undefined && currentTarget !== _state[prop]) {\n          const current = transition\n            ? (options.includes('fast') ? prevState[prop] : transition.current)\n            : prevState[prop];\n\n          if (transition) {\n            _transitions.remove(prop);\n          }\n\n          _transitions.add(prop, current, _state[prop], duration, options);\n        }\n      });\n    }\n\n    if (!_transitions.isRunning() || !_transitions.isFast()) {\n      _runCallbackOnRaf();\n    }\n  }\n\n  function hasAnimations() {\n    return _transitions.isFast();\n  }\n\n  function _buildTransitionConfig() {\n    const transitionConfig = [];\n    const datasetVisibilities = data.datasets.map(({ key }) => `opacity#${key} 300`);\n\n    mergeArrays([\n      ANIMATE_PROPS,\n      datasetVisibilities,\n    ]).forEach((transition) => {\n      const [prop, duration, ...options] = transition.split(' ');\n      transitionConfig.push({ prop, duration, options });\n    });\n\n    return transitionConfig;\n  }\n\n  function _buildDefaultFilter() {\n    const filter = {};\n\n    data.datasets.forEach(({ key }) => {\n      filter[key] = true;\n    });\n\n    return filter;\n  }\n\n  function _runCallback() {\n    const state = _transitions.isFast() ? proxyMerge(_state, _transitions.getState()) : _state;\n    state.static = _state;\n    callback(state);\n  }\n\n  return { update, hasAnimations };\n}\n\nfunction calculateState(data, viewportSize, range, filter, focusOn, minimapDelta, prevState) {\n  const { begin, end } = range;\n  const totalXWidth = data.xLabels.length - 1;\n\n  const labelFromIndex = Math.max(0, Math.ceil(totalXWidth * begin));\n  const labelToIndex = Math.min(Math.floor(totalXWidth * end), totalXWidth);\n\n  const xAxisScale = calculateXAxisScale(viewportSize.width, labelFromIndex, labelToIndex);\n\n  const yRanges = data.isStacked\n    ? calculateYRangesStacked(data, filter, labelFromIndex, labelToIndex, prevState)\n    : calculateYRanges(data, filter, labelFromIndex, labelToIndex, prevState);\n\n  const yAxisScale = calculateYAxisScale(viewportSize.height, yRanges.yMinViewport, yRanges.yMaxViewport);\n  const yAxisScaleSecond = data.hasSecondYAxis &&\n    calculateYAxisScale(viewportSize.height, yRanges.yMinViewportSecond, yRanges.yMaxViewportSecond);\n\n  const yStep = yScaleLevelToStep(yAxisScale);\n  yRanges.yMinViewport -= yRanges.yMinViewport % yStep;\n\n  if (yAxisScaleSecond) {\n    const yStepSecond = yScaleLevelToStep(yAxisScaleSecond);\n    yRanges.yMinViewportSecond -= yRanges.yMinViewportSecond % yStepSecond;\n  }\n\n  const datasetsOpacity = {};\n  data.datasets.forEach(({ key }) => {\n    datasetsOpacity[`opacity#${key}`] = filter[key] ? 1 : 0;\n  });\n\n  // TODO perf\n  return Object.assign(\n    {\n      totalXWidth,\n      xAxisScale,\n      yAxisScale,\n      yAxisScaleSecond,\n      labelFromIndex: Math.max(0, labelFromIndex - 1),\n      labelToIndex: Math.min(labelToIndex + 1, totalXWidth),\n      filter: Object.assign({}, filter),\n      focusOn: focusOn !== undefined ? focusOn : prevState.focusOn,\n      minimapDelta: minimapDelta !== undefined ? minimapDelta : prevState.minimapDelta,\n    },\n    yRanges,\n    datasetsOpacity,\n    range,\n  );\n}\n\nfunction calculateYRanges(data, filter, labelFromIndex, labelToIndex, prevState) {\n  const secondaryYAxisDataset = data.hasSecondYAxis && data.datasets.slice(-1)[0];\n  const filteredDatasets = data.datasets.filter((d) => filter[d.key] && d !== secondaryYAxisDataset);\n\n  const yRanges = calculateYRangesForGroup(data, labelFromIndex, labelToIndex, prevState, filteredDatasets);\n\n  if (secondaryYAxisDataset) {\n    const {\n      yMinViewport: yMinViewportSecond,\n      yMaxViewport: yMaxViewportSecond,\n      yMinMinimap: yMinMinimapSecond,\n      yMaxMinimap: yMaxMinimapSecond,\n    } = calculateYRangesForGroup(data, labelFromIndex, labelToIndex, prevState, [secondaryYAxisDataset]);\n\n    Object.assign(yRanges, {\n      yMinViewportSecond,\n      yMaxViewportSecond,\n      yMinMinimapSecond,\n      yMaxMinimapSecond,\n    });\n  }\n\n  return yRanges;\n}\n\nfunction calculateYRangesForGroup(data, labelFromIndex, labelToIndex, prevState, datasets) {\n  const { min: yMinMinimapReal = prevState.yMinMinimap, max: yMaxMinimap = prevState.yMaxMinimap }\n    = getMaxMin(mergeArrays(datasets.map(({ yMax, yMin }) => [yMax, yMin])));\n  const yMinMinimap = yMinMinimapReal / yMaxMinimap > Y_AXIS_ZERO_BASED_THRESHOLD ? yMinMinimapReal : 0;\n\n  let yMinViewport;\n  let yMaxViewport;\n\n  if (labelFromIndex === 0 && labelToIndex === data.xLabels.length - 1) {\n    yMinViewport = yMinMinimap;\n    yMaxViewport = yMaxMinimap;\n  } else {\n    const filteredValues = datasets.map(({ values }) => values);\n    const viewportValues = filteredValues.map((values) => values.slice(labelFromIndex, labelToIndex + 1));\n    const viewportMaxMin = getMaxMin(mergeArrays(viewportValues));\n    const yMinViewportReal = viewportMaxMin.min !== undefined ? viewportMaxMin.min : prevState.yMinViewport;\n    yMaxViewport = viewportMaxMin.max !== undefined ? viewportMaxMin.max : prevState.yMaxViewport;\n    yMinViewport = yMinViewportReal / yMaxViewport > Y_AXIS_ZERO_BASED_THRESHOLD ? yMinViewportReal : 0;\n  }\n\n  return {\n    yMinViewport,\n    yMaxViewport,\n    yMinMinimap,\n    yMaxMinimap,\n  };\n}\n\nfunction calculateYRangesStacked(data, filter, labelFromIndex, labelToIndex, prevState) {\n  const filteredDatasets = data.datasets.filter((d) => filter[d.key]);\n  const filteredValues = filteredDatasets.map(({ values }) => values);\n\n  const sums = filteredValues.length ? sumArrays(filteredValues) : [];\n  const { max: yMaxMinimap = prevState.yMaxMinimap } = getMaxMin(sums);\n  const { max: yMaxViewport = prevState.yMaxViewport } = getMaxMin(sums.slice(labelFromIndex, labelToIndex + 1));\n\n  return {\n    yMinViewport: 0,\n    yMaxViewport,\n    yMinMinimap: 0,\n    yMaxMinimap,\n  };\n}\n\nfunction calculateXAxisScale(plotWidth, labelFromIndex, labelToIndex) {\n  const viewportLabelsCount = labelToIndex - labelFromIndex;\n  const maxColumns = Math.floor(plotWidth / AXES_MAX_COLUMN_WIDTH);\n\n  return xStepToScaleLevel(viewportLabelsCount / maxColumns);\n}\n\nfunction calculateYAxisScale(plotHeight, yMin, yMax) {\n  const availableHeight = plotHeight - X_AXIS_HEIGHT;\n  const viewportLabelsCount = yMax - yMin;\n  const maxRows = Math.floor(availableHeight / AXES_MAX_ROW_HEIGHT);\n\n  return yStepToScaleLevel(viewportLabelsCount / maxRows);\n}\n","import { createElement } from './minifiers';\nimport { captureEvents } from './captureEvents';\n\nexport function createTools(container, data, filterCallback) {\n  let _element;\n\n  _setupLayout();\n  _updateFilter();\n\n  function redraw() {\n    if (_element) {\n      const oldElement = _element;\n      oldElement.classList.add('lovely-chart--state-hidden');\n      setTimeout(() => {\n        oldElement.parentNode.removeChild(oldElement);\n      }, 500);\n    }\n\n    _setupLayout();\n    _element.classList.add('lovely-chart--state-transparent');\n    requestAnimationFrame(() => {\n      _element.classList.remove('lovely-chart--state-transparent');\n    });\n  }\n\n  function _setupLayout() {\n    _element = createElement();\n    _element.className = 'lovely-chart--tools';\n\n    if (data.datasets.length < 2) {\n      _element.className += ' lovely-chart--state-hidden';\n    }\n\n    data.datasets.forEach(({ key, name }) => {\n      const control = createElement('a');\n      control.href = '#';\n      control.dataset.key = key;\n      control.className = `lovely-chart--button lovely-chart--color-${data.colors[key].slice(1)} lovely-chart--state-checked`;\n      control.innerHTML = `<span class=\"lovely-chart--button-check\"></span><span class=\"lovely-chart--button-label\">${name}</span>`;\n\n      control.addEventListener('click', (e) => {\n        e.preventDefault();\n\n        if (!control.dataset.clickPrevented) {\n          _updateFilter(control);\n        }\n\n        delete control.dataset.clickPrevented;\n      });\n\n      captureEvents(control, {\n        onLongPress: () => {\n          control.dataset.clickPrevented = 'true';\n\n          _updateFilter(control, true);\n        },\n      });\n\n      _element.appendChild(control);\n    });\n\n    container.appendChild(_element);\n  }\n\n  function _updateFilter(button, isLongPress = false) {\n    const buttons = Array.from(_element.getElementsByTagName('a'));\n    const isSingleChecked = _element.querySelectorAll('.lovely-chart--state-checked').length === 1;\n\n    if (button) {\n      if (button.classList.contains('lovely-chart--state-checked') && isSingleChecked) {\n        if (isLongPress) {\n          buttons.forEach((b) => b.classList.add('lovely-chart--state-checked'));\n          button.classList.remove('lovely-chart--state-checked');\n        } else {\n          button.classList.remove('lovely-chart--state-shake');\n          requestAnimationFrame(() => {\n            button.classList.add('lovely-chart--state-shake');\n          });\n        }\n      } else if (isLongPress) {\n        buttons.forEach((b) => b.classList.remove('lovely-chart--state-checked'));\n        button.classList.add('lovely-chart--state-checked');\n      } else {\n        button.classList.toggle('lovely-chart--state-checked');\n      }\n    }\n\n    const filter = {};\n\n    buttons.forEach((input) => {\n      filter[input.dataset.key] = input.classList.contains('lovely-chart--state-checked');\n    });\n\n    filterCallback(filter);\n  }\n\n  return {\n    redraw,\n  };\n}\n","import { setupCanvas, clearCanvas } from './canvas';\nimport { BALLOON_OFFSET, X_AXIS_HEIGHT } from './constants';\nimport { getPieRadius } from './formulas';\nimport {formatCryptoValue, formatInteger, getLabelDate, getLabelTime, statsFormatDayHourFull} from './format';\nimport { getCssColor } from './skin';\nimport { throttle, throttleWithRaf } from './utils';\nimport { addEventListener, createElement } from './minifiers';\nimport { toPixels } from './Projection';\n\nexport function createTooltip(container, data, plotSize, colors, onZoom, onFocus) {\n  let _state;\n  let _points;\n  let _projection;\n  let _secondaryPoints;\n  let _secondaryProjection;\n\n  let _element;\n  let _canvas;\n  let _context;\n  let _balloon;\n\n  let _offsetX;\n  let _offsetY;\n  let _clickedOnLabel = null;\n\n  let _isZoomed = false;\n  let _isZooming = false;\n\n  const _selectLabelOnRaf = throttleWithRaf(_selectLabel);\n  const _throttledUpdateContent = throttle(_updateContent, 100, true, true);\n\n  _setupLayout();\n\n  function update(state, points, projection, secondaryPoints, secondaryProjection) {\n    _state = state;\n    _points = points;\n    _projection = projection;\n    _secondaryPoints = secondaryPoints;\n    _secondaryProjection = secondaryProjection;\n    _selectLabel(true);\n  }\n\n  function toggleLoading(isLoading) {\n    _balloon.classList.toggle('lovely-chart--state-loading', isLoading);\n\n    if (!isLoading) {\n      _clear();\n    }\n  }\n\n  function toggleIsZoomed(isZoomed) {\n    if (isZoomed !== _isZoomed) {\n      _isZooming = true;\n    }\n    _isZoomed = isZoomed;\n    _balloon.classList.toggle('lovely-chart--state-inactive', isZoomed);\n  }\n\n  function _setupLayout() {\n    _element = createElement();\n    _element.className = `lovely-chart--tooltip`;\n\n    _setupCanvas();\n    _setupBalloon();\n\n    if ('ontouchstart' in window) {\n      addEventListener(_element, 'touchmove', _onMouseMove);\n      addEventListener(_element, 'touchstart', _onMouseMove);\n      addEventListener(document, 'touchstart', _onDocumentMove);\n    } else {\n      addEventListener(_element, 'mousemove', _onMouseMove);\n      addEventListener(_element, 'click', _onClick);\n      addEventListener(document, 'mousemove', _onDocumentMove);\n    }\n\n    container.appendChild(_element);\n  }\n\n  function _setupCanvas() {\n    const { canvas, context } = setupCanvas(_element, plotSize);\n\n    _canvas = canvas;\n    _context = context;\n  }\n\n  function _setupBalloon() {\n    _balloon = createElement();\n    _balloon.className = `lovely-chart--tooltip-balloon${!data.isZoomable ? ' lovely-chart--state-inactive' : ''}`;\n    _balloon.innerHTML = '<div class=\"lovely-chart--tooltip-title\"></div><div class=\"lovely-chart--tooltip-legend\"></div><div class=\"lovely-chart--spinner\"></div>';\n\n    if ('ontouchstart' in window && data.isZoomable) {\n      addEventListener(_balloon, 'click', _onBalloonClick);\n    }\n\n    _element.appendChild(_balloon);\n  }\n\n  function _onMouseMove(e) {\n    if (e.target === _balloon || _balloon.contains(e.target) || _clickedOnLabel) {\n      return;\n    }\n\n    _isZooming = false;\n\n    const pageOffset = _getPageOffset(_element);\n    _offsetX = (e.touches ? e.touches[0].clientX : e.clientX) - pageOffset.left;\n    _offsetY = (e.touches ? e.touches[0].clientY : e.clientY) - pageOffset.top;\n\n    _selectLabelOnRaf();\n  }\n\n  function _onDocumentMove(e) {\n    if (_offsetX !== null && e.target !== _element && !_element.contains(e.target)) {\n      _clear();\n    }\n  }\n\n  function _onClick(e) {\n    if (_isZooming) {\n      return;\n    }\n\n    if (data.isZoomable) {\n      const oldLabelIndex = _clickedOnLabel;\n\n      _clickedOnLabel = null;\n      _onMouseMove(e, true);\n\n      const newLabelIndex = _getLabelIndex();\n      if (newLabelIndex !== oldLabelIndex) {\n        _clickedOnLabel = newLabelIndex;\n      }\n\n      onZoom(newLabelIndex);\n    }\n  }\n\n  function _onBalloonClick() {\n    if (_balloon.classList.contains('lovely-chart--state-inactive')) {\n      return;\n    }\n\n    const labelIndex = _projection.findClosestLabelIndex(_offsetX);\n    onZoom(labelIndex);\n  }\n\n  function _clear(isExternal) {\n    _offsetX = null;\n    _clickedOnLabel = null;\n    clearCanvas(_canvas, _context);\n    _hideBalloon();\n\n    if (!isExternal && onFocus) {\n      onFocus(null);\n    }\n  }\n\n  function _getLabelIndex() {\n    const labelIndex = _projection.findClosestLabelIndex(_offsetX);\n    return labelIndex < _state.labelFromIndex || labelIndex > _state.labelToIndex ? null : labelIndex;\n  }\n\n  function _selectLabel(isExternal) {\n    if (!_offsetX || !_state || _isZooming) {\n      return;\n    }\n\n    const labelIndex = _getLabelIndex();\n    if (labelIndex === null) {\n      _clear(isExternal);\n      return;\n    }\n\n    const pointerVector = getPointerVector();\n    const shouldShowBalloon = data.isPie ? pointerVector.distance <= getPieRadius(_projection) : true;\n\n    if (!isExternal && onFocus) {\n      if (data.isPie) {\n        onFocus(pointerVector);\n      } else {\n        onFocus(labelIndex);\n      }\n    }\n\n    function getValue(values, labelIndex) {\n      if (data.isPie) {\n        return values.slice(_state.labelFromIndex, _state.labelToIndex + 1).reduce((a, x) => a + x, 0);\n      }\n\n      return values[labelIndex];\n    }\n\n    const [xPx] = toPixels(_projection, labelIndex, 0);\n    const statistics = data.datasets\n      .map(({ key, name, values, hasOwnYAxis }, i) => ({\n        key,\n        name,\n        value: getValue(values, labelIndex),\n        hasOwnYAxis,\n        originalIndex: i,\n      }))\n      .filter(({ key }) => _state.filter[key]);\n\n    if (statistics.length && shouldShowBalloon) {\n      _updateBalloon(statistics, labelIndex);\n    } else {\n      _hideBalloon();\n    }\n\n    clearCanvas(_canvas, _context);\n    if (data.isLines || data.isAreas) {\n      if (data.isLines) {\n        _drawCircles(statistics, labelIndex);\n      }\n\n      _drawTail(xPx, plotSize.height - X_AXIS_HEIGHT, getCssColor(colors, 'grid-lines'));\n    }\n  }\n\n  function _drawCircles(statistics, labelIndex) {\n    statistics.forEach(({ value, key, hasOwnYAxis, originalIndex }) => {\n      const pointIndex = labelIndex - _state.labelFromIndex;\n      const point = hasOwnYAxis ? _secondaryPoints[pointIndex] : _points[originalIndex][pointIndex];\n\n      if (!point) {\n        return;\n      }\n\n      const [x, y] = hasOwnYAxis\n        ? toPixels(_secondaryProjection, labelIndex, point.stackValue)\n        : toPixels(_projection, labelIndex, point.stackValue);\n\n      // TODO animate\n      _drawCircle(\n        [x, y],\n        getCssColor(colors, `dataset#${key}`),\n        getCssColor(colors, 'background'),\n      );\n    });\n  }\n\n  function _drawCircle([xPx, yPx], strokeColor, fillColor) {\n    _context.strokeStyle = strokeColor;\n    _context.fillStyle = fillColor;\n    _context.lineWidth = 2;\n\n    _context.beginPath();\n    _context.arc(xPx, yPx, 4, 0, 2 * Math.PI);\n    _context.fill();\n    _context.stroke();\n  }\n\n  function _drawTail(xPx, height, color) {\n    _context.strokeStyle = color;\n    _context.lineWidth = 1;\n\n    _context.beginPath();\n    _context.moveTo(xPx, 0);\n    _context.lineTo(xPx, height);\n    _context.stroke();\n  }\n\n  function _getBalloonLeftOffset(labelIndex) {\n    const meanLabel = (_state.labelFromIndex + _state.labelToIndex) / 2;\n    const { angle } = getPointerVector();\n\n    const shouldPlaceRight = data.isPie ? angle > Math.PI / 2 : labelIndex < meanLabel;\n\n    const leftOffset = shouldPlaceRight ? _offsetX + BALLOON_OFFSET : _offsetX - (_balloon.offsetWidth + BALLOON_OFFSET);\n\n    return Math.min(Math.max(0, leftOffset), container.offsetWidth - _balloon.offsetWidth);\n  }\n\n  function _getBalloonTopOffset() {\n    return data.isPie ? `${_offsetY}px` : 0;\n  }\n\n  function _updateBalloon(statistics, labelIndex) {\n    _balloon.style.transform = `translate3D(${_getBalloonLeftOffset(labelIndex)}px, ${_getBalloonTopOffset()}, 0)`;\n    _balloon.classList.add('lovely-chart--state-shown');\n\n    if (data.isPie) {\n      _updateContent(null, statistics);\n    } else {\n      _throttledUpdateContent(_getTitle(data, labelIndex), statistics);\n    }\n  }\n\n  function _getTitle(data, labelIndex) {\n    switch (data.tooltipFormatter) {\n      case 'statsFormatDayHourFull':\n        return statsFormatDayHourFull(data.xLabels[labelIndex].value);\n      case 'statsTooltipFormat(\\'day\\')':\n        return getLabelDate(data.xLabels[labelIndex]);\n      case 'statsTooltipFormat(\\'hour\\')':\n      case 'statsTooltipFormat(\\'5min\\')':\n        return getLabelTime(data.xLabels[labelIndex]);\n      default:\n        return data.xLabels[labelIndex].text;\n    }\n  }\n\n  function _isPieSectorSelected(statistics, value, totalValue, index, pointerVector) {\n    const offset = index > 0 ? statistics.slice(0, index).reduce((a, x) => a + x.value, 0) : 0;\n    const beginAngle = offset / totalValue * Math.PI * 2 - Math.PI / 2;\n    const endAngle = (offset + value) / totalValue * Math.PI * 2 - Math.PI / 2;\n\n    return pointerVector &&\n      beginAngle <= pointerVector.angle &&\n      pointerVector.angle < endAngle &&\n      pointerVector.distance <= getPieRadius(_projection);\n  }\n\n  function _updateTitle(title) {\n    const titleContainer = _balloon.children[0];\n\n    if (data.isPie) {\n      if (titleContainer) {\n        titleContainer.style.display = 'none';\n      }\n    } else {\n      if (titleContainer.style.display === 'none') {\n        titleContainer.style.display = '';\n      }\n      const currentTitle = titleContainer.querySelector(':not(.lovely-chart--state-hidden)');\n\n      if (!titleContainer.innerHTML || !currentTitle) {\n        titleContainer.innerHTML = `<span>${title}</span>`;\n      } else {\n        currentTitle.innerHTML = title;\n      }\n    }\n  }\n\n  function _insertNewDataSet(dataSetContainer, { name, key, value }, totalValue) {\n    const className = `lovely-chart--tooltip-dataset-value lovely-chart--position-right lovely-chart--color-${data.colors[key].slice(1)}`;\n    const newDataSet = createElement();\n    newDataSet.className = 'lovely-chart--tooltip-dataset';\n    newDataSet.setAttribute('data-present', 'true');\n    newDataSet.setAttribute('data-name', name);\n    newDataSet.innerHTML = `<span class=\"lovely-chart--dataset-title\">${name}</span><span class=\"${className}\">${formatInteger(value)}</span>`;\n    _renderPercentageValue(newDataSet, value, totalValue);\n\n    const totalText = dataSetContainer.querySelector(`[data-total=\"true\"]`);\n    if (totalText) {\n      dataSetContainer.insertBefore(newDataSet, totalText);\n    } else {\n      dataSetContainer.appendChild(newDataSet);\n    }\n  }\n\n  function _updateDataSet(currentDataSet, { key, value } = {}, totalValue) {\n    currentDataSet.setAttribute('data-present', 'true');\n\n    const valueElement = currentDataSet.querySelector(`.lovely-chart--tooltip-dataset-value.lovely-chart--color-${data.colors[key].slice(1)}:not(.lovely-chart--state-hidden)`);\n\n    if (data.isCurrency) {\n      valueElement.innerHTML = formatCryptoValue(value);\n    } else {\n      valueElement.innerHTML = formatInteger(value);\n    }\n\n    _renderPercentageValue(currentDataSet, value, totalValue);\n  }\n\n  function _renderPercentageValue(dataSet, value, totalValue) {\n    if (!data.isPercentage) {\n      return;\n    }\n\n    if (data.isPie) {\n      Array.from(dataSet.querySelectorAll(`.lovely-chart--percentage-title`)).forEach(e => e.remove());\n      return;\n    }\n\n    const percentageValue = totalValue ? Math.round(value / totalValue * 100) : 0;\n    const percentageElement = dataSet.querySelector(`.lovely-chart--percentage-title:not(.lovely-chart--state-hidden)`);\n\n    if (!percentageElement) {\n      const newPercentageTitle = createElement('span');\n      newPercentageTitle.className = 'lovely-chart--percentage-title lovely-chart--position-left';\n      newPercentageTitle.innerHTML = `${percentageValue}%`;\n      dataSet.prepend(newPercentageTitle);\n    } else {\n      percentageElement.innerHTML = `${percentageValue}%`;\n    }\n  }\n\n  function _updateDataSets(statistics) {\n    const dataSetContainer = _balloon.children[1];\n    if (data.isPie) {\n      dataSetContainer.classList.add('lovely-chart--tooltip-legend-pie');\n    }\n\n    Array.from(dataSetContainer.children).forEach((dataSet) => {\n      if (!data.isPie && dataSetContainer.classList.contains('lovely-chart--tooltip-legend-pie')) {\n        dataSet.remove();\n      } else {\n        dataSet.setAttribute('data-present', 'false');\n      }\n    });\n\n    const totalValue = statistics.reduce((a, x) => a + x.value, 0);\n    const pointerVector = getPointerVector();\n    const finalStatistics = data.isPie ? statistics.filter(({ value }, index) => _isPieSectorSelected(statistics, value, totalValue, index, pointerVector)) : statistics;\n\n    finalStatistics.forEach((statItem) => {\n      const currentDataSet = dataSetContainer.querySelector(`[data-name=\"${statItem.name}\"]`);\n\n      if (!currentDataSet) {\n        _insertNewDataSet(dataSetContainer, statItem, totalValue);\n      } else {\n        _updateDataSet(currentDataSet, statItem, totalValue);\n      }\n    });\n\n    if ((data.isBars || data.isSteps) && data.isStacked) {\n      _renderTotal(dataSetContainer, formatInteger(totalValue));\n    }\n\n    if (data.isCurrency) {\n      _renderCurrencyRate(dataSetContainer, formatCryptoValue(totalValue));\n    }\n\n    Array.from(dataSetContainer.querySelectorAll('[data-present=\"false\"]'))\n      .forEach((dataSet) => {\n        dataSet.remove();\n      });\n  }\n\n  function _updateContent(title, statistics) {\n    _updateTitle(title);\n    _updateDataSets(statistics);\n  }\n\n  function _renderTotal(dataSetContainer, totalValue) {\n    const totalText = dataSetContainer.querySelector(`[data-total=\"true\"]`);\n    const className = `lovely-chart--tooltip-dataset-value lovely-chart--position-right`;\n    if (!totalText) {\n      const newTotalText = createElement();\n      newTotalText.className = 'lovely-chart--tooltip-dataset';\n      newTotalText.setAttribute('data-present', 'true');\n      newTotalText.setAttribute('data-total', 'true');\n      newTotalText.innerHTML = `<span>All</span><span class=\"${className}\">${totalValue}</span>`;\n      dataSetContainer.appendChild(newTotalText);\n    } else {\n      totalText.setAttribute('data-present', 'true');\n\n      const valueElement = totalText.querySelector(`.lovely-chart--tooltip-dataset-value:not(.lovely-chart--state-hidden)`);\n      valueElement.innerHTML = totalValue;\n    }\n  }\n\n  function _renderCurrencyRate(dataSetContainer, totalValue) {\n    const totalText = dataSetContainer.querySelector(`[data-total=\"true\"]`);\n    const className = `lovely-chart--tooltip-dataset-value lovely-chart--position-right`;\n\n    const totalUsd = (parseFloat(totalValue) * data.currencyRate).toFixed(2);\n\n    if (!totalText) {\n      const newTotalText = createElement();\n      newTotalText.className = 'lovely-chart--tooltip-dataset';\n      newTotalText.setAttribute('data-present', 'true');\n      newTotalText.setAttribute('data-total', 'true');\n      newTotalText.innerHTML = `<span>USD ≈</span><span class=\"${className}\">$${totalUsd}</span>`;\n      dataSetContainer.appendChild(newTotalText);\n    } else {\n      totalText.setAttribute('data-present', 'true');\n\n      const valueElement = totalText.querySelector(`.lovely-chart--tooltip-dataset-value:not(.lovely-chart--state-hidden)`);\n      valueElement.innerHTML = `$${totalUsd}`;\n    }\n  }\n\n\n  function _hideBalloon() {\n    _balloon.classList.remove('lovely-chart--state-shown');\n  }\n\n  function getPointerVector() {\n    const { width, height } = _element.getBoundingClientRect();\n\n    const center = [width / 2, height / 2];\n    const angle = Math.atan2(_offsetY - center[1], _offsetX - center[0]);\n    const distance = Math.sqrt((_offsetX - center[0]) ** 2 + (_offsetY - center[1]) ** 2);\n\n    return {\n      angle: angle >= -Math.PI / 2 ? angle : 2 * Math.PI + angle,\n      distance,\n    };\n  }\n\n  function _getPageOffset(el) {\n    return el.getBoundingClientRect();\n  }\n\n  return { update, toggleLoading, toggleIsZoomed };\n}\n\n","import { SPEED_TEST_FAST_FPS, SPEED_TEST_INTERVAL, TRANSITION_DEFAULT_DURATION } from './constants';\n\nfunction transition(t) {\n  // faster\n  // return -t * (t - 2);\n  // easeOut\n  return 1 - Math.pow(1 - t, 1.675);\n}\n\nexport function createTransitionManager(onTick) {\n  const _transitions = {};\n\n  let _nextFrame = null;\n\n  let _testStartedAt = null;\n  let _fps = null;\n  let _testingFps = null;\n  let _slowDetectedAt = null;\n  let _startedAsSlow = null;\n\n  function add(prop, from, to, duration, options) {\n    _transitions[prop] = {\n      from,\n      to,\n      duration,\n      options,\n      current: from,\n      startedAt: Date.now(),\n      progress: 0,\n    };\n\n    if (!_nextFrame) {\n      _resetSpeedTest();\n      _nextFrame = requestAnimationFrame(_tick);\n    }\n  }\n\n  function remove(prop) {\n    delete _transitions[prop];\n\n    if (!isRunning()) {\n      cancelAnimationFrame(_nextFrame);\n      _nextFrame = null;\n    }\n  }\n\n  function get(prop) {\n    return _transitions[prop];\n  }\n\n  function getState() {\n    const state = {};\n\n    Object.keys(_transitions).forEach((prop) => {\n      const { current, from, to, progress } = _transitions[prop];\n      state[prop] = current;\n      // TODO perf lazy\n      state[`${prop}From`] = from;\n      state[`${prop}To`] = to;\n      state[`${prop}Progress`] = progress;\n    });\n\n    return state;\n  }\n\n  function isRunning() {\n    return Boolean(Object.keys(_transitions).length);\n  }\n\n  function isFast(forceCheck) {\n    if (!forceCheck && (_startedAsSlow || _slowDetectedAt)) {\n      return false;\n    }\n\n    return _fps === null || _fps >= SPEED_TEST_FAST_FPS;\n  }\n\n  function _tick() {\n    const isSlow = !isFast();\n    _speedTest();\n\n    const state = {};\n\n    Object.keys(_transitions).forEach((prop) => {\n      const { startedAt, from, to, duration = TRANSITION_DEFAULT_DURATION, options } = _transitions[prop];\n      const progress = Math.min(1, (Date.now() - startedAt) / duration);\n      let current = from + (to - from) * transition(progress);\n\n      if (options.includes('ceil')) {\n        current = Math.ceil(current);\n      } else if (options.includes('floor')) {\n        current = Math.floor(current);\n      }\n\n      _transitions[prop].current = current;\n      _transitions[prop].progress = progress;\n      state[prop] = current;\n\n      if (progress === 1) {\n        remove(prop);\n      }\n    });\n\n    if (!isSlow) {\n      onTick(state);\n    }\n\n    if (isRunning()) {\n      _nextFrame = requestAnimationFrame(_tick);\n    }\n  }\n\n  function _resetSpeedTest() {\n    _testStartedAt = null;\n    _testingFps = null;\n    if (_slowDetectedAt && Date.now() - _slowDetectedAt > 5000) {\n      _slowDetectedAt = null;\n    }\n    _startedAsSlow = Boolean(_slowDetectedAt) || !isFast(true);\n  }\n\n  function _speedTest() {\n    if (!_testStartedAt || (Date.now() - _testStartedAt) >= SPEED_TEST_INTERVAL) {\n      if (_testingFps) {\n        _fps = _testingFps;\n        if (!_slowDetectedAt && !isFast(true)) {\n          _slowDetectedAt = Date.now();\n        }\n      }\n      _testStartedAt = Date.now();\n      _testingFps = 0;\n    } else {\n      _testingFps++;\n    }\n  }\n\n  return { add, remove, get, getState, isRunning, isFast };\n}\n","import { analyzeData } from './data';\nimport { getFullLabelDate } from './format';\nimport { ZOOM_RANGE_DELTA, ZOOM_RANGE_MIDDLE, ZOOM_TIMEOUT } from './constants';\nimport { createColors } from './skin';\n\nexport function createZoomer(data, overviewData, colors, stateManager, container, header, minimap, tooltip, tools) {\n  let _isZoomed = false;\n  let _stateBeforeZoomIn;\n  let _stateBeforeZoomOut;\n\n  function zoomIn(state, labelIndex) {\n    if (_isZoomed) {\n      return;\n    }\n\n    const label = data.xLabels[labelIndex];\n\n    _stateBeforeZoomIn = state;\n    header.toggleIsZooming(true);\n    tooltip.toggleLoading(true);\n    tooltip.toggleIsZoomed(true);\n    if (data.shouldZoomToPie) {\n      container.classList.add('lovely-chart--state-zoomed-in');\n      container.classList.add('lovely-chart--state-animating');\n    }\n\n    const { value } = label;\n    const dataPromise = data.shouldZoomToPie ? Promise.resolve(_generatePieData(labelIndex)) : data.onZoom(value);\n    dataPromise.then((newData) => _replaceData(newData, labelIndex, label));\n  }\n\n  function zoomOut(state) {\n    if (!_isZoomed) {\n      return;\n    }\n\n    _stateBeforeZoomOut = state;\n    header.toggleIsZooming(true);\n    tooltip.toggleLoading(true);\n    tooltip.toggleIsZoomed(false);\n    if (data.shouldZoomToPie) {\n      container.classList.remove('lovely-chart--state-zoomed-in');\n      container.classList.add('lovely-chart--state-animating');\n    }\n\n    const labelIndex = Math.round((state.labelFromIndex + state.labelToIndex) / 2);\n    _replaceData(overviewData, labelIndex);\n  }\n\n  function isZoomed() {\n    return _isZoomed;\n  }\n\n  function _replaceData(newRawData, labelIndex, zoomInLabel) {\n    if (!newRawData) {\n      tooltip.toggleLoading(false);\n      tooltip.toggleIsZoomed(false);\n      header.toggleIsZooming(false);\n\n      return;\n    }\n\n    tooltip.toggleLoading(false);\n\n    const labelWidth = 1 / data.xLabels.length;\n    const labelMiddle = labelIndex / (data.xLabels.length - 1);\n    const filter = {};\n    data.datasets.forEach(({ key }) => filter[key] = false);\n    const newData = analyzeData(newRawData, _isZoomed || data.shouldZoomToPie ? 'day' : 'hour');\n    const shouldZoomToLines = Object.keys(data.datasets).length !== Object.keys(newData.datasets).length;\n\n    stateManager.update({\n      range: {\n        begin: labelMiddle - labelWidth / 2,\n        end: labelMiddle + labelWidth / 2,\n      },\n      filter,\n    });\n\n    setTimeout(() => {\n      Object.assign(data, newData);\n\n      if (shouldZoomToLines && newRawData.colors) {\n        Object.assign(colors, createColors(newRawData.colors));\n      }\n\n      if (shouldZoomToLines) {\n        minimap.toggle(_isZoomed);\n        tools.redraw();\n        container.style.width = `${container.scrollWidth}px`;\n        container.style.height = `${container.scrollHeight}px`;\n      }\n\n      stateManager.update({\n        range: {\n          begin: ZOOM_RANGE_MIDDLE - ZOOM_RANGE_DELTA,\n          end: ZOOM_RANGE_MIDDLE + ZOOM_RANGE_DELTA,\n        },\n        focusOn: null,\n      }, true);\n\n      const daysCount = _isZoomed || data.shouldZoomToPie ? data.xLabels.length : data.xLabels.length / 24;\n      const halfDayWidth = (1 / daysCount) / 2;\n\n      let range;\n      let filter;\n\n      if (_isZoomed) {\n        range = {\n          begin: _stateBeforeZoomIn.begin,\n          end: _stateBeforeZoomIn.end,\n        };\n        filter = shouldZoomToLines ? _stateBeforeZoomIn.filter : _stateBeforeZoomOut.filter;\n      } else {\n        if (shouldZoomToLines) {\n          range = {\n            begin: 0,\n            end: 1,\n          };\n          filter = {};\n          data.datasets.forEach(({ key }) => filter[key] = true);\n        } else {\n          range = data.shouldZoomToPie ? {\n            begin: ZOOM_RANGE_MIDDLE - halfDayWidth,\n            end: ZOOM_RANGE_MIDDLE + halfDayWidth,\n          } : newData.minimapRange;\n          filter = _stateBeforeZoomIn.filter;\n        }\n      }\n\n      stateManager.update({\n        range,\n        filter,\n        minimapDelta: _isZoomed ? null : range.end - range.begin,\n      });\n\n      if (zoomInLabel) {\n        header.zoom(getFullLabelDate(zoomInLabel));\n      }\n\n      _isZoomed = !_isZoomed;\n      header.toggleIsZooming(false);\n    }, stateManager.hasAnimations() ? ZOOM_TIMEOUT : 0);\n\n    setTimeout(() => {\n      if (data.shouldZoomToPie) {\n        container.classList.remove('lovely-chart--state-animating');\n      }\n    }, stateManager.hasAnimations() ? 1000 : 0);\n  }\n\n  function _generatePieData(labelIndex) {\n    return Object.assign(\n      {},\n      overviewData,\n      {\n        type: 'pie',\n        labels: overviewData.labels.slice(labelIndex - 3, labelIndex + 4),\n        datasets: overviewData.datasets.map((dataset) => {\n          return {\n            ...dataset,\n            values: dataset.values.slice(labelIndex - 3, labelIndex + 4),\n          };\n        }),\n      },\n    );\n  }\n\n  return { zoomIn, zoomOut, isZoomed };\n}\n","import { DPR } from './constants';\nimport { createElement } from './minifiers';\n\nexport function setupCanvas(container, { width, height }) {\n  const canvas = createElement('canvas');\n\n  canvas.width = width * DPR;\n  canvas.height = height * DPR;\n  canvas.style.width = '100%';\n  canvas.style.height = `${height}px`;\n\n  const context = canvas.getContext('2d');\n  context.scale(DPR, DPR);\n\n  container.appendChild(canvas);\n\n  return { canvas, context };\n}\n\nexport function clearCanvas(canvas, context) {\n  context.clearRect(0, 0, canvas.width, canvas.height);\n}\n","import { addEventListener, removeEventListener } from './minifiers';\nimport { LONG_PRESS_TIMEOUT } from './constants';\n\nexport function captureEvents(element, options) {\n  let captureEvent = null;\n  let longPressTimeout = null;\n\n  function onCapture(e) {\n    captureEvent = e;\n\n    if (e.type === 'mousedown') {\n      addEventListener(document, 'mousemove', onMove);\n      addEventListener(document, 'mouseup', onRelease);\n    } else if (e.type === 'touchstart') {\n      addEventListener(document, 'touchmove', onMove);\n      addEventListener(document, 'touchend', onRelease);\n      addEventListener(document, 'touchcancel', onRelease);\n\n      // https://stackoverflow.com/questions/11287877/how-can-i-get-e-offsetx-on-mobile-ipad\n      // Android does not have this value, and iOS has it but as read-only.\n      if (e.pageX === undefined) {\n        e.pageX = e.touches[0].pageX;\n      }\n    }\n\n    if (options.draggingCursor) {\n      document.body.classList.add(`cursor-${options.draggingCursor}`);\n    }\n\n    options.onCapture && options.onCapture(e);\n\n    if (options.onLongPress) {\n      longPressTimeout = setTimeout(() => options.onLongPress(), LONG_PRESS_TIMEOUT);\n    }\n  }\n\n  function onRelease(e) {\n    if (captureEvent) {\n      if (longPressTimeout) {\n        clearTimeout(longPressTimeout);\n        longPressTimeout = null;\n      }\n\n      if (options.draggingCursor) {\n        document.body.classList.remove(`cursor-${options.draggingCursor}`);\n      }\n\n      removeEventListener(document, 'mouseup', onRelease);\n      removeEventListener(document, 'mousemove', onMove);\n      removeEventListener(document, 'touchcancel', onRelease);\n      removeEventListener(document, 'touchend', onRelease);\n      removeEventListener(document, 'touchmove', onMove);\n\n      captureEvent = null;\n\n      options.onRelease && options.onRelease(e);\n    }\n  }\n\n  function onMove(e) {\n    if (captureEvent) {\n      if (longPressTimeout) {\n        clearTimeout(longPressTimeout);\n        longPressTimeout = null;\n      }\n\n      if (e.type === 'touchmove' && e.pageX === undefined) {\n        e.pageX = e.touches[0].pageX;\n      }\n\n      options.onDrag && options.onDrag(e, captureEvent, {\n        dragOffsetX: e.pageX - captureEvent.pageX,\n      });\n    }\n  }\n\n  addEventListener(element, 'mousedown', onCapture);\n  addEventListener(element, 'touchstart', onCapture);\n}\n","export const DPR = window.devicePixelRatio || 1;\n\nexport const DEFAULT_RANGE = { begin: 0.8, end: 1 };\nexport const TRANSITION_DEFAULT_DURATION = 300;\nexport const LONG_PRESS_TIMEOUT = 500;\n\nexport const GUTTER = 10;\nexport const PLOT_HEIGHT = 320;\nexport const PLOT_TOP_PADDING = 15;\nexport const PLOT_LINE_WIDTH = 2;\nexport const PLOT_PIE_RADIUS_FACTOR = 0.9 / 2;\nexport const PLOT_PIE_SHIFT = 10;\nexport const PLOT_BARS_WIDTH_SHIFT = 0.5;\n\nexport const PIE_MINIMUM_VISIBLE_PERCENT = 0.02;\n\nexport const BALLOON_OFFSET = 20;\n\nexport const AXES_FONT = '300 10px Helvetica, Arial, sans-serif';\nexport const AXES_MAX_COLUMN_WIDTH = 45;\nexport const AXES_MAX_ROW_HEIGHT = 50;\nexport const X_AXIS_HEIGHT = 30;\nexport const X_AXIS_SHIFT_START = 1;\nexport const Y_AXIS_ZERO_BASED_THRESHOLD = 0.1;\n\nexport const MINIMAP_HEIGHT = 40;\nexport const MINIMAP_MARGIN = 10;\nexport const MINIMAP_LINE_WIDTH = 1;\nexport const MINIMAP_EAR_WIDTH = 8;\nexport const MINIMAP_MAX_ANIMATED_DATASETS = 4;\n\nexport const ZOOM_TIMEOUT = TRANSITION_DEFAULT_DURATION;\nexport const ZOOM_RANGE_DELTA = 0.1;\nexport const ZOOM_RANGE_MIDDLE = .5;\n\nexport const MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nexport const WEEK_DAYS = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\nexport const WEEK_DAYS_SHORT = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\nexport const MILISECONDS_IN_DAY = 24 * 60 * 60 * 1000;\n\nexport const SPEED_TEST_INTERVAL = 200;\nexport const SPEED_TEST_FAST_FPS = 4;\n\nexport const SIMPLIFIER_MIN_POINTS = 1000;\nexport const SIMPLIFIER_PLOT_FACTOR = 1;\nexport const SIMPLIFIER_MINIMAP_FACTOR = 0.5;\n\nexport const ANIMATE_PROPS = [\n  // Viewport X-axis\n  'begin 200 fast', 'end 200 fast', 'labelFromIndex 200 fast floor', 'labelToIndex 200 fast ceil',\n\n  // X-axis labels\n  'xAxisScale 400',\n\n  // Viewport Y-axis\n  'yMinViewport', 'yMaxViewport', 'yMinViewportSecond', 'yMaxViewportSecond',\n\n  // Minimap Y-axis\n  'yMinMinimap', 'yMaxMinimap', 'yMinMinimapSecond', 'yMaxMinimapSecond',\n\n  // Y-axis labels\n  'yAxisScale', 'yAxisScaleSecond',\n];\n","import { getMaxMin } from './utils';\nimport { statsFormatDay, statsFormatDayHour, statsFormatText, statsFormatMin } from './format';\n\nexport function analyzeData(data) {\n  const { title, labelFormatter, tooltipFormatter, isStacked, isPercentage, isCurrency, currencyRate, hasSecondYAxis, onZoom, minimapRange, hideCaption, zoomOutLabel } = data;\n  const { datasets, labels } = prepareDatasets(data);\n\n  const colors = {};\n  let totalYMin = Infinity;\n  let totalYMax = -Infinity;\n  datasets.forEach(({ key, color, yMin, yMax }) => {\n    colors[key] = color;\n\n    if (yMin < totalYMin) {\n      totalYMin = yMin;\n    }\n\n    if (yMax > totalYMax) {\n      totalYMax = yMax;\n    }\n  });\n\n  let effectiveLabelFormatter = labelFormatter;\n  if (isCurrency) {\n    effectiveLabelFormatter = 'statsFormat(\\'day\\')';\n  }\n\n  let xLabels;\n  switch (effectiveLabelFormatter) {\n    case 'statsFormatDayHour':\n      xLabels = statsFormatDayHour(labels);\n      break;\n    case 'statsFormat(\\'day\\')':\n      xLabels = statsFormatDay(labels);\n      break;\n    case 'statsFormat(\\'hour\\')':\n    case 'statsFormat(\\'5min\\')':\n      xLabels = statsFormatMin(labels);\n      break;\n    default:\n      xLabels = statsFormatText(labels);\n      break;\n  }\n\n  const analyzed = {\n    title,\n    labelFormatter,\n    tooltipFormatter,\n    xLabels,\n    datasets,\n    isStacked,\n    isPercentage,\n    isCurrency,\n    currencyRate,\n    hasSecondYAxis,\n    onZoom,\n    isLines: data.type === 'line',\n    isBars: data.type === 'bar',\n    isSteps: data.type === 'step',\n    isAreas: data.type === 'area',\n    isPie: data.type === 'pie',\n    yMin: totalYMin,\n    yMax: totalYMax,\n    colors,\n    minimapRange,\n    hideCaption,\n    zoomOutLabel,\n  };\n\n  analyzed.shouldZoomToPie = !analyzed.onZoom && analyzed.isPercentage;\n  analyzed.isZoomable = analyzed.onZoom || analyzed.shouldZoomToPie;\n\n  return analyzed;\n}\n\nfunction prepareDatasets(data) {\n  const { type, labels, datasets, hasSecondYAxis } = data;\n\n  return {\n    labels: cloneArray(labels),\n    datasets: datasets.map(({ name, color, values }, i) => {\n      const { min: yMin, max: yMax } = getMaxMin(values);\n\n      return {\n        type,\n        key: `y${i}`,\n        name,\n        color,\n        values: cloneArray(values),\n        hasOwnYAxis: hasSecondYAxis && i === datasets.length - 1,\n        yMin,\n        yMax,\n      };\n    }),\n  };\n}\n\nfunction cloneArray(array) {\n  return array.slice(0);\n}\n","import { getCssColor } from './skin';\nimport { mergeArrays } from './utils';\nimport { getPieRadius, getPieTextShift, getPieTextSize } from './formulas';\nimport { PLOT_BARS_WIDTH_SHIFT, PLOT_PIE_SHIFT, PIE_MINIMUM_VISIBLE_PERCENT } from './constants';\nimport { simplify } from './simplify';\nimport { toPixels } from './Projection';\n\nexport function drawDatasets(\n  context, state, data,\n  range, points, projection, secondaryPoints, secondaryProjection,\n  lineWidth, visibilities, colors, pieToBar, simplification,\n) {\n  data.datasets.forEach(({ key, type, hasOwnYAxis }, i) => {\n    if (!visibilities[i]) {\n      return;\n    }\n\n    const options = {\n      color: getCssColor(colors, `dataset#${key}`),\n      lineWidth,\n      opacity: data.isStacked ? 1 : visibilities[i],\n      simplification,\n    };\n\n    const datasetType = type === 'pie' && pieToBar ? 'bar' : type;\n    let datasetPoints = hasOwnYAxis ? secondaryPoints : points[i];\n    let datasetProjection = hasOwnYAxis ? secondaryProjection : projection;\n\n    if (datasetType === 'area') {\n      const { yMin, yMax } = projection.getParams();\n      const yHeight = yMax - yMin;\n      const bottomLine = [\n        { labelIndex: range.from, stackValue: 0 },\n        { labelIndex: range.to, stackValue: 0 },\n      ];\n      const topLine = [\n        { labelIndex: range.to, stackValue: yHeight },\n        { labelIndex: range.from, stackValue: yHeight },\n      ];\n\n      datasetPoints = mergeArrays([points[i - 1] || bottomLine, topLine]);\n    }\n\n    if (datasetType === 'pie') {\n      options.center = projection.getCenter();\n      options.radius = getPieRadius(projection);\n      options.pointerVector = state.focusOn;\n    }\n\n    if (datasetType === 'bar') {\n      const [x0] = toPixels(projection, 0, 0);\n      const [x1] = toPixels(projection, 1, 0);\n\n      options.lineWidth = x1 - x0;\n      options.focusOn = state.focusOn;\n    }\n\n    drawDataset(datasetType, context, datasetPoints, datasetProjection, options);\n  });\n\n  if (state.focusOn && (data.isBars || data.isSteps)) {\n    const [x0] = toPixels(projection, 0, 0);\n    const [x1] = toPixels(projection, 1, 0);\n\n    drawBarsMask(context, projection, {\n      focusOn: state.focusOn,\n      color: getCssColor(colors, 'mask'),\n      lineWidth: data.isSteps ? x1 - x0 + lineWidth : x1 - x0,\n    });\n  }\n}\n\nfunction drawDataset(type, ...args) {\n  switch (type) {\n    case 'line':\n      return drawDatasetLine(...args);\n    case 'bar':\n      return drawDatasetBars(...args);\n    case 'step':\n      return drawDatasetSteps(...args);\n    case 'area':\n      return drawDatasetArea(...args);\n    case 'pie':\n      return drawDatasetPie(...args);\n  }\n}\n\nfunction drawDatasetLine(context, points, projection, options) {\n  context.beginPath();\n\n  let pixels = [];\n\n  for (let j = 0, l = points.length; j < l; j++) {\n    const { labelIndex, stackValue } = points[j];\n    pixels.push(toPixels(projection, labelIndex, stackValue));\n  }\n\n  if (options.simplification) {\n    const simplifierFn = simplify(pixels);\n    pixels = simplifierFn(options.simplification).points;\n  }\n\n  pixels.forEach(([x, y]) => {\n    context.lineTo(x, y);\n  });\n\n  context.save();\n  context.strokeStyle = options.color;\n  context.lineWidth = options.lineWidth;\n  context.globalAlpha = options.opacity;\n  context.lineJoin = 'bevel';\n  context.lineCap = 'butt';\n  context.stroke();\n  context.restore();\n}\n\n// TODO try areas\nfunction drawDatasetBars(context, points, projection, options) {\n  const { yMin } = projection.getParams();\n\n  context.save();\n  context.globalAlpha = options.opacity;\n  context.fillStyle = options.color;\n\n  for (let j = 0, l = points.length; j < l; j++) {\n    const { labelIndex, stackValue, stackOffset = 0 } = points[j];\n\n    const [, yFrom] = toPixels(projection, labelIndex, Math.max(stackOffset, yMin));\n    const [x, yTo] = toPixels(projection, labelIndex, stackValue);\n    const rectX = x - options.lineWidth / 2;\n    const rectY = yTo;\n    const rectW = options.opacity === 1 ?\n      options.lineWidth + PLOT_BARS_WIDTH_SHIFT :\n      options.lineWidth + PLOT_BARS_WIDTH_SHIFT * options.opacity;\n    const rectH = yFrom - yTo;\n\n    context.fillRect(rectX, rectY, rectW, rectH);\n  }\n\n  context.restore();\n}\n\nfunction drawDatasetSteps(context, points, projection, options) {\n  context.beginPath();\n\n  let pixels = [];\n\n  for (let j = 0, l = points.length; j < l; j++) {\n    const { labelIndex, stackValue } = points[j];\n    pixels.push(\n      toPixels(projection, labelIndex - PLOT_BARS_WIDTH_SHIFT, stackValue),\n      toPixels(projection, labelIndex + PLOT_BARS_WIDTH_SHIFT, stackValue),\n    );\n  }\n\n  pixels.forEach(([x, y]) => {\n    context.lineTo(x, y);\n  });\n\n  context.save();\n  context.strokeStyle = options.color;\n  context.lineWidth = options.lineWidth;\n  context.globalAlpha = options.opacity;\n  context.stroke();\n  context.restore();\n}\n\nfunction drawBarsMask(context, projection, options) {\n  const [xCenter, yCenter] = projection.getCenter();\n  const [width, height] = projection.getSize();\n\n  const [x] = toPixels(projection, options.focusOn, 0);\n\n  context.fillStyle = options.color;\n  context.fillRect(xCenter - width / 2, yCenter - height / 2, x - options.lineWidth / 2 + PLOT_BARS_WIDTH_SHIFT, height);\n  context.fillRect(x + options.lineWidth / 2, yCenter - height / 2, width - (x + options.lineWidth / 2), height);\n}\n\nfunction drawDatasetArea(context, points, projection, options) {\n  context.beginPath();\n\n  let pixels = [];\n\n  for (let j = 0, l = points.length; j < l; j++) {\n    const { labelIndex, stackValue } = points[j];\n    pixels.push(toPixels(projection, labelIndex, stackValue));\n  }\n\n  if (options.simplification) {\n    const simplifierFn = simplify(pixels);\n    pixels = simplifierFn(options.simplification).points;\n  }\n\n  pixels.forEach(([x, y]) => {\n    context.lineTo(x, y);\n  });\n\n  context.save();\n  context.fillStyle = options.color;\n  context.lineWidth = options.lineWidth;\n  context.globalAlpha = options.opacity;\n  context.lineJoin = 'bevel';\n  context.lineCap = 'butt';\n  context.fill();\n  context.restore();\n}\n\nfunction drawDatasetPie(context, points, projection, options) {\n  const { visibleValue, stackValue, stackOffset = 0 } = points[0];\n\n  if (!visibleValue) {\n    return;\n  }\n\n  const { yMin, yMax } = projection.getParams();\n  const percentFactor = 1 / (yMax - yMin);\n  const percent = visibleValue * percentFactor;\n\n  const beginAngle = stackOffset * percentFactor * Math.PI * 2 - Math.PI / 2;\n  const endAngle = stackValue * percentFactor * Math.PI * 2 - Math.PI / 2;\n\n  const { radius = 120, center: [x, y], pointerVector } = options;\n\n  const shift = (\n    pointerVector &&\n    beginAngle <= pointerVector.angle &&\n    pointerVector.angle < endAngle &&\n    pointerVector.distance <= radius\n  ) ? PLOT_PIE_SHIFT : 0;\n\n  const shiftAngle = (beginAngle + endAngle) / 2;\n  const directionX = Math.cos(shiftAngle);\n  const directionY = Math.sin(shiftAngle);\n  const shiftX = directionX * shift;\n  const shiftY = directionY * shift;\n\n  context.save();\n\n  context.beginPath();\n  context.fillStyle = options.color;\n  context.moveTo(x + shiftX, y + shiftY);\n  context.arc(x + shiftX, y + shiftY, radius, beginAngle, endAngle);\n  context.lineTo(x + shiftX, y + shiftY);\n  context.fill();\n\n  if (percent >= PIE_MINIMUM_VISIBLE_PERCENT) {\n    context.font = `700 ${getPieTextSize(percent, radius)}px Helvetica, Arial, sans-serif`;\n    context.textAlign = 'center';\n    context.textBaseline = 'middle';\n    context.fillStyle = 'white';\n    const textShift = getPieTextShift(percent, radius);\n    context.fillText(\n      `${Math.round(percent * 100)}%`, x + directionX * textShift + shiftX, y + directionY * textShift + shiftY,\n    );\n  }\n\n  context.restore();\n}\n","import { MONTHS, WEEK_DAYS, WEEK_DAYS_SHORT } from './constants';\n\nexport function statsFormatDayHour(labels) {\n  return labels.map((value) => ({\n    value,\n    text: `${value}:00`,\n  }));\n}\n\nexport function statsFormatDayHourFull(value) {\n  return `${value}:00`;\n}\n\nexport function statsFormatDay(labels) {\n  return labels.map((value) => {\n    const date = new Date(value);\n    const day = date.getDate();\n    const month = MONTHS[date.getMonth()];\n\n    return ({\n      value,\n      text: `${day} ${month}`,\n    });\n  });\n}\n\nexport function statsFormatMin(labels) {\n  return labels.map((value) => ({\n    value,\n    text: new Date(value).toString().match(/(\\d+:\\d+):/)[1],\n  }));\n}\n\nexport function statsFormatText(labels) {\n  return labels.map((value, i) => {\n    return ({\n      value: i,\n      text: value,\n    });\n  });\n}\n\nexport function humanize(value, decimals = 1) {\n  if (value >= 1e6) {\n    return keepThreeDigits(value / 1e6, decimals) + 'M';\n  } else if (value >= 1e3) {\n    return keepThreeDigits(value / 1e3, decimals) + 'K';\n  }\n\n  return value;\n}\n\n// TODO perf\nfunction keepThreeDigits(value, decimals) {\n  return value\n    .toFixed(decimals)\n    .replace(/(\\d{3,})\\.\\d+/, '$1')\n    .replace(/\\.0+$/, '');\n}\n\nexport function formatInteger(n) {\n  return String(n).replace(/\\d(?=(\\d{3})+$)/g, '$& ');\n}\n\nexport function formatCryptoValue(n) {\n  return Number(n / 10 ** 9);\n}\n\nexport function getFullLabelDate(label, { isShort = false } = {}) {\n  return getLabelDate(label, { isShort, displayWeekDay: true });\n}\n\nexport function getLabelDate(label, { isShort = false, displayWeekDay = false, displayYear = true, displayHours = false } = {}) {\n  const { value } = label;\n  const date = new Date(value);\n  const weekDaysArray = isShort ? WEEK_DAYS_SHORT : WEEK_DAYS;\n\n  let string = `${date.getUTCDate()} ${MONTHS[date.getUTCMonth()]}`;\n  if (displayWeekDay) {\n    string = `${weekDaysArray[date.getUTCDay()]}, ` + string;\n  }\n  if (displayYear) {\n    string += ` ${date.getUTCFullYear()}`;\n  }\n  if (displayHours) {\n    string += `, ${('0' + date.getUTCHours()).slice(-2)}:${('0' + date.getUTCMinutes()).slice(-2)}`\n  }\n\n  return string;\n}\n\nexport function getLabelTime(label) {\n  return new Date(label.value).toString().match(/(\\d+:\\d+):/)[1];\n}\n","import { GUTTER, PLOT_PIE_RADIUS_FACTOR, MILISECONDS_IN_DAY, SIMPLIFIER_MIN_POINTS } from './constants';\n\nexport function xScaleLevelToStep(scaleLevel) {\n  return Math.pow(2, scaleLevel);\n}\n\nexport function xStepToScaleLevel(step) {\n  return Math.ceil(Math.log2(step || 1));\n}\n\nconst SCALE_LEVELS = [\n  1, 2, 8, 18, 50, 100, 250, 500, 1000, 2500, 5000, 10000, 25000, 50000, 100000,\n  250000, 500000, 1000000, 2500000, 5000000, 10000000, 25000000, 50000000, 100000000,\n];\n\nexport function yScaleLevelToStep(scaleLevel) {\n  return SCALE_LEVELS[scaleLevel] || SCALE_LEVELS[SCALE_LEVELS.length - 1];\n}\n\nexport function yStepToScaleLevel(neededStep) {\n  return SCALE_LEVELS.findIndex((step) => step >= neededStep) || SCALE_LEVELS.length - 1;\n}\n\nexport function applyYEdgeOpacity(opacity, xPx, plotWidth) {\n  const edgeOffset = Math.min(xPx + GUTTER, plotWidth - xPx);\n  if (edgeOffset <= GUTTER * 4) {\n    opacity = Math.min(1, opacity, edgeOffset / (GUTTER * 4));\n  }\n  return opacity;\n}\n\nexport function applyXEdgeOpacity(opacity, yPx) {\n  return (yPx - GUTTER <= GUTTER * 2)\n    ? Math.min(1, opacity, (yPx - GUTTER) / (GUTTER * 2))\n    : opacity;\n}\n\nexport function getPieRadius(projection) {\n  return Math.min(...projection.getSize()) * PLOT_PIE_RADIUS_FACTOR;\n}\n\nexport function getPieTextSize(percent, radius) {\n  return (radius + percent * 200) / 10;\n}\n\nexport function getPieTextShift(percent, radius, shift) {\n  return percent >= 0.99 ? 0 : Math.min(1 - Math.log(percent * 30) / 5, 4 / 5) * radius;\n}\n\nexport function isDataRange(labelFrom, labelTo) {\n  return Math.abs(labelTo.value - labelFrom.value) > MILISECONDS_IN_DAY;\n}\n\nexport function getSimplificationDelta(pointsLength) {\n  return pointsLength >= SIMPLIFIER_MIN_POINTS ? Math.min((pointsLength / 1000), 1) : 0;\n}\n","export const createElement = (tagName = 'div') => {\n  return document.createElement(tagName);\n};\n\nexport function addEventListener(element, event, cb) {\n  element.addEventListener(event, cb);\n}\n\nexport function removeEventListener(element, event, cb) {\n  element.removeEventListener(event, cb);\n}\n","import { sumArrays } from './utils';\n\nexport function preparePoints(data, datasets, range, visibilities, bounds, pieToArea) {\n  let values = datasets.map(({ values }) => (\n    values.slice(range.from, range.to + 1)\n  ));\n\n  if (data.isPie && !pieToArea) {\n    values = prepareSumsByX(values);\n  }\n\n  const points = values.map((datasetValues, i) => (\n    datasetValues.map((value, j) => {\n      let visibleValue = value;\n\n      if (data.isStacked) {\n        visibleValue *= visibilities[i];\n      }\n\n      return {\n        labelIndex: range.from + j,\n        value,\n        visibleValue,\n        stackOffset: 0,\n        stackValue: visibleValue,\n      };\n    })\n  ));\n\n  if (data.isPercentage) {\n    preparePercentage(points, bounds);\n  }\n\n  if (data.isStacked) {\n    prepareStacked(points);\n  }\n\n  return points;\n}\n\nfunction getSumsByY(points) {\n  return sumArrays(points.map((datasetPoints) => (\n    datasetPoints.map(({ visibleValue }) => visibleValue)\n  )));\n}\n\n// TODO perf cache for [0..1], use in state\nfunction preparePercentage(points, bounds) {\n  const sumsByY = getSumsByY(points);\n\n  points.forEach((datasetPoints) => {\n    datasetPoints.forEach((point, j) => {\n      point.percent = point.visibleValue / sumsByY[j];\n      point.visibleValue = point.percent * bounds.yMax;\n    });\n  });\n}\n\nfunction prepareStacked(points) {\n  const accum = [];\n\n  points.forEach((datasetPoints) => {\n    datasetPoints.forEach((point, j) => {\n      if (accum[j] === undefined) {\n        accum[j] = 0;\n      }\n\n      point.stackOffset = accum[j];\n      accum[j] += point.visibleValue;\n      point.stackValue = accum[j];\n    });\n  });\n}\n\nfunction prepareSumsByX(values) {\n  return values.map((datasetValues) => (\n    [datasetValues.reduce((sum, value) => sum + value, 0)]\n  ));\n}\n","export const simplify = (() => {\n  function simplify(points, indexes, fixedPoints) {\n    if (points.length < 6) {\n      return function () {\n        return {\n          points: points,\n          indexes: indexes,\n          removed: [],\n        };\n      };\n    }\n\n    let worker = precalculate(points, fixedPoints);\n\n    return function (delta) {\n      let result = [],\n        resultIndexes = [],\n        removed = [];\n\n      let delta2 = delta * delta,\n        markers = worker(delta2);\n\n      for (let i = 0, l = points.length; i < l; i++) {\n        if (markers[i] >= delta2 || i == 0 || i == l - 1) {\n          result.push(points[i]);\n          resultIndexes.push(indexes ? indexes[i] : i);\n        } else {\n          removed.push(i);\n        }\n      }\n      return {\n        points: result,\n        indexes: resultIndexes,\n        removed: removed,\n      };\n    };\n  }\n\n  let E1 = 1.0 / Math.pow(2, 22), // максимальная дельта\n    MAXLIMIT = 100000;\n\n  function precalculate(points, fixedPoints) {\n\n    let len = points.length,\n      distances = [],\n      queue = [],\n      maximumDelta;\n    for (let i = 0, l = points.length; i < l; ++i) {\n      distances[i] = 0;\n    }\n\n    if (!fixedPoints) {\n      fixedPoints = [];\n    }\n\n    //инициализируем дерево срединным значением\n    //чтобы не попадает в ситуации когда начало линии близко к концу(те полигон)\n    //и правильные расчеты сложны\n    let subdivisionTree = 0;\n\n    for (let i = 0, l = fixedPoints.length; i < l; ++i) {\n      distances[fixedPoints[i]] = MAXLIMIT;\n    }\n\n\n    function worker(params) {\n\n      let start = params.start,\n        end = params.end,\n        record = params.record,\n        currentLimit = params.currentLimit,\n        usedDistance = 0;\n\n      if (!record) {\n        //let deltaShifts = getDeltaShifts(points);\n        let usedIndex = -1,\n          vector = [\n            points[end][0] - points[start][0],\n            points[end][1] - points[start][1],\n          ];\n        for (let i = 0, l = fixedPoints.length; i < l; ++i) {\n          let fixId = fixedPoints[i];\n          if (fixId > start) {\n            if (fixId < end) {\n              usedIndex = fixId;\n              usedDistance = MAXLIMIT;\n              break;\n            } else {\n              break;\n            }\n          }\n        }\n        if (usedIndex < 0) {\n          if (Math.abs(vector[0]) > E1 || Math.abs(vector[1]) > E1) {\n            let vectorLength = vector[0] * vector[0] + vector[1] * vector[1],\n              vectorLength_1 = +1.0 / vectorLength;\n\n            for (let i = start + 1; i < end; ++i) {\n              let segmentDistance = pointToSegmentDistanceSquare(points[i], points[start], points[end], vector, vectorLength_1);\n\n              if (segmentDistance > usedDistance) {\n                usedIndex = i;\n                usedDistance = segmentDistance;\n              }\n            }\n\n          } else {\n            //фиксируем на среднинной точке\n            usedIndex = Math.round((start + end) * 0.5);\n            usedDistance = currentLimit;\n          }\n          distances[usedIndex] = usedDistance;\n        }\n        record = {\n          start: start,\n          end: end,\n          index: usedIndex,\n          distance: usedDistance,\n        };\n      }\n\n      if (record.index && record.distance > maximumDelta) {\n        if (record.index - start >= 2) {\n          queue.push({\n            start: start,\n            end: record.index,\n            record: record.left,\n            currentLimit: record.distance,\n            parent: record,\n            parentProperty: 'left',\n          });\n        }\n        if (end - record.index >= 2) {\n          queue.push({\n            start: record.index,\n            end: end,\n            record: record.right,\n            currentLimit: record.distance,\n            parent: record,\n            parentProperty: 'right',\n          });\n        }\n      }\n\n      return record;\n    }\n\n    function tick() {\n      let request = queue.pop(),\n        result = worker(request);\n\n      if (request.parent && request.parentProperty) {\n        request.parent[request.parentProperty] = result;\n      }\n\n      return result;\n    }\n\n    return function (delta) {\n      maximumDelta = delta;\n      queue.push({\n        start: 0,\n        end: len - 1,\n        record: subdivisionTree,\n        currentLimit: MAXLIMIT,\n      });\n      subdivisionTree = tick();\n\n      while (queue.length) {\n        tick();\n      }\n\n      return distances;\n    };\n\n  }\n\n  function pointToSegmentDistanceSquare(p, v1, v2, dv, dvlen_1) {\n\n    let t;\n    let vx = +v1[0],\n      vy = +v1[1];\n\n    t = +((p[0] - vx) * dv[0] + (p[1] - vy) * dv[1]) * (dvlen_1);\n\n    if (t > 1) {\n      vx = +v2[0];\n      vy = +v2[1];\n    } else if (t > 0) {\n      vx += +dv[0] * t;\n      vy += +dv[1] * t;\n    }\n\n    let a = +p[0] - vx,\n      b = +p[1] - vy;\n\n    return +a * a + b * b;\n  }\n\n  return simplify;\n})();\n","function detectSkin() {\n  return document.documentElement.classList.contains('theme-dark') ? 'skin-night' : 'skin-day';\n}\n\nlet skin = detectSkin();\n\nconst COLORS = {\n  'skin-day': {\n    'background': '#FFFFFF',\n    'text-color': '#222222',\n    'minimap-mask': '#E2EEF9/0.6',\n    'minimap-slider': '#C0D1E1',\n    'grid-lines': '#182D3B/0.1',\n    'zoom-out-text': '#108BE3',\n    'tooltip-background': '#FFFFFF',\n    'tooltip-arrow': '#D2D5D7',\n    'mask': '#FFFFFF/0.5',\n    'x-axis-text': '#252529/0.6',\n    'y-axis-text': '#252529/0.6',\n  },\n  'skin-night': {\n    'background': '#242F3E',\n    'text-color': '#FFFFFF',\n    'minimap-mask': '#304259/0.6',\n    'minimap-slider': '#56626D',\n    'grid-lines': '#FFFFFF/0.1',\n    'zoom-out-text': '#48AAF0',\n    'tooltip-background': '#1c2533',\n    'tooltip-arrow': '#D2D5D7',\n    'mask': '#242F3E/0.5',\n    'x-axis-text': '#A3B1C2/0.6',\n    'y-axis-text': '#A3B1C2/0.6',\n  },\n};\n\nconst styleElement = document.createElement('style');\nstyleElement.type = 'text/css';\nstyleElement.appendChild(document.createTextNode(''));\ndocument.head.appendChild(styleElement);\nconst styleSheet = styleElement.sheet;\n\ndocument.documentElement.addEventListener('darkmode', () => {\n  skin = detectSkin();\n});\n\nexport function createColors(datasetColors) {\n  const colors = {};\n  const baseClass = `.lovely-chart--color`;\n\n  ['skin-day', 'skin-night'].forEach((skin) => {\n    colors[skin] = {};\n\n    Object.keys(COLORS[skin]).forEach((prop) => {\n      colors[skin][prop] = hexToChannels(COLORS[skin][prop]);\n    });\n\n    Object.keys(datasetColors).forEach((key) => {\n      colors[skin][`dataset#${key}`] = hexToChannels(datasetColors[key]);\n\n      addCssRule(styleSheet, `.lovely-chart--tooltip-dataset-value${baseClass}-${datasetColors[key].slice(1)}`, `color: ${datasetColors[key]}`);\n      addCssRule(styleSheet, `.lovely-chart--button${baseClass}-${datasetColors[key].slice(1)}`, `border-color: ${datasetColors[key]}; color: ${datasetColors[key]}`);\n      addCssRule(styleSheet, `.lovely-chart--button.lovely-chart--state-checked${baseClass}-${datasetColors[key].slice(1)}`, `background-color: ${datasetColors[key]}`);\n    });\n  });\n\n  return colors;\n}\n\nexport function getCssColor(colors, key, opacity) {\n  return buildCssColor(colors[skin][key], opacity);\n}\n\nfunction hexToChannels(hexWithAlpha) {\n  const [hex, alpha] = hexWithAlpha.replace('#', '').split('/');\n\n  return [\n    parseInt(hex.slice(0, 2), 16),\n    parseInt(hex.slice(2, 4), 16),\n    parseInt(hex.slice(4, 6), 16),\n    alpha ? parseFloat(alpha) : 1,\n  ];\n}\n\nfunction buildCssColor([r, g, b, a = 1], opacity = 1) {\n  return `rgba(${r}, ${g}, ${b}, ${a * opacity})`;\n}\n\nfunction addCssRule(sheet, selector, rule) {\n  sheet.insertRule(`${selector} { ${rule} }`, sheet.cssRules.length);\n}\n","import { createElement } from './minifiers';\n\nexport function toggleText(element, newText, className = '', inverse = false) {\n  const container = element.parentNode;\n  container.classList.add('lovely-chart--transition-container');\n\n  const newElement = createElement(element.tagName);\n  newElement.className = `${className} lovely-chart--transition lovely-chart--position-${inverse ? 'top' : 'bottom'} lovely-chart--state-hidden`;\n  newElement.innerHTML = newText;\n\n  const selector = className.length ? `.${className.split(' ').join('.')}` : '';\n  const oldElements = container.querySelectorAll(`${selector}.lovely-chart--state-hidden`);\n  oldElements.forEach(e => e.remove());\n\n  element.classList.add('lovely-chart--transition');\n  element.classList.remove('lovely-chart--position-bottom', 'lovely-chart--position-top');\n  element.classList.add(inverse ? 'lovely-chart--position-bottom' : 'lovely-chart--position-top');\n  container.insertBefore(newElement, element.nextSibling);\n\n  toggleElementIn(newElement);\n  toggleElementOut(element);\n\n  return newElement;\n}\n\nfunction toggleElementIn(element) {\n  // Remove and add `animated` class to re-trigger animation\n  element.classList.remove('lovely-chart--state-animated');\n  element.classList.add('lovely-chart--state-animated');\n  element.classList.remove('lovely-chart--state-hidden');\n}\n\nfunction toggleElementOut(element) {\n  // Remove and add `animated` class to re-trigger animation\n  element.classList.remove('lovely-chart--state-animated');\n  element.classList.add('lovely-chart--state-animated');\n  element.classList.add('lovely-chart--state-hidden');\n}\n","// https://jsperf.com/finding-maximum-element-in-an-array\nexport function getMaxMin(array) {\n  const length = array.length;\n  let max = array[0];\n  let min = array[0];\n\n  for (let i = 0; i < length; i++) {\n    const value = array[i];\n\n    if (value > max) {\n      max = value;\n    } else if (value < min) {\n      min = value;\n    }\n  }\n\n  return { max, min };\n}\n\n// https://jsperf.com/multi-array-concat/24\nexport function mergeArrays(arrays) {\n  return [].concat.apply([], arrays);\n}\n\nexport function sumArrays(arrays) {\n  const sums = [];\n  const n = arrays.length;\n\n  for (let i = 0, l = arrays[0].length; i < l; i++) {\n    sums[i] = 0;\n\n    for (let j = 0; j < n; j++) {\n      sums[i] += arrays[j][i];\n    }\n  }\n\n  return sums;\n}\n\nexport function proxyMerge(obj1, obj2) {\n  return new Proxy({}, {\n    get: (obj, prop) => {\n      if (obj[prop] !== undefined) {\n        return obj[prop];\n      } else if (obj2[prop] !== undefined) {\n        return obj2[prop];\n      } else {\n        return obj1[prop];\n      }\n    },\n  });\n}\n\nexport function throttle(\n  fn,\n  ms,\n  shouldRunFirst = true,\n) {\n  let interval = null;\n  let isPending;\n  let args;\n\n  return (..._args) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        // @ts-ignore\n        fn(...args);\n      }\n\n      interval = window.setInterval(() => {\n        if (!isPending) {\n          window.clearInterval(interval);\n          interval = null;\n          return;\n        }\n\n        isPending = false;\n        // @ts-ignore\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithRaf(fn) {\n  let waiting = false;\n  let args;\n\n  return function (..._args) {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      requestAnimationFrame(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport function debounce(fn, ms, shouldRunFirst = true, shouldRunLast = true) {\n  let waitingTimeout = null;\n\n  return function () {\n    if (waitingTimeout) {\n      clearTimeout(waitingTimeout);\n      waitingTimeout = null;\n    } else if (shouldRunFirst) {\n      fn();\n    }\n\n    waitingTimeout = setTimeout(() => {\n      if (shouldRunLast) {\n        fn();\n      }\n\n      waitingTimeout = null;\n    }, ms);\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport {};"],"names":["GUTTER","AXES_FONT","X_AXIS_HEIGHT","X_AXIS_SHIFT_START","PLOT_TOP_PADDING","formatCryptoValue","humanize","getCssColor","applyXEdgeOpacity","applyYEdgeOpacity","xScaleLevelToStep","yScaleLevelToStep","toPixels","createAxes","context","data","plotSize","colors","drawXAxis","state","projection","clearRect","height","width","topOffset","scaleLevel","Math","floor","xAxisScale","step","opacityFactor","font","textAlign","textBaseline","i","labelFromIndex","labelToIndex","shiftedI","label","xLabels","xPx","opacity","fillStyle","fillText","text","drawYAxis","secondaryProjection","yAxisScale","yAxisScaleFrom","yAxisScaleTo","yAxisScaleProgress","yMinViewport","yMinViewportFrom","yMinViewportTo","yMaxViewport","yMaxViewportFrom","yMaxViewportTo","yMinViewportSecond","yMinViewportSecondFrom","yMinViewportSecondTo","yMaxViewportSecond","yMaxViewportSecondFrom","yMaxViewportSecondTo","colorKey","datasets","key","isYChanging","undefined","isPercentage","_drawYAxisPercents","isCurrency","_drawYAxisCurrency","_drawYAxisScaled","round","yAxisScaleSecond","yAxisScaleSecondFrom","yAxisScaleSecondTo","yAxisScaleSecondProgress","secondaryColorKey","length","yMin","yMax","isSecondary","firstVisibleValue","ceil","lastVisibleValue","lineWidth","beginPath","value","yPx","textOpacity","strokeStyle","moveTo","lineTo","stroke","percentValues","getSize","forEach","formatValue","values","map","total","reduce","sum","avg1","avg2","avg3","averageRate1","currencyRate","averageRate2","averageRate3","totalAvg","totalRate","index","max","toFixed","createElement","addEventListener","toggleText","throttle","createHeader","container","title","zoomOutLabel","zoomOutCallback","_element","_titleElement","_zoomOutElement","_captionElement","_isZooming","setCaptionThrottled","setCaption","_setupLayout","caption","innerHTML","zoom","setTimeout","_onZoomOut","toggleIsZooming","isZooming","className","appendChild","classList","remove","createStateManager","createMinimap","createTooltip","createTools","createZoomer","createColors","analyzeData","setupCanvas","clearCanvas","preparePoints","createProjection","drawDatasets","getFullLabelDate","getLabelDate","PLOT_HEIGHT","PLOT_LINE_WIDTH","SIMPLIFIER_PLOT_FACTOR","getSimplificationDelta","isDataRange","debounce","create","originalData","_stateManager","_plot","_context","_plotSize","_header","_axes","_minimap","_tooltip","_tools","_zoomer","_state","_windowWidth","window","innerWidth","_data","_colors","_redrawDebounced","_redraw","_setupComponents","_setupGlobalListeners","_setupContainer","_setupPlotCanvas","_onStateUpdate","_onRangeChange","_onZoomIn","_onFocus","_onFilterChange","isZoomable","shouldZoomToPie","canvas","clientWidth","offsetWidth","offsetHeight","range","from","to","boundsAndParams","begin","end","totalXWidth","availableWidth","availableHeight","xPadding","yPadding","visibilities","points","secondaryPoints","hasSecondYAxis","secondaryDataset","find","d","hasOwnYAxis","bounds","copy","hideCaption","_getCaption","totalPoints","a","p","simplification","isPie","update","filter","focusOn","isBars","isSteps","labelIndex","zoomIn","zoomOut","document","documentElement","Object","assign","startIndex","endIndex","isZoomed","captureEvents","DEFAULT_RANGE","MINIMAP_HEIGHT","MINIMAP_EAR_WIDTH","MINIMAP_MARGIN","MINIMAP_LINE_WIDTH","MINIMAP_MAX_ANIMATED_DATASETS","SIMPLIFIER_MINIMAP_FACTOR","proxyMerge","throttleWithRaf","rangeCallback","_canvas","_canvasSize","_ruler","_slider","_capturedOffset","_range","_updateRulerOnRaf","_updateRuler","_updateRange","minimapRange","newState","static","_isStateChanged","_drawDatasets","toggle","shouldShow","requestAnimationFrame","style","_setupCanvas","_setupRuler","_getSize","children","onCapture","_onDragCapture","onDrag","_onSliderDrag","onRelease","_onDragRelease","draggingCursor","_onLeftEarDrag","_onRightEarDrag","some","yMaxMinimap","yMinMinimap","yMinMinimapSecond","yMaxMinimapSecond","e","preventDefault","target","offsetLeft","moveEvent","captureEvent","dragOffsetX","minX1","maxX1","newX1","min","newX2","minX2","maxX2","isExternal","nextRange","minimapDelta","_adjustDiscreteRange","params","effectiveWidth","xFactor","xOffsetPx","effectiveHeight","yFactor","yOffsetPx","getState","findClosestLabelIndex","overrides","cons","getCenter","getParams","createTransitionManager","getMaxMin","mergeArrays","sumArrays","AXES_MAX_COLUMN_WIDTH","AXES_MAX_ROW_HEIGHT","ANIMATE_PROPS","Y_AXIS_ZERO_BASED_THRESHOLD","xStepToScaleLevel","yStepToScaleLevel","viewportSize","callback","_filter","_buildDefaultFilter","_transitionConfig","_buildTransitionConfig","_transitions","_runCallback","_runCallbackOnRaf","noTransition","prevState","calculateState","prop","duration","options","transition","get","currentTarget","current","includes","add","isRunning","isFast","hasAnimations","transitionConfig","datasetVisibilities","split","push","calculateXAxisScale","yRanges","isStacked","calculateYRangesStacked","calculateYRanges","calculateYAxisScale","yStep","yStepSecond","datasetsOpacity","secondaryYAxisDataset","slice","filteredDatasets","calculateYRangesForGroup","yMinMinimapReal","filteredValues","viewportValues","viewportMaxMin","yMinViewportReal","sums","plotWidth","viewportLabelsCount","maxColumns","plotHeight","maxRows","filterCallback","_updateFilter","redraw","oldElement","parentNode","removeChild","name","control","href","dataset","clickPrevented","onLongPress","button","isLongPress","buttons","Array","getElementsByTagName","isSingleChecked","querySelectorAll","contains","b","input","BALLOON_OFFSET","getPieRadius","formatInteger","getLabelTime","statsFormatDayHourFull","onZoom","onFocus","_points","_projection","_secondaryPoints","_secondaryProjection","_balloon","_offsetX","_offsetY","_clickedOnLabel","_isZoomed","_selectLabelOnRaf","_selectLabel","_throttledUpdateContent","_updateContent","toggleLoading","isLoading","_clear","toggleIsZoomed","_setupBalloon","_onMouseMove","_onDocumentMove","_onClick","_onBalloonClick","pageOffset","_getPageOffset","touches","clientX","left","clientY","top","oldLabelIndex","newLabelIndex","_getLabelIndex","_hideBalloon","pointerVector","getPointerVector","shouldShowBalloon","distance","getValue","x","statistics","originalIndex","_updateBalloon","isLines","isAreas","_drawCircles","_drawTail","pointIndex","point","y","stackValue","_drawCircle","strokeColor","fillColor","arc","PI","fill","color","_getBalloonLeftOffset","meanLabel","angle","shouldPlaceRight","leftOffset","_getBalloonTopOffset","transform","_getTitle","tooltipFormatter","_isPieSectorSelected","totalValue","offset","beginAngle","endAngle","_updateTitle","titleContainer","display","currentTitle","querySelector","_insertNewDataSet","dataSetContainer","newDataSet","setAttribute","_renderPercentageValue","totalText","insertBefore","_updateDataSet","currentDataSet","valueElement","dataSet","percentageValue","percentageElement","newPercentageTitle","prepend","_updateDataSets","finalStatistics","statItem","_renderTotal","_renderCurrencyRate","newTotalText","totalUsd","parseFloat","getBoundingClientRect","center","atan2","sqrt","el","SPEED_TEST_FAST_FPS","SPEED_TEST_INTERVAL","TRANSITION_DEFAULT_DURATION","t","pow","onTick","_nextFrame","_testStartedAt","_fps","_testingFps","_slowDetectedAt","_startedAsSlow","startedAt","Date","now","progress","_resetSpeedTest","_tick","cancelAnimationFrame","keys","Boolean","forceCheck","isSlow","_speedTest","ZOOM_RANGE_DELTA","ZOOM_RANGE_MIDDLE","ZOOM_TIMEOUT","overviewData","stateManager","header","minimap","tooltip","tools","_stateBeforeZoomIn","_stateBeforeZoomOut","dataPromise","Promise","resolve","_generatePieData","then","newData","_replaceData","newRawData","zoomInLabel","labelWidth","labelMiddle","shouldZoomToLines","scrollWidth","scrollHeight","daysCount","halfDayWidth","type","labels","DPR","getContext","scale","removeEventListener","LONG_PRESS_TIMEOUT","element","longPressTimeout","onMove","pageX","body","clearTimeout","devicePixelRatio","PLOT_PIE_RADIUS_FACTOR","PLOT_PIE_SHIFT","PLOT_BARS_WIDTH_SHIFT","PIE_MINIMUM_VISIBLE_PERCENT","MONTHS","WEEK_DAYS","WEEK_DAYS_SHORT","MILISECONDS_IN_DAY","SIMPLIFIER_MIN_POINTS","statsFormatDay","statsFormatDayHour","statsFormatText","statsFormatMin","labelFormatter","prepareDatasets","totalYMin","Infinity","totalYMax","effectiveLabelFormatter","analyzed","cloneArray","array","getPieTextShift","getPieTextSize","simplify","pieToBar","datasetType","datasetPoints","datasetProjection","yHeight","bottomLine","topLine","radius","x0","x1","drawDataset","drawBarsMask","args","drawDatasetLine","drawDatasetBars","drawDatasetSteps","drawDatasetArea","drawDatasetPie","pixels","j","l","simplifierFn","save","globalAlpha","lineJoin","lineCap","restore","stackOffset","yFrom","yTo","rectX","rectY","rectW","rectH","fillRect","xCenter","yCenter","visibleValue","percentFactor","percent","shift","shiftAngle","directionX","cos","directionY","sin","shiftX","shiftY","textShift","date","day","getDate","month","getMonth","toString","match","decimals","keepThreeDigits","replace","n","String","Number","isShort","displayWeekDay","displayYear","displayHours","weekDaysArray","string","getUTCDate","getUTCMonth","getUTCDay","getUTCFullYear","getUTCHours","getUTCMinutes","log2","SCALE_LEVELS","neededStep","findIndex","edgeOffset","log","labelFrom","labelTo","abs","pointsLength","tagName","event","cb","pieToArea","prepareSumsByX","datasetValues","preparePercentage","prepareStacked","getSumsByY","sumsByY","accum","indexes","fixedPoints","removed","worker","precalculate","delta","result","resultIndexes","delta2","markers","E1","MAXLIMIT","len","distances","queue","maximumDelta","subdivisionTree","start","record","currentLimit","usedDistance","usedIndex","vector","fixId","vectorLength","vectorLength_1","segmentDistance","pointToSegmentDistanceSquare","parent","parentProperty","right","tick","request","pop","v1","v2","dv","dvlen_1","vx","vy","detectSkin","skin","COLORS","styleElement","createTextNode","head","styleSheet","sheet","datasetColors","baseClass","hexToChannels","addCssRule","buildCssColor","hexWithAlpha","hex","alpha","parseInt","r","g","selector","rule","insertRule","cssRules","newText","inverse","newElement","join","oldElements","nextSibling","toggleElementIn","toggleElementOut","arrays","concat","apply","obj1","obj2","Proxy","obj","fn","ms","shouldRunFirst","interval","isPending","_args","setInterval","clearInterval","waiting","shouldRunLast","waitingTimeout"],"sourceRoot":""}